(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{188:function(e,t,n){e.exports=n(333)},333:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(26),o=n.n(c),u=n(39),l=(n(197),n(73)),s=n.n(l),i=n(344),p=n(334),d=n(106),f=n(345),g=n(343),m=n(22),O=n.n(m),b=n(48),v={login:function(){var e=Object(b.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},h=function(){var e=Object(u.b)(),t=Object(r.useState)(""),n=Object(d.a)(t,2),c=n[0],o=n[1],l=Object(r.useState)(""),s=Object(d.a)(l,2),i=s[0],m=s[1];return a.a.createElement("div",null,a.a.createElement("h1",null,"RADIO TRACKLIST REPORTING"),a.a.createElement("h3",null,"Log in"),a.a.createElement(f.a,{onSubmit:function(t){t.preventDefault(),e(function(e){return function(){var t=Object(b.a)(O.a.mark((function t(n){var r;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:"SET_LOADING"}),t.next=4,v.login(e);case 4:r=t.sent,console.log(r),window.localStorage.setItem("loggedUser",JSON.stringify(r)),n({type:"LOGIN",data:r,loading:!1}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}({username:c,password:i}))}},a.a.createElement(f.a.Field,{label:"username",control:g.a,type:"text",placeholder:"Username...",onChange:function(e){return o(e.target.value.trim())}}),a.a.createElement(f.a.Field,{label:"password",control:g.a,type:"password",placeholder:"Password...",onChange:function(e){return m(e.target.value.trim())}}),a.a.createElement(p.a,{color:"green",type:"submit"},"Kirjaudu")))},w=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.login}));Object(r.useEffect)((function(){e(function(){var e=Object(b.a)(O.a.mark((function e(t){var n,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t({type:"SET_LOADING"}),(n=window.localStorage.getItem("loggedUser"))&&(r=JSON.parse(n),t({type:"INIT_USER",data:r}))}catch(a){console.log(a)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),s.a.get("/ping")}),[]);return null===t.currentUser?a.a.createElement(i.a,null,a.a.createElement(h,null)):a.a.createElement("div",{className:"App"},a.a.createElement("h1",null,"you logged in as ",t.currentUser.username),a.a.createElement(p.a,{onClick:function(){e(function(){var e=Object(b.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.localStorage.removeItem("loggedUser"),t({type:"LOGOUT"});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},"logout"))},E=n(37),j=n(174),y=n(175),I=n(50),S={loading:!1,current:null},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LOADING":return Object(I.a)({},e,{loading:!1});default:return e}},T={loading:!1,currentUser:null},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_USER":case"LOGIN":return Object(I.a)({},e,{currentUser:t.data,loading:!1});case"LOGOUT":return T;case"SET_LOADING":return Object(I.a)({},e,{loading:!0});default:return e}},L=Object(E.combineReducers)({login:U,users:N}),x=Object(E.createStore)(L,Object(j.composeWithDevTools)(Object(E.applyMiddleware)(y.a)));o.a.render(a.a.createElement(u.a,{store:x},a.a.createElement(w,null)),document.getElementById("root"))}},[[188,1,2]]]);
//# sourceMappingURL=main.5bb5eeb7.chunk.js.map