(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{188:function(e,t,n){e.exports=n(333)},333:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(26),o=n.n(c),u=n(39),l=(n(197),n(73)),s=n.n(l),i=n(344),p=n(334),d=n(106),f=n(345),g=n(343),O=n(22),m=n.n(O),b=n(48),v={login:function(){var e=Object(b.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},h=function(){var e=Object(u.b)(),t=Object(a.useState)(""),n=Object(d.a)(t,2),c=n[0],o=n[1],l=Object(a.useState)(""),s=Object(d.a)(l,2),i=s[0],O=s[1];return r.a.createElement("div",null,r.a.createElement("h1",null,"RADIO HELSINKI - TEOSTORAPORTOINTI"),r.a.createElement("h3",null,"Kirjaudu sis\xe4\xe4n"),r.a.createElement(f.a,{onSubmit:function(t){t.preventDefault(),e(function(e){return function(){var t=Object(b.a)(m.a.mark((function t(n){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:"SET_LOADING"}),t.next=4,v.login(e);case 4:a=t.sent,console.log(a),window.localStorage.setItem("loggedUser",JSON.stringify(a)),n({type:"LOGIN",data:a,loading:!1}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}({username:c,password:i}))}},r.a.createElement(f.a.Field,{label:"K\xe4ytt\xe4j\xe4tunnus",control:g.a,type:"text",placeholder:"K\xe4ytt\xe4j\xe4tunnus...",onChange:function(e){return o(e.target.value.trim())}}),r.a.createElement(f.a.Field,{label:"Salasana",control:g.a,type:"password",placeholder:"Salasana...",onChange:function(e){return O(e.target.value.trim())}}),r.a.createElement(p.a,{color:"green",type:"submit"},"Kirjaudu")))},E=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.login}));Object(a.useEffect)((function(){e(function(){var e=Object(b.a)(m.a.mark((function e(t){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t({type:"SET_LOADING"}),(n=window.localStorage.getItem("loggedUser"))&&(a=JSON.parse(n),t({type:"INIT_USER",data:a}))}catch(r){console.log(r)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),s.a.get("/ping")}),[]);return null===t.currentUser?r.a.createElement(i.a,null,r.a.createElement(h,null)):r.a.createElement("div",{className:"App"},r.a.createElement("h1",null,"you logged in as ",t.currentUser.username),r.a.createElement(p.a,{onClick:function(){e(function(){var e=Object(b.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.localStorage.removeItem("loggedUser"),t({type:"LOGOUT"});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},"logout"))},j=n(37),w=n(174),y=n(175),I=n(50),S={loading:!1,current:null},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LOADING":return Object(I.a)({},e,{loading:!1});default:return e}},T={loading:!1,currentUser:null},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_USER":case"LOGIN":return Object(I.a)({},e,{currentUser:t.data,loading:!1});case"LOGOUT":return T;case"SET_LOADING":return Object(I.a)({},e,{loading:!0});default:return e}},x=Object(j.combineReducers)({login:U,users:N}),L=Object(j.createStore)(x,Object(w.composeWithDevTools)(Object(j.applyMiddleware)(y.a)));o.a.render(r.a.createElement(u.a,{store:L},r.a.createElement(E,null)),document.getElementById("root"))}},[[188,1,2]]]);
//# sourceMappingURL=main.2e6d1681.chunk.js.map