(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{321:function(e,t,a){e.exports=a(564)},347:function(e,t,a){},564:function(e,t,a){"use strict";a.r(t);for(var r=a(0),n=a.n(r),l=a(47),c=a.n(l),o=a(15),u=(a(329),a(24)),i=a(75),s=a(17),m=a.n(s),p=a(579),d=(a(347),a(13)),E=a(587),f=a(578),b=a(2),v=a.n(b),g=a(7),h=null,y=function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:h}},e.next=3,m.a.get("".concat("/api/albums","/albumdetails/").concat(t),a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:h}},e.next=3,m.a.get("".concat("/api/albums","/tracklist/").concat(t),a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O={setToken:function(e){h="bearer ".concat(e)},updateAlbum:function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:h}},e.next=3,m.a.put("".concat("/api/albums","/albumdetails/").concat(t.id),t,a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getOneAlbum:y,getTracklistOfAlbum:_,changeArtistId:function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:h}},e.next=3,m.a.put("/api/albums/updateartist",t,a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},k=null,A=function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:k}},e.next=3,m.a.get("".concat("/api/search","/autocomplete/").concat(t),a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(g.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get("https://api.discogs.com/database/search?artist=".concat(t.artist,"&release_title=").concat(t.album,"&token=").concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_DISCOGS_TOKEN));case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:k}},e.next=3,m.a.get("/api/top100?list=".concat(t.list,"&start_date=").concat(t.start_date,"&end_date=").concat(t.end_date),a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:k}},e.next=3,m.a.get("".concat("/api/search","/advanced?kind=").concat(t.kind,"&query=").concat(t.query),a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:k}},e.next=3,m.a.put("".concat("/api/search","/advanced"),t,a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j={advancedSearch:C,getTop100:w,getDiscogsData:T,getTracksForAutocompleteSearch:A,setToken:function(e){k="bearer ".concat(e)},changeArtistOptions:function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:k}},e.next=3,m.a.get("".concat("/api/search","/changeartist/").concat(t),a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),changeAlbumOptions:function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:k}},e.next=3,m.a.get("".concat("/api/search","/changealbum/").concat(t),a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),merge:R},S=function(e,t){var a={message:e,type:t};return function(){var e=Object(g.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"SET_NOTIFICATION",data:a}),setTimeout((function(){t({type:"CLEAR_NOTIFICATION"})}),3e3);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},x=a(588),L=a(589),D=a(206),I=a(8),N=a(581),P=function(e){var t=e.name,a=e.label,r=e.options;return n.a.createElement(N.a.Field,null,n.a.createElement("label",null,a),n.a.createElement(I.b,{as:"select",name:t,className:"ui dropdown"},r.map((function(e){return n.a.createElement("option",{key:e.value,value:e.value},e.label||e.value)}))))},U=function(e){var t=e.field,a=e.label,r=e.placeholder;return n.a.createElement(N.a.Field,null,n.a.createElement("label",null,a),n.a.createElement(I.b,Object.assign({placeholder:r},t,{type:"text"})),n.a.createElement("div",{style:{color:"red"}},n.a.createElement(I.a,{name:t.name})))},G=function(e){var t=e.field,a=e.label,r=e.placeholder;return n.a.createElement(N.a.Field,{required:!0},n.a.createElement("label",null,a),n.a.createElement(I.b,Object.assign({placeholder:r},t,{type:"text"})),n.a.createElement("div",{style:{color:"red"}},n.a.createElement(I.a,{name:t.name})))},M=function(e){var t=e.field,a=e.label,r=e.placeholder;return n.a.createElement(N.a.Field,null,n.a.createElement("label",null,a),n.a.createElement(I.b,Object.assign({placeholder:r},t,{type:"password"})),n.a.createElement("div",{style:{color:"red"}},n.a.createElement(I.a,{name:t.name})))},F=function(e){var t=e.field,a=e.label,r=e.placeholder;return n.a.createElement(N.a.Field,{required:!0},n.a.createElement("label",null,a),n.a.createElement(I.b,Object.assign({placeholder:r},t,{type:"password"})),n.a.createElement("div",{style:{color:"red"}},n.a.createElement(I.a,{name:t.name})))},B=function(e){var t=e.field,a=e.label,r=e.min,l=e.max;return n.a.createElement(N.a.Field,null,n.a.createElement("label",null,a),n.a.createElement(I.b,Object.assign({},t,{type:"number",min:r,max:l})),n.a.createElement("div",{style:{color:"red"}},n.a.createElement(I.a,{name:t.name})))},Y=function(e){var t,a=e.currentAlbum,r=e.onSubmit;return null===a?n.a.createElement(E.a,null,n.a.createElement(f.a,null,"Loading artist...")):n.a.createElement(x.a,{columns:2},n.a.createElement(x.a.Column,null,n.a.createElement(L.a,null,"Artist info"),n.a.createElement(I.d,{initialValues:{id:a.album_id,name:a.album_name,label:a.label||"",cat_id:a.cat_id||"",year:Number(null===(t=a.year)||void 0===t?void 0:t.substring(0,4))||"",spotify_id:a.spotify_id||""},onSubmit:r,validate:function(e){console.log(e);var t={};return e.name||(t.name="Album name is required"),t}},(function(e){var t=e.isValid;return n.a.createElement(I.c,{className:"form ui"},n.a.createElement(I.b,{label:"Album name",placeholder:"Name",name:"name",component:U}),n.a.createElement(I.b,{label:"Label",placeholder:"Label...",name:"label",component:U}),n.a.createElement(I.b,{label:"Catalog ID",placeholder:"Catalog ID...",name:"cat_id",component:U}),n.a.createElement(I.b,{label:"Year",name:"year",component:B,min:1900,max:2900}),n.a.createElement(I.b,{label:"Spotify id",placeholder:"Spotify id",name:"spotify_id",component:U}),n.a.createElement(D.a,{type:"submit",floated:"left",color:"green",disabled:!t},"Update album"))}))))},z=a(584),V=function(e){var t=e.track;return n.a.createElement(z.a.Row,null,n.a.createElement(z.a.Cell,null,"merge album tracks modal here"),n.a.createElement(z.a.Cell,null,n.a.createElement(u.b,{to:"/track/".concat(t.track_id)},t.artist_name," - ",t.track_title," ")),n.a.createElement(z.a.Cell,null,t.track_no," / ",t.disc_no),n.a.createElement(z.a.Cell,null,t.isrc),n.a.createElement(z.a.Cell,null,t.report_occurrence),n.a.createElement(z.a.Cell,null,"add to current report button here"))},H=function(e){var t=e.tracklist;return null===t?n.a.createElement("span",null,"loading"):n.a.createElement(n.a.Fragment,null,n.a.createElement("h4",null,"Tracks"),n.a.createElement(z.a,{striped:!0},n.a.createElement(z.a.Header,null,n.a.createElement(z.a.Row,null,n.a.createElement(z.a.Cell,null,"Track ID#"),n.a.createElement(z.a.Cell,null,"ARTIST - Track"),n.a.createElement(z.a.Cell,null,"Track# / Disc#"),n.a.createElement(z.a.Cell,null,"ISRC"),n.a.createElement(z.a.Cell,null,"Report occurrence"))),n.a.createElement(z.a.Body,null,t.map((function(e){return n.a.createElement(V,{key:e.track_id,track:e})})))))},q=function(e){var t=e.id,a=Object(o.b)(),l=Object(o.c)((function(e){return e.album}));console.log(l);var c=Object(o.c)((function(e){return e.report}));if(console.log(c),Object(r.useEffect)((function(){a(function(e){return function(){var t=Object(g.a)(v.a.mark((function t(a){var r,n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"CLEAR_CURRENT_ALBUM"}),a({type:"SET_LOADING"}),t.next=5,O.getOneAlbum(e);case 5:return r=t.sent,console.log("albumactions getonealbum",r),a({type:"GET_ONE_ALBUM",data:r}),t.next=10,O.getTracklistOfAlbum(e);case 10:n=t.sent,a({type:"GET_TRACKLIST_OF_ALBUM",data:n}),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),console.log("albumActions getOneAlbum error:",t.t0);case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e){return t.apply(this,arguments)}}()}(t))}),[t]),null===l.currentAlbum)return n.a.createElement(p.a,null,n.a.createElement(E.a,null,n.a.createElement(f.a,null,"Ladataan...")));return n.a.createElement(p.a,null,n.a.createElement(Y,{onSubmit:function(e){var t=Object(d.a)({},e,{year:e.year.toString()});a(function(e){return function(){var t=Object(g.a)(v.a.mark((function t(a){var r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"SET_LOADING"}),t.next=4,O.updateAlbum(e);case 4:return t.next=6,O.getOneAlbum(e.id);case 6:r=t.sent,a({type:"GET_ONE_ALBUM",data:r}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log("albumActions updateAlbum error:",t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}(t)),a(S("Artist ".concat(e.name," updated!"),"success"))},currentAlbum:l.currentAlbum}),n.a.createElement(H,{tracklist:l.tracklist}))},K=null,J=function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:K}},e.next=3,m.a.get("".concat("/api/artists","/details/").concat(t),a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:K}},e.next=3,m.a.get("".concat("/api/artists","/albumsby/").concat(t),a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q={setToken:function(e){K="bearer ".concat(e)},updateArtist:function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:K}},e.next=3,m.a.put("".concat("/api/artists","/details/").concat(t.id),t,a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getOneArtist:J,getAlbumsByArtist:W},X=function(e){var t=e.album;return n.a.createElement(z.a.Row,null,n.a.createElement(z.a.Cell,null,"merge albums modal here"),n.a.createElement(z.a.Cell,null,n.a.createElement(u.b,{to:"/album/".concat(t.album_id)},t.name)),n.a.createElement(z.a.Cell,null,t.identifier),n.a.createElement(z.a.Cell,null,t.track_count),n.a.createElement(z.a.Cell,null,t.report_occurrence))},Z=function(e){var t=e.albumList;return null===t?n.a.createElement("span",null,"loading"):n.a.createElement(n.a.Fragment,null,n.a.createElement("h4",null,"Albums"),n.a.createElement(z.a,{striped:!0},n.a.createElement(z.a.Header,null,n.a.createElement(z.a.Row,null,n.a.createElement(z.a.Cell,null,"ID#"),n.a.createElement(z.a.Cell,null,"Album name"),n.a.createElement(z.a.Cell,null,"Catalog ID"),n.a.createElement(z.a.Cell,null,"Tracks"),n.a.createElement(z.a.Cell,null,"Report occurrence"),n.a.createElement(z.a.Cell,null))),n.a.createElement(z.a.Body,null,t.map((function(e){return n.a.createElement(X,{key:e.album_id,album:e})})))))},$=function(e){var t=e.currentArtist,a=e.onSubmit;return null===t?n.a.createElement(E.a,null,n.a.createElement(f.a,null,"Loading artist...")):n.a.createElement(x.a,{columns:2},n.a.createElement(x.a.Column,null,n.a.createElement(L.a,null,"Artist info"),n.a.createElement(I.d,{initialValues:{id:t.id,name:t.name,spotify_id:t.spotify_id||""},onSubmit:a,validate:function(e){var t={};return e.name||(t.name="Artist name is required"),t}},(function(e){var t=e.isValid;return n.a.createElement(I.c,{className:"form ui"},n.a.createElement(I.b,{label:"Artist name",placeholder:"Name",name:"name",component:U}),n.a.createElement(I.b,{label:"Spotify id",placeholder:"Spotify id",name:"spotify_id",component:U}),n.a.createElement(D.a,{type:"submit",floated:"left",color:"green",disabled:!t},"Update artist"))}))))},ee=function(e){var t=e.id,a=Object(o.b)(),l=Object(o.c)((function(e){return e.artist}));Object(r.useEffect)((function(){a(function(e){return function(){var t=Object(g.a)(v.a.mark((function t(a){var r,n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"CLEAR_CURRENT_ARTIST"}),a({type:"SET_LOADING"}),t.next=5,Q.getOneArtist(e);case 5:return r=t.sent,a({type:"GET_ONE_ARTIST",data:r}),t.next=9,Q.getAlbumsByArtist(e);case 9:n=t.sent,a({type:"GET_ALBUM_LIST_BY_ARTIST",data:n}),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),console.log(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}()}(t))}),[t]);return null===l.currentArtist?n.a.createElement(p.a,null,n.a.createElement(E.a,null,n.a.createElement(f.a,null,"Ladataan..."))):n.a.createElement(p.a,null,n.a.createElement($,{currentArtist:l.currentArtist,onSubmit:function(e){var t;a((t=e,function(){var e=Object(g.a)(v.a.mark((function e(a){var r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:"SET_LOADING"}),e.next=3,Q.updateArtist(t);case 3:return e.next=5,Q.getOneArtist(t.id);case 5:r=e.sent,a({type:"GET_ONE_ARTIST",data:r});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),a(S("Artist ".concat(e.name," updated!"),"success"))}}),n.a.createElement(Z,{albumList:l.albumList}))},te=function(){return n.a.createElement("div",{style:{marginTop:"5rem",marginBottom:"2rem",textAlign:"center"}},n.a.createElement("br",null),n.a.createElement("em",null," ","\xa9 ",(new Date).getFullYear()," ",n.a.createElement("a",{href:"https://www.teemukostamo.com",target:"_blank",rel:"noopener noreferrer"}," ","Teemu Kostamo"," ")," "))},ae=a(27),re=a(35),ne=a.n(re),le=a(99),ce=[{key:0,label:"00:00",value:"00:00:00"},{key:1,label:"01:00",value:"01:00:00"},{key:2,label:"02:00",value:"02:00:00"},{key:3,label:"03:00",value:"03:00:00"},{key:4,label:"04:00",value:"04:00:00"},{key:5,label:"05:00",value:"05:00:00"},{key:6,label:"06:00",value:"06:00:00"},{key:7,label:"07:00",value:"07:00:00"},{key:8,label:"08:00",value:"08:00:00"},{key:9,label:"09:00",value:"09:00:00"},{key:10,label:"10:00",value:"10:00:00"},{key:11,label:"11:00",value:"11:00:00"},{key:12,label:"12:00",value:"12:00:00"},{key:13,label:"13:00",value:"13:00:00"},{key:14,label:"14:00",value:"14:00:00"},{key:15,label:"15:00",value:"15:00:00"},{key:16,label:"16:00",value:"16:00:00"},{key:17,label:"17:00",value:"17:00:00"},{key:18,label:"18:00",value:"18:00:00"},{key:19,label:"19:00",value:"19:00:00"},{key:20,label:"20:00",value:"20:00:00"},{key:21,label:"21:00",value:"21:00:00"},{key:22,label:"22:00",value:"22:00:00"},{key:23,label:"23:00",value:"23:00:00"}],oe=[{key:0,label:"01:00",value:"01:00:00"},{key:1,label:"02:00",value:"02:00:00"},{key:2,label:"03:00",value:"03:00:00"},{key:3,label:"04:00",value:"04:00:00"},{key:4,label:"05:00",value:"05:00:00"},{key:5,label:"06:00",value:"06:00:00"},{key:6,label:"07:00",value:"07:00:00"},{key:7,label:"08:00",value:"08:00:00"},{key:8,label:"09:00",value:"09:00:00"},{key:9,label:"10:00",value:"10:00:00"},{key:10,label:"11:00",value:"11:00:00"},{key:11,label:"12:00",value:"12:00:00"},{key:12,label:"13:00",value:"13:00:00"},{key:13,label:"14:00",value:"14:00:00"},{key:14,label:"15:00",value:"15:00:00"},{key:15,label:"16:00",value:"16:00:00"},{key:16,label:"17:00",value:"17:00:00"},{key:17,label:"18:00",value:"18:00:00"},{key:18,label:"19:00",value:"19:00:00"},{key:19,label:"20:00",value:"20:00:00"},{key:20,label:"21:00",value:"21:00:00"},{key:21,label:"22:00",value:"22:00:00"},{key:22,label:"23:00",value:"23:00:00"},{key:23,label:"24:00",value:"23:59:59"}],ue=[{key:"01",label:"January",value:"01"},{key:"02",label:"February",value:"02"},{key:"03",label:"March",value:"03"},{key:"04",label:"April",value:"04"},{key:"05",label:"May",value:"05"},{key:"06",label:"June",value:"06"},{key:"07",label:"July",value:"07"},{key:"08",label:"August",value:"08"},{key:"09",label:"September",value:"09"},{key:"10",label:"October",value:"10"},{key:"11",label:"November",value:"11"},{key:"12",label:"December",value:"12"}],ie=(new Date).getFullYear()+1,se=[],me=2001;me<=ie;me++)se.push(me);var pe,de=se.map((function(e){return{key:e.toString(),label:e.toString(),value:e.toString()}})),Ee=de=de.reverse(),fe=function(e){var t=e.onSubmit,a=e.currentUser,r=e.programOptions;return console.log(r),n.a.createElement(I.d,{initialValues:{program_name:"",program_no:0,program_dj:"".concat(null===a||void 0===a?void 0:a.first_name," ").concat(null===a||void 0===a?void 0:a.last_name),program_date:ne()(new Date).format("YYYY-MM-DD"),program_start_time:void 0,program_end_time:void 0,program_id:0,rerun:null,status:0,user_id:(null===a||void 0===a?void 0:a.id)||0,username:(null===a||void 0===a?void 0:a.username)||"",first_name:(null===a||void 0===a?void 0:a.first_name)||"",last_name:(null===a||void 0===a?void 0:a.last_name)||""},onSubmit:t,validate:function(e){console.log(e);var t={};return e.program_dj||(t.name="Field is required"),void 0===e.program_start_time&&(t.name="Field is required"),void 0===e.program_end_time&&(t.name="Field is required"),t}},(function(e){var t=e.isValid,a=e.dirty;return n.a.createElement(I.c,{className:"form ui"},n.a.createElement(P,{label:"Program",name:"program_id",options:r}),n.a.createElement(I.b,{label:"Program number",name:"program_no",component:B,min:0,max:999}),n.a.createElement(I.b,{label:"DJ",placeholder:"DJ",name:"program_dj",component:U}),n.a.createElement(x.a,null,n.a.createElement(x.a.Column,{width:5},n.a.createElement("label",null,"Program date"),n.a.createElement(le.a,{name:"program_date",dateFormat:"dd.MM.yyyy",placeholder:"dd.mm.yyyy"})," "),n.a.createElement(x.a.Column,{width:5},n.a.createElement(P,{label:"Start time",name:"program_start_time",options:ce})),n.a.createElement(x.a.Column,{width:5},n.a.createElement(P,{label:"End time",name:"program_end_time",options:oe}))),n.a.createElement(D.a,{style:{marginTop:"1rem"},type:"submit",floated:"left",color:"green",disabled:!t||!a},"Create report"))}))},be=null,ve=function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:be}},e.next=3,m.a.get("".concat("/api/reports","/").concat(t),a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ge={setToken:function(e){be="bearer ".concat(e)},addTrackToReport:function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:be}},e.next=3,m.a.post("".concat("/api/reports"),t,a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),deleteTrackFromReport:function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:be}},e.next=3,m.a.delete("".concat("/api/reports","/").concat(t),a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),deleteReport:function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:be}},e.next=3,m.a.put("/api/reportslist/".concat(t),{},a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getOne:ve,getReportDetails:function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:be}},e.next=3,m.a.get("/api/reportdetails/details/".concat(t),a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),createReport:function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:be}},e.next=3,m.a.post("/api/reportdetails",t,a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateReport:function(){var e=Object(g.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:be}},e.next=3,m.a.put("/api/reportdetails/update/".concat(t.id),t,a);case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},he=function(){var e=Object(r.useState)(!1),t=Object(ae.a)(e,2),a=(t[0],t[1],Object(o.b)()),l=Object(o.c)((function(e){return e.program})),c=Object(o.c)((function(e){return e.login})),u=l.activePrograms.map((function(e){return{key:e.id,label:e.name,value:e.id}}));return n.a.createElement(x.a.Column,null,n.a.createElement(p.a,null,n.a.createElement(L.a,null,"Create new report form here"),n.a.createElement(fe,{onSubmit:function(e){var t;console.log("submit new report values",e);var r,n=Object(d.a)({},e,{program_id:Number(e.program_id),program_name:null===(t=l.activePrograms.find((function(t){return t.id===Number(e.program_id)})))||void 0===t?void 0:t.name});console.log("report to create values",n),a(S("Created new report for the program ".concat(n.program_name," "),"success")),a((r=n,function(){var e=Object(g.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"SET_LOADING"}),e.next=4,ge.createReport(r);case 4:a=e.sent,t({type:"CREATE_REPORT",data:a}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()))},currentUser:c.currentUser,programOptions:u})))},ye=a(83),_e=a(580),Oe=a(298),ke=a.n(Oe),Ae=null,Te=function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:Ae}},e.next=3,m.a.get("".concat("/api/reportslist","/date/").concat(t),a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),we=function(){var e=Object(g.a)(v.a.mark((function e(t,a){var r,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:{Authorization:Ae}},e.next=3,m.a.get("".concat("/api/reportslist","/all?date=").concat(t,"&user=").concat(a),r);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Ce=function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:Ae}},e.next=3,m.a.get("".concat("/api/reportslist","/user/").concat(t),a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Re=function(){var e=Object(g.a)(v.a.mark((function e(){var t,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:Ae}},e.next=3,m.a.get("/api/reporttransfer",t);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),je={setToken:function(e){Ae="bearer ".concat(e)},deleteReport:function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:Ae}},e.next=3,m.a.put("".concat("/api/reportslist","/").concat(t),{},a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getAllByDate:Te,getAllByDateByUser:we,getAllInProgress:Ce,getAllTransfers:Re,generateReportDownload:function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={headers:{Authorization:Ae,responseType:"blob"}},e.next=4,m.a.post("/api/reporttransfer",t,a);case 4:return r=e.sent,e.abrupt("return",r.data);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),downloadReport:function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={headers:{Authorization:Ae,responseType:"blob"}},e.next=4,m.a.get("/api/reporttransfer/".concat(t),a);case 4:r=e.sent,ke()(r.data,t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},Se=function(e){return function(){var t=Object(g.a)(v.a.mark((function t(a){var r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"SET_LOADING"}),a({type:"CLEAR_CURRENT_REPORT"}),t.next=5,je.getAllByDate(e);case 5:r=t.sent,a({type:"GET_ALL_REPORTS_BY_DATE",data:r,date:e}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log("reportListActions getAllReportsByDate error",t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},xe=function(e,t){return function(){var a=Object(g.a)(v.a.mark((function a(r){var n;return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,r({type:"SET_LOADING"}),r({type:"CLEAR_CURRENT_REPORT"}),a.next=5,je.getAllByDateByUser(e,t);case 5:n=a.sent,r({type:"GET_ALL_REPORTS_BY_DATE",data:n,date:e}),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),console.log("reportListActions getAllReportsByDateByUser error",a.t0);case 12:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e){return a.apply(this,arguments)}}()},Le=function(e){var t=e.report,a=Object(o.b)(),l=Object(o.c)((function(e){return e.login})),c=Object(r.useState)(!1),i=Object(ae.a)(c,2),s=i[0],m=i[1];return n.a.createElement(n.a.Fragment,null,n.a.createElement(z.a.Row,null,n.a.createElement(z.a.Cell,null,n.a.createElement(u.b,{to:"reports/".concat(t.id)},t.name)),n.a.createElement(z.a.Cell,null,ne()(t.program_date).format("DD.MM.YYYY")),n.a.createElement(z.a.Cell,null,t.program_no),n.a.createElement(z.a.Cell,null," ",n.a.createElement(ye.a,{color:"red",onClick:function(){return m(!0)},name:"delete"}),n.a.createElement(_e.a,{content:"Are you sure you wish to delete ".concat(t.name," ").concat(t.program_date),open:s,onCancel:function(){m(!1)},onConfirm:function(){var e;m(!1);var r={report_id:t.id,user_id:null===(e=l.currentUser)||void 0===e?void 0:e.id};a(function(e){return function(){var t=Object(g.a)(v.a.mark((function t(a){var r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"SET_LOADING"}),t.next=4,je.deleteReport(e.report_id);case 4:return t.next=6,je.getAllInProgress(e.user_id);case 6:r=t.sent,a({type:"GET_ALL_IN_PROGRESS",data:r}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}(r)),a(S("".concat(t.name," ").concat(t.program_date," poistettu!"),"success"))},cancelButton:"Nope",confirmButton:"Sure"}))))},De=function(e){var t=e.inProgress;return console.log(t),null===t?null:0===t.length?n.a.createElement(x.a.Column,null,n.a.createElement(p.a,null,n.a.createElement("h3",null,"Reports in progress"),"no reports in progress")):n.a.createElement(n.a.Fragment,null,n.a.createElement(x.a.Column,null,n.a.createElement(p.a,null,n.a.createElement(L.a,null,"Reports in progress"),n.a.createElement(z.a,{striped:!0},n.a.createElement(z.a.Header,null,n.a.createElement(z.a.Row,null,n.a.createElement(z.a.Cell,null,"Program name"),n.a.createElement(z.a.Cell,null,"Date"),n.a.createElement(z.a.Cell,null,"Number"),n.a.createElement(z.a.Cell,null))),n.a.createElement(z.a.Body,null,t.map((function(e){return n.a.createElement(Le,{key:e.id,report:e})})))))))},Ie=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.reportList})),a=Object(o.c)((function(e){return e.program})),l=Object(o.c)((function(e){return e.login}));return console.log(t),Object(r.useEffect)((function(){var t,a;e((a=null===(t=l.currentUser)||void 0===t?void 0:t.id,function(){var e=Object(g.a)(v.a.mark((function e(t){var r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"SET_LOADING"}),t({type:"CLEAR_CURRENT_REPORT"}),e.next=5,je.getAllInProgress(a);case 5:r=e.sent,t({type:"GET_ALL_IN_PROGRESS",data:r}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("reportListActions getAllInProgressReports error",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()))}),[]),null===a.activePrograms?n.a.createElement(p.a,null,n.a.createElement("h2",null,"Playlist reporting"),n.a.createElement(E.a,{active:!0},n.a.createElement(f.a,null,"Loading active programs..."))," "):n.a.createElement(p.a,null,n.a.createElement("h2",null,"Playlist reporting"),n.a.createElement(x.a,{divided:"vertically"},n.a.createElement(x.a.Row,{columns:2},n.a.createElement(he,null),n.a.createElement(De,{inProgress:t.inProgress}))))},Ne=a(577),Pe={login:function(){var e=Object(g.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.post("/api/login",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Ue=null,Ge={getAllActive:function(){var e=Object(g.a)(v.a.mark((function e(){var t,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:Ue}},e.next=3,m.a.get("".concat("/api/programs","/active"),t);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getAll:function(){var e=Object(g.a)(v.a.mark((function e(){var t,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:Ue}},e.next=3,m.a.get("".concat("/api/programs","/all"),t);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getOne:function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:Ue}},e.next=3,m.a.get("".concat("/api/programs","/getone/").concat(t),a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),createProgram:function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:Ue}},e.next=3,m.a.post("/api/programs",t,a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateProgram:function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:Ue}},e.next=3,m.a.put("".concat("/api/programs","/update"),t,a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),mergePrograms:function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:Ue}},e.next=3,m.a.put("".concat("/api/programs","/merge"),t,a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){Ue="bearer ".concat(e)}},Me=null,Fe=function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:Me}},e.next=3,m.a.post("".concat("/api/tracks","/addandreport"),t,a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Be=function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:Me}},e.next=3,m.a.post("".concat("/api/tracks","/addtodb"),t,a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ye=function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:Me}},e.next=3,m.a.post("".concat("/api/tracks","/addtracktoalbum"),t,a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ze=function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("track to update at service",t),a={headers:{Authorization:Me}},e.next=4,m.a.put("/api/tracks",t,a);case 4:return r=e.sent,e.abrupt("return",r.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ve=function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:Me}},e.next=3,m.a.put("/api/tracks/updatealbum",t,a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),He=function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:Me}},e.next=3,m.a.put("/api/tracks/updateartist",t,a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),qe={setToken:function(e){Me="bearer ".concat(e)},addNewTrack:Fe,addTrackToAlbum:Ye,updateTrack:ze,getOneTrack:function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:Me}},e.next=3,m.a.get("".concat("/api/tracks","/details/").concat(t),a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getOneTrackHistory:function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:Me}},e.next=3,m.a.get("".concat("/api/tracks","/history/").concat(t),a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateAlbumId:Ve,updateArtistId:He,addTrackToDb:Be},Ke=null,Je={getAll:function(){var e=Object(g.a)(v.a.mark((function e(){var t,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:Ke}},e.next=3,m.a.get("/api/users",t);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),setToken:function(e){Ke="bearer ".concat(e)},createUser:function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:Ke}},e.next=3,m.a.post("/api/users",t,a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateUser:function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:Ke}},e.next=3,m.a.put("".concat("/api/users","/").concat(t.id),t,a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),deleteUser:function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:Ke}},e.next=3,m.a.delete("".concat("/api/users","/").concat(t),a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},We=function(){return function(){var e=Object(g.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.localStorage.removeItem("loggedUser"),t({type:"LOGOUT"});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Qe=function(){var e=Object(o.b)(),t=Object(r.useState)(""),a=Object(ae.a)(t,2),l=a[0],c=a[1],u=Object(r.useState)(""),i=Object(ae.a)(u,2),s=i[0],m=i[1];return n.a.createElement("div",null,n.a.createElement("h1",null,"RADIO TRACKLIST REPORTING"),n.a.createElement("h3",null,"Log in"),n.a.createElement(N.a,{onSubmit:function(t){t.preventDefault(),e(function(e){return function(){var t=Object(g.a)(v.a.mark((function t(a){var r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"SET_LOADING"}),t.next=4,Pe.login(e);case 4:r=t.sent,window.localStorage.setItem("loggedUser",JSON.stringify(r)),a({type:"LOGIN",data:r,loading:!1}),t.next=15;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0),a({type:"SET_NOTIFICATION",data:{message:"wrong username or password",type:"fail"}}),setTimeout((function(){a({type:"CLEAR_NOTIFICATION"})}),3e3);case 15:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}({username:l,password:s}))}},n.a.createElement(N.a.Field,{id:"login-username",label:"username",control:Ne.a,type:"text",placeholder:"Username...",onChange:function(e){return c(e.target.value.trim())}}),n.a.createElement(N.a.Field,{id:"login-password",label:"password",control:Ne.a,type:"password",placeholder:"Password...",onChange:function(e){return m(e.target.value.trim())}}),n.a.createElement(D.a,{id:"login-button",color:"green",type:"submit"},"Log in")))},Xe=a(586),Ze=a(310),$e=a(583),et=a(95),tt=a.n(et),at=a(157),rt=function(e){var t=e.onSubmit,a=e.onCancel,r=e.user;return n.a.createElement(I.d,{initialValues:{password:"",confirm_password:"",first_name:r.first_name,last_name:r.last_name,email:r.email},onSubmit:t,validate:function(e){var t={};return e.password!==e.confirm_password&&(t.password="Passwords do not match",t.confirm_password="Passwords do not match"),e.email||(t.email="Field is required"),e.first_name||(t.first_name="Field is required"),e.last_name||(t.last_name="Field is required"),t}},(function(e){var t=e.isValid;return n.a.createElement(I.c,{className:"form ui"},n.a.createElement(I.b,{label:"Password - fill out field only if you wish to change the password",placeholder:"Password",name:"password",type:"password",component:M}),n.a.createElement(I.b,{label:"Confirm password",placeholder:"Confirm password",name:"confirm_password",type:"password",component:M}),n.a.createElement(I.b,{label:"First name",placeholder:"First name",name:"first_name",component:U,required:!0}),n.a.createElement(I.b,{label:"Last name",placeholder:"Last name",name:"last_name",component:U}),n.a.createElement(I.b,{label:"Email",placeholder:"Email",name:"email",component:U}),n.a.createElement(x.a,null,n.a.createElement(x.a.Column,{floated:"left",width:5},n.a.createElement(D.a,{type:"button",onClick:a,color:"red"},"Cancel")),n.a.createElement(x.a.Column,{floated:"right",width:5},n.a.createElement(D.a,{type:"submit",floated:"right",color:"green",disabled:!t},"Update"))))}))};!function(e){e[e.DJ=1]="DJ",e[e.Staff=2]="Staff",e[e.Admin=3]="Admin"}(pe||(pe={}));var nt=function(e){return function(){var t=Object(g.a)(v.a.mark((function t(a){var r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"SET_LOADING"}),t.next=4,Je.updateUser(e);case 4:return t.next=6,Je.getAll();case 6:r=t.sent,a({type:"UPDATE_USER",data:r}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()},lt=function(e){var t=e.currentUser,a=Object(o.b)(),l=Object(r.useState)(!1),c=Object(ae.a)(l,2),u=c[0],i=c[1],s=function(){i(!1)};return n.a.createElement(at.a,{trigger:n.a.createElement("span",{role:"menuitem",tabIndex:-8,onClick:function(){i(!0)}},"Edit user info"),closeIcon:!0,open:u,onClose:s},n.a.createElement(L.a,{content:"Edit current user info"}),n.a.createElement(at.a.Content,null,n.a.createElement(rt,{user:t,onCancel:s,onSubmit:function(e){try{var r=Object(d.a)({},e,{id:t.id,status:t.status,level:t.level}),n=Object(d.a)({},e,{token:t.token,username:t.username,id:t.id,level:t.level,status:t.status});a(nt(r)),a((l=n,function(){var e=Object(g.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"UPDATE_CURRENT_USER",data:l});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),a(S("".concat(r.first_name," ").concat(r.last_name," updated!"),"success")),console.log("updating user",r),s()}catch(c){console.error(c.response.data)}var l}})))},ct=function(e){var t=e.currentUser,a=Object(o.b)(),r=n.a.createElement("span",null,n.a.createElement(ye.a,{color:"pink",name:"user",size:"large"})," ",t.first_name," ",t.last_name),l=[{key:"user",text:n.a.createElement(lt,{currentUser:t}),icon:"user",onClick:function(){return n.a.createElement(lt,{currentUser:t})}},{key:"sign-out",text:"Log out",icon:"sign out",onClick:function(){a(We())}}];return n.a.createElement("div",{style:{marginBottom:"1.5rem"}},n.a.createElement(Xe.a,{pointing:!0,stackable:!0,inverted:!0},n.a.createElement(Xe.a.Item,{link:!0},n.a.createElement(u.b,{to:"/"},n.a.createElement(Ze.a,{alt:"logo",src:tt.a,size:"mini"}))),n.a.createElement(Xe.a.Item,{link:!0},n.a.createElement(u.b,{to:"/reports"},n.a.createElement("h4",null,"REPORTS"))),n.a.createElement(Xe.a.Item,{link:!0},n.a.createElement(u.b,{to:"/top100"},n.a.createElement("h4",null,"TOP 100"))),n.a.createElement(Xe.a.Item,{link:!0},n.a.createElement(u.b,{to:"/search"},n.a.createElement("h4",null,"SEARCH"))),n.a.createElement(Xe.a.Item,{link:!0},n.a.createElement(u.b,{to:"/transfer"},n.a.createElement("h4",null,"TRANSFER FILES"))),n.a.createElement(Xe.a.Item,{link:!0},n.a.createElement(u.b,{to:"/programs"},n.a.createElement("h4",null,"PROGRAMS"))),n.a.createElement(Xe.a.Item,{link:!0},n.a.createElement(u.b,{to:"/users"},n.a.createElement("h4",null,"USERS"))),n.a.createElement(Xe.a.Item,{position:"right"},n.a.createElement($e.a,{trigger:r,options:l,pointing:"top left",icon:null})),n.a.createElement(Xe.a.Item,null)))},ot=function(e){var t=e.currentUser,a=Object(o.b)(),r=n.a.createElement("span",null,n.a.createElement(ye.a,{color:"pink",name:"user",size:"large"})," ",t.first_name," ",t.last_name),l=[{key:"user",text:n.a.createElement(lt,{currentUser:t}),icon:"user",onClick:function(){return n.a.createElement(lt,{currentUser:t})}},{key:"sign-out",text:"Log out",icon:"sign out",onClick:function(){a(We())}}];return n.a.createElement("div",{style:{marginBottom:"1.5rem"}},n.a.createElement(Xe.a,{pointing:!0,stackable:!0,inverted:!0},n.a.createElement(Xe.a.Item,{link:!0},n.a.createElement(u.b,{to:"/"},n.a.createElement(Ze.a,{alt:"logo",src:tt.a,size:"mini"}))),n.a.createElement(Xe.a.Item,{link:!0},n.a.createElement(u.b,{to:"/reports"},n.a.createElement("h4",null,"REPORTS"))),n.a.createElement(Xe.a.Item,{link:!0},n.a.createElement(u.b,{to:"/top100"},n.a.createElement("h4",null,"TOP 100"))),n.a.createElement(Xe.a.Item,{link:!0},n.a.createElement(u.b,{to:"/search"},n.a.createElement("h4",null,"SEARCH"))),n.a.createElement(Xe.a.Item,{link:!0},n.a.createElement(u.b,{to:"/transfer"},n.a.createElement("h4",null,"TRANSFER FILES"))),n.a.createElement(Xe.a.Item,{link:!0},n.a.createElement(u.b,{to:"/programs"},n.a.createElement("h4",null,"PROGRAMS"))),n.a.createElement(Xe.a.Item,{position:"right"},n.a.createElement($e.a,{trigger:r,options:l,pointing:"top left",icon:null})),n.a.createElement(Xe.a.Item,null)))},ut=function(e){var t=e.currentUser,a=Object(o.b)(),r=n.a.createElement("span",null,n.a.createElement(ye.a,{color:"pink",name:"user",size:"large"})," ",t.first_name," ",t.last_name),l=[{key:"user",text:n.a.createElement(lt,{currentUser:t}),icon:"user",onClick:function(){return n.a.createElement(lt,{currentUser:t})}},{key:"sign-out",text:"Log out",icon:"sign out",onClick:function(){a(We())}}];return n.a.createElement("div",{style:{marginBottom:"1.5rem"}},n.a.createElement(Xe.a,{pointing:!0,stackable:!0,inverted:!0},n.a.createElement(Xe.a.Item,{link:!0},n.a.createElement(u.b,{to:"/"},n.a.createElement(Ze.a,{alt:"logo",src:tt.a,size:"mini"}))),n.a.createElement(Xe.a.Item,{link:!0},n.a.createElement(u.b,{to:"/reports"},n.a.createElement("h4",null,"REPORTS"))),n.a.createElement(Xe.a.Item,{link:!0},n.a.createElement(u.b,{to:"/top100"},n.a.createElement("h4",null,"TOP 100"))),n.a.createElement(Xe.a.Item,{link:!0},n.a.createElement(u.b,{to:"/search"},n.a.createElement("h4",null,"SEARCH"))),n.a.createElement(Xe.a.Item,{position:"right"},n.a.createElement($e.a,{trigger:r,options:l,pointing:"top left",icon:null})),n.a.createElement(Xe.a.Item,null)))},it=function(){var e,t=Object(o.c)((function(e){return e.login}));switch(null===(e=t.currentUser)||void 0===e?void 0:e.level){case 1:return n.a.createElement(ut,{currentUser:t.currentUser});case 2:return n.a.createElement(ot,{currentUser:t.currentUser});case 3:return n.a.createElement(ct,{currentUser:t.currentUser});default:return null}},st=a(585),mt=function(e){var t=e.notification;return"success"===t.type?n.a.createElement("div",{className:"fixedTop"},n.a.createElement(st.a,{floating:!0,success:!0,header:t.message})):"fail"===t.type?n.a.createElement("div",{className:"fixedTop"},n.a.createElement(st.a,{floating:!0,negative:!0,header:t.message})):null},pt=function(){return function(){var e=Object(g.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"SET_LOADING"}),e.next=4,Ge.getAll();case 4:a=e.sent,t({type:"GET_ALL_PROGRAMS",data:a}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("error getting all programs programActions.getAllPrograms",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},dt=a(590),Et=[{value:1,label:"Visible"},{value:0,label:"Invisible"}],ft=[{value:1,label:"Visible"},{value:0,label:"Invisible"}],bt=function(e){var t,a=e.onSubmit,r=e.onCancel,l=e.login,c=e.program;return n.a.createElement(I.d,{initialValues:{id:c.id,name:c.name,identifier:c.identifier,display:c.display||1,site:c.site||1,user_id:null===(t=l.currentUser)||void 0===t?void 0:t.id},onSubmit:a,validate:function(e){var t={};return e.name||(t.name="Field is required"),console.log(e.display),console.log(e.site),t}},(function(e){var t=e.isValid;return n.a.createElement(I.c,{className:"form ui"},n.a.createElement(I.b,{label:"Name",placeholder:"Name",name:"name",component:U}),n.a.createElement(I.b,{label:"Identifier",placeholder:"Identifier",name:"identifier",type:"password",component:U}),n.a.createElement(P,{label:"Display",name:"display",options:Et}),n.a.createElement(P,{label:"Display on site",name:"site",options:ft}),n.a.createElement(x.a,null,n.a.createElement(x.a.Column,{floated:"left",width:5},n.a.createElement(D.a,{type:"button",onClick:r,color:"red"},"Cancel")),n.a.createElement(x.a.Column,{floated:"right",width:5},n.a.createElement(D.a,{type:"submit",floated:"right",color:"green",disabled:!t},"Save changes"))))}))},vt=function(e){var t=e.modalOpen,a=e.onClose,r=e.onSubmit,l=e.error,c=e.program,o=e.login;return n.a.createElement(at.a,{open:t,onClose:a,centered:!1,closeIcon:!0},n.a.createElement(at.a.Header,null,"Edit info of program ",c.name),n.a.createElement(at.a.Content,null,l&&n.a.createElement(dt.a,{inverted:!0,color:"red"},"Error: ".concat(l)),n.a.createElement(bt,{program:c,login:o,onSubmit:r,onCancel:a})))},gt=function(e){var t=e.onSubmit,a=e.onCancel,r=e.selectOptions;return n.a.createElement(I.d,{initialValues:{programToMerge:r[0].value},onSubmit:t},(function(e){var t=e.dirty;return n.a.createElement(I.c,{className:"form ui"},n.a.createElement("span",{style:{color:"red"}},n.a.createElement(P,{label:"",name:"programToMerge",options:r})),n.a.createElement(x.a,null,n.a.createElement(x.a.Column,{style:{marginTop:"1rem"},floated:"left",width:5},n.a.createElement(D.a,{type:"button",onClick:a,color:"red"},"Cancel")),n.a.createElement(x.a.Column,{floated:"right",width:5},n.a.createElement(D.a,{type:"submit",floated:"right",color:"green",disabled:!t},"Merge"))))}))},ht=function(e){var t=e.program_id,a=e.program_name,l=Object(o.b)(),c=Object(o.c)((function(e){return e.program})),u=Object(r.useState)(!1),i=Object(ae.a)(u,2),s=i[0],m=i[1],p=function(){m(!0)},d=function(){m(!1)};if(!s)return n.a.createElement("button",{type:"button",className:"link-btn",onClick:p},t);var E=c.allPrograms.map((function(e){return{key:e.id,label:"".concat(e.id," - ").concat(e.name),value:e.id}}));return n.a.createElement(at.a,{open:s,closeIcon:!0,onClose:d,trigger:n.a.createElement("button",{type:"button",className:"link-btn",onClick:p},t)},n.a.createElement(L.a,null,"Merge ",t," - ",a," with:"),n.a.createElement(at.a.Content,null,n.a.createElement(gt,{onSubmit:function(e){console.log(Number(e.programToMerge));var a={type:"program",merge:Number(e.programToMerge),mergeTo:t};console.log(a),l(function(e){return function(){var t=Object(g.a)(v.a.mark((function t(a){var r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"SET_LOADING"}),t.next=4,Ge.mergePrograms(e);case 4:return t.next=6,Ge.getAll();case 6:r=t.sent,a({type:"GET_ALL_PROGRAMS",data:r}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log("error merging two programs programActions.mergePrograms",t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}(a)),l(S("Ohjelma #".concat(a.merge," yhdistetty!"),"success")),d()},onCancel:d,selectOptions:E})))},yt=function(e){var t,a=e.program,l=Object(o.c)((function(e){return e.login})),c=Object(o.b)(),u=Object(r.useState)(!1),i=Object(ae.a)(u,2),s=i[0],m=i[1],p=Object(r.useState)(),d=Object(ae.a)(p,2),E=d[0],f=d[1];1===a.display&&(t="active-program");var b=function(){m(!1),f(void 0)};return n.a.createElement(z.a.Row,{className:t},n.a.createElement(z.a.Cell,null,n.a.createElement(ht,{program_id:a.id,program_name:a.name})),n.a.createElement(z.a.Cell,null,n.a.createElement(vt,{program:a,login:l,modalOpen:s,onSubmit:function(e){try{console.log(e),c((t=e,function(){var e=Object(g.a)(v.a.mark((function e(a){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:"SET_LOADING"}),e.next=4,Ge.updateProgram(t);case 4:a({type:"UPDATE_PROGRAM",data:t}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("error updating program",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}())),c(S("".concat(e.name," updated!"),"success")),b()}catch(a){console.error(a.response.data),f(a.response.data.error)}var t},error:E,onClose:b}),n.a.createElement("button",{style:{border:"none",cursor:"pointer",color:"blue"},onClick:function(){return m(!0)}},a.name)),n.a.createElement(z.a.Cell,null,a.identifier))},_t=function(e){var t,a,r=e.login,l=e.program;return null===l.allPrograms||!0===l.loading?n.a.createElement(p.a,null,n.a.createElement(E.a,{active:!0,inverted:!0},n.a.createElement(f.a,{size:"medium"},"Loading programs..."))):2===(null===(t=r.currentUser)||void 0===t?void 0:t.level)||3===(null===(a=r.currentUser)||void 0===a?void 0:a.level)?n.a.createElement(p.a,null,n.a.createElement("div",{style:{marginTop:"1rem",marginBottom:"1rem"}},n.a.createElement("h3",{style:{display:"inline"}},"Programs")),n.a.createElement(z.a,{striped:!0},n.a.createElement(z.a.Header,null,n.a.createElement(z.a.Row,null,n.a.createElement(z.a.Cell,null,"ID"),n.a.createElement(z.a.Cell,null,"Program name"),n.a.createElement(z.a.Cell,null,"Additional info"))),n.a.createElement(z.a.Body,null,l.allPrograms.map((function(e){return n.a.createElement(yt,{program:e,key:e.id})}))))):null},Ot=[{value:1,label:"Visible"},{value:0,label:"Invisible"}],kt=[{value:1,label:"Visible"},{value:0,label:"Invisible"}],At=function(e){var t,a=e.onSubmit,r=e.onCancel,l=e.login;return n.a.createElement(I.d,{initialValues:{name:"",identifier:"",display:1,site:1,user_id:null===(t=l.currentUser)||void 0===t?void 0:t.id},onSubmit:a,validate:function(e){var t={};return e.name||(t.name="Field is required"),console.log(e.display),console.log(e.site),t}},(function(e){var t=e.isValid,a=e.dirty;return n.a.createElement(I.c,{className:"form ui"},n.a.createElement(I.b,{label:"Name",placeholder:"Name",name:"name",component:G}),n.a.createElement(I.b,{label:"Identifier",placeholder:"Identifier",name:"identifier",type:"password",component:U}),n.a.createElement(P,{label:"Display",name:"display",options:Ot}),n.a.createElement(P,{label:"Display on site",name:"site",options:kt}),n.a.createElement(x.a,null,n.a.createElement(x.a.Column,{floated:"left",width:5},n.a.createElement(D.a,{type:"button",onClick:r,color:"red"},"Cancel")),n.a.createElement(x.a.Column,{floated:"right",width:5},n.a.createElement(D.a,{type:"submit",floated:"right",color:"green",disabled:!a||!t},"Add"))))}))},Tt=function(e){var t=e.modalOpen,a=e.onClose,r=e.onSubmit,l=e.error,c=e.login;return n.a.createElement(at.a,{open:t,onClose:a,centered:!1,closeIcon:!0},n.a.createElement(at.a.Header,null,"Add a new program"),n.a.createElement(at.a.Content,null,l&&n.a.createElement(dt.a,{inverted:!0,color:"red"},"Error: ".concat(l)),n.a.createElement(At,{onSubmit:r,onCancel:a,login:c})))},wt=function(){var e=Object(o.c)((function(e){return e.program})),t=Object(o.c)((function(e){return e.login})),a=Object(o.b)();Object(r.useEffect)((function(){a(pt())}),[]);var l=n.a.useState(!1),c=Object(ae.a)(l,2),u=c[0],i=c[1],s=n.a.useState(),m=Object(ae.a)(s,2),E=m[0],f=m[1],b=function(){i(!1),f(void 0)};return n.a.createElement(p.a,null,n.a.createElement(D.a,{floated:"right",color:"green",style:{marginBottom:"0.5rem"},onClick:function(){return i(!0)}},n.a.createElement(ye.a,{name:"add"}),"Create a new program"),n.a.createElement(Tt,{modalOpen:u,onSubmit:function(e){try{var t=Object(d.a)({},e,{display:Number(e.display),site:Number(e.site)});console.log(t),a(function(e){return function(){var t=Object(g.a)(v.a.mark((function t(a){var r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"SET_LOADING"}),t.next=4,Ge.createProgram(e);case 4:r=t.sent,a({type:"CREATE_NEW_PROGRAM",data:r}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("error creating new program",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}(t)),console.log("adding program",t),b()}catch(r){console.error(r.response.data),f(r.response.data.error)}},error:E,onClose:b,login:t}),n.a.createElement(_t,{program:e,login:t}))},Ct=a(592),Rt=function(e){var t=e.onSubmit;return console.log(Ee),n.a.createElement(I.d,{initialValues:{reportYear:"2020",reportMonth:"01"},onSubmit:t},(function(){return n.a.createElement(I.c,{className:"form ui"},n.a.createElement(x.a,null,n.a.createElement(x.a.Column,{width:4},n.a.createElement(P,{label:"Select month",name:"reportMonth",options:ue})),n.a.createElement(x.a.Column,{width:4},n.a.createElement(P,{label:"Select month",name:"reportYear",options:Ee})),n.a.createElement(x.a.Column,{width:4},n.a.createElement(D.a,{type:"submit",floated:"right",color:"green"},"Get reports"))))}))},jt=function(e){var t,a,l=e.loginLevel,c=e.report,i=Object(o.b)(),s=Object(r.useState)(!1),m=Object(ae.a)(s,2),p=m[0],d=m[1];if(1===c.status)t="Ready";else if(0===c.status)t="In progress";else if(9===c.status)return t="Deleted",null;return 1===c.rerun&&(a="rerun"),1===l&&1===c.rerun?null:n.a.createElement(n.a.Fragment,null,n.a.createElement(z.a.Row,{className:a},n.a.createElement(Ct.a,{as:z.a.Cell,minWidth:768},c.program_no),n.a.createElement(z.a.Cell,null,n.a.createElement(u.b,{className:a,to:"reports/".concat(c.id)},c.name)),n.a.createElement(z.a.Cell,null,ne()(c.program_date).format("DD.MM.YYYY")),n.a.createElement(z.a.Cell,null,c.program_start_time.slice(0,-3)," -"," ",c.program_end_time.slice(0,-3)),n.a.createElement(z.a.Cell,null,t),n.a.createElement(z.a.Cell,null,n.a.createElement(ye.a,{style:{color:"red"},name:"delete",onClick:function(){return d(!0)}}),n.a.createElement(_e.a,{content:"Haluatko varmasti poistaa raportin ".concat(c.name," ").concat(c.program_date),open:p,onCancel:function(){d(!1)},onConfirm:function(){var e;d(!1),i((e=c.id,function(){var t=Object(g.a)(v.a.mark((function t(a){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"SET_LOADING"}),t.next=4,je.deleteReport(e);case 4:a({type:"DELETE_REPORT",data:e}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}())),i(S("".concat(c.name," ").concat(c.program_date," poistettu!"),"success"))}}))))},St=function(){var e=Object(o.c)((function(e){return e.login})),t=Object(o.c)((function(e){return e.reportList}));console.log(t);var a=Object(o.b)();Object(r.useEffect)((function(){var r;1===(null===(r=e.currentUser)||void 0===r?void 0:r.level)?null===t.reportListDate?a(xe(ne()().format("YYYY-MM"),e.currentUser.id)):a(xe(t.reportListDate,e.currentUser.id)):null===t.reportListDate?a(Se(ne()().format("YYYY-MM"))):a(Se(t.reportListDate))}),[]);var l,c=function(t){var r;console.log(t);var n="".concat(t.reportYear,"-").concat(t.reportMonth);1===(null===(r=e.currentUser)||void 0===r?void 0:r.level)?a(xe(n,e.currentUser.id)):a(Se(n))};if(null===t.reportList||t.loading)return n.a.createElement(E.a,{active:!0},n.a.createElement(f.a,{content:"Ladataan..."}));if(0===t.reportList.length)return n.a.createElement(p.a,null,n.a.createElement("h2",null,"No reports in the selected time period"),n.a.createElement(Rt,{onSubmit:c}));l=null===t.reportListDate?ne()().format("MMMM YYYY"):ne()(t.reportListDate).format("MMMM YYYY");var u=t.reportList;return u=0===Number(t.filterByText)?u:u=u.filter((function(e){return e.name.toLowerCase().includes(t.filterByText.toLowerCase())})),u=null===t.filterUserValue?u:u=u.filter((function(e){return e.user_id===t.filterUserValue})),u=null===t.filterStatusValue?u:u=u.filter((function(e){return e.status===t.filterStatusValue})),n.a.createElement(p.a,null,n.a.createElement("h3",null,"Reports ",l),n.a.createElement(Rt,{onSubmit:c}),n.a.createElement(z.a,{striped:!0},n.a.createElement(z.a.Header,null,n.a.createElement(z.a.Row,null,n.a.createElement(Ct.a,{as:z.a.Cell,minWidth:768},"Program number"),n.a.createElement(z.a.Cell,null,"Program name"),n.a.createElement(z.a.Cell,null,"Date"),n.a.createElement(z.a.Cell,null,"Time"),n.a.createElement(z.a.Cell,null,"Status"),n.a.createElement(z.a.Cell,null))),n.a.createElement(z.a.Body,null,u.map((function(t){var a;return n.a.createElement(jt,{key:t.id,report:t,loginLevel:null===(a=e.currentUser)||void 0===a?void 0:a.level})})))))},xt=function(e){var t,a,r=e.track;return t=(t=Math.floor(r.length/60)).toString(),1===(a=r.length-60*t).toString().length&&(a="0".concat(a.toString())),a=a.toString(),n.a.createElement(z.a.Row,null,n.a.createElement(z.a.Cell,null,n.a.createElement(ye.a,{style:{marginLeft:"1.5rem",cursor:"pointer"},name:"arrows alternate"})),n.a.createElement(z.a.Cell,null,r.sortable_rank),n.a.createElement(z.a.Cell,null,r.artist_name),n.a.createElement(z.a.Cell,null,r.track_title),n.a.createElement(z.a.Cell,null,t,":",a),n.a.createElement(z.a.Cell,null,n.a.createElement(ye.a,{style:{cursor:"pointer"},color:"red",name:"delete"})),n.a.createElement(z.a.Cell,null))},Lt=function(e){var t=e.report;return n.a.createElement(z.a,{striped:!0},n.a.createElement(z.a.Header,null,n.a.createElement(z.a.Row,null,n.a.createElement(z.a.Cell,null),n.a.createElement(z.a.Cell,null,"#"),n.a.createElement(z.a.Cell,null,"Artist"),n.a.createElement(z.a.Cell,null,"Track Title"),n.a.createElement(z.a.Cell,null,"Length"),n.a.createElement(z.a.Cell,null),n.a.createElement(z.a.Cell,null))),n.a.createElement(z.a.Body,null,t.map((function(e){return n.a.createElement(xt,{key:e.report_track_id,track:e})}))),n.a.createElement(z.a.Footer,null,n.a.createElement(z.a.Row,null)))},Dt=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(L.a,null,"Add a track to the report:"),n.a.createElement(dt.a.Group,{horizontal:!0},n.a.createElement(dt.a,null,"get quick search tracks"),n.a.createElement(dt.a,null,"get djonline tracks")))},It=function(){return n.a.createElement("div",null,"report details")},Nt=function(e){var t,a,l=e.id,c=Object(o.b)();Object(r.useEffect)((function(){c(function(e){return function(){var t=Object(g.a)(v.a.mark((function t(a){var r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"SET_LOADING"}),t.next=4,ge.getOne(e);case 4:r=t.sent,a({type:"GET_ONE_REPORT",data:r,id:e}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("reportActions getOneReport error:",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}(l)),c(function(e){return function(){var t=Object(g.a)(v.a.mark((function t(a){var r,n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"SET_LOADING"}),t.next=4,ge.getReportDetails(e);case 4:r=t.sent,n=r[0],a({type:"GET_REPORT_DETAILS",data:n,id:e}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log("reportActions getReportDetails error",t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}(l))}),[]),console.log(l);var u=Object(o.c)((function(e){return e.report})),i=Object(o.c)((function(e){return e.login}));return console.log(u),1===(null===(t=i.currentUser)||void 0===t?void 0:t.level)&&i.currentUser.id!==(null===(a=u.reportDetails)||void 0===a?void 0:a.user_id)?null:0===u.report.length?n.a.createElement(p.a,null,n.a.createElement(L.a,null,"Report"),n.a.createElement("div",null,"No tracks added. Please add tracks from below"),n.a.createElement(Dt,null),n.a.createElement(It,null)):n.a.createElement(p.a,null,n.a.createElement(L.a,null,"Report"),n.a.createElement(Lt,{report:u.report}),n.a.createElement(Dt,null),n.a.createElement(It,null))},Pt=function(){var e=Object(o.b)(),t=[{key:1,label:"Tracks",value:"tr"},{key:2,label:"Artists",value:"ar"},{key:3,label:"Albums",value:"al"}];return n.a.createElement(x.a,{columns:2},n.a.createElement(x.a.Column,null,n.a.createElement(I.d,{initialValues:{query:"",kind:"ar"},onSubmit:function(t){var a;e((a=t,function(){var e=Object(g.a)(v.a.mark((function e(t){var r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"SET_SEARCH_LOADING"}),e.next=4,j.advancedSearch(a);case 4:r=e.sent,t({type:"ADVANCED_RESULTS",data:r}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("searchActions error getting advanced results",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()))}},(function(){return n.a.createElement(I.c,{className:"form ui"},n.a.createElement(x.a,null,n.a.createElement(x.a.Column,{width:8},n.a.createElement(I.b,{label:"Search query",placeholder:"Artist, album, track...",name:"query",component:U})),n.a.createElement(x.a.Column,{width:8},n.a.createElement(P,{label:"Search for",name:"kind",options:t})),n.a.createElement(x.a.Column,{width:8},n.a.createElement(D.a,{type:"submit"},"Search"))))}))),n.a.createElement(x.a.Column,null,n.a.createElement("span",{style:{float:"right"}},n.a.createElement(D.a,null,"Add a track"))))},Ut=function(e){var t=e.result;return null===t?null:n.a.createElement(z.a.Row,null,n.a.createElement(z.a.Cell,null,n.a.createElement(u.b,{to:"../artist/".concat(t.artist_id)},t.artist_name)),n.a.createElement(z.a.Cell,null,n.a.createElement(u.b,{to:"../album/".concat(t.album_id)},t.album_name)),n.a.createElement(z.a.Cell,null,n.a.createElement(u.b,{to:"../track/".concat(t.track_id)},t.track_title)),n.a.createElement(z.a.Cell,null,n.a.createElement(u.b,{to:"../reports/".concat(t.report_id)},t.program_date)),n.a.createElement(z.a.Cell,null))},Gt=function(){var e=Object(o.b)(),t=Object(r.useState)(1),a=Object(ae.a)(t,2),l=a[0],c=a[1];Object(r.useEffect)((function(){e(function(e){return function(){var t=Object(g.a)(v.a.mark((function t(a){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{a({type:"SORT_ADVANCED_RESULTS",data:e})}catch(r){console.log("searchActions error sorting advanced results",r)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(l))}),[l]);var u=[{key:1,label:"Track title",value:1},{key:2,label:"Artist name",value:2}];return n.a.createElement(x.a,{columns:4},n.a.createElement(x.a.Column,null,n.a.createElement(I.d,{initialValues:{sortBy:1},onSubmit:function(e){c(e.sortBy)},validate:function(e){c(Number(e.sortBy))}},(function(){return n.a.createElement(I.c,{className:"form ui"},n.a.createElement(P,{label:"Sort by",name:"sortBy",options:u}))}))))},Mt=function(e){var t=e.search;if(0===t.advancedResults.length)return n.a.createElement("div",null,"no results. please enter a query");if(!0===t.loading)return n.a.createElement(E.a,{active:!0},n.a.createElement(f.a,null,"Loading results..."));var a=t.advancedResults;return a=2===t.sortAdvancedResults?a:a.sort((function(e,t){return e.track_title>t.track_title?1:t.track_title>e.track_title?-1:0})),a=1===t.sortAdvancedResults?a:a.sort((function(e,t){return e.artist_name>t.artist_name?1:t.artist_name>e.artist_name?-1:0})),n.a.createElement("div",{style:{marginTop:"2rem"}},n.a.createElement(Gt,null),n.a.createElement(z.a,{striped:!0},n.a.createElement(z.a.Header,null,n.a.createElement(z.a.Row,null,n.a.createElement(z.a.Cell,null,"Artist"),n.a.createElement(z.a.Cell,null,"Album"),n.a.createElement(z.a.Cell,null,"Track"),n.a.createElement(z.a.Cell,null,"Latest play on"),n.a.createElement(z.a.Cell,null))),n.a.createElement(z.a.Body,null,a.map((function(e){return n.a.createElement(Ut,{key:e.track_id,result:e})})))))},Ft=function(){var e=Object(o.c)((function(e){return e.search}));return n.a.createElement(p.a,null,n.a.createElement(L.a,null,"Search"),n.a.createElement(Pt,null),n.a.createElement(Mt,{search:e}))},Bt=[{key:1,value:"artist_id",label:"Artists"},{key:2,value:"track_id",label:"Tracks"},{key:3,value:"album_id",label:"Albums"}],Yt=function(e){var t=e.onSubmit;return n.a.createElement(I.d,{initialValues:{list:"artist_id",start_date:ne()(Date.now()-6048e5).format("YYYY-MM-DD"),end_date:ne()(new Date).format("YYYY-MM-DD")},onSubmit:t},(function(){return n.a.createElement(I.c,{className:"form ui"},n.a.createElement(x.a,null,n.a.createElement(x.a.Column,{width:2},n.a.createElement(le.b,{name:"list",label:"Get Top 100",options:Bt}))),n.a.createElement("label",null,"starting"),n.a.createElement(le.a,{name:"start_date",dateFormat:"dd.MM.yyyy",placeholder:"dd.mm.yyyy"})," ",n.a.createElement("label",null,"ending"),n.a.createElement(le.a,{name:"end_date",dateFormat:"dd.MM.yyyy",placeholder:"dd.mm.yyyy"})," ",n.a.createElement(D.a,{type:"submit",color:"green"},"Submit"))}))},zt=function(e){var t=e.top100;return n.a.createElement(z.a,{striped:!0},n.a.createElement(z.a.Header,null,n.a.createElement(z.a.Row,null,n.a.createElement(z.a.Cell,null,"Artist"),n.a.createElement(z.a.Cell,null,"Play count"))),n.a.createElement(z.a.Body,null,t.map((function(e){return n.a.createElement(z.a.Row,{key:e.track_id},n.a.createElement(z.a.Cell,null,n.a.createElement(u.b,{to:"/artist/".concat(e.artist_id)},e.artist)),n.a.createElement(z.a.Cell,null,e.count))}))))},Vt=function(e){var t=e.top100;return n.a.createElement(z.a,{striped:!0},n.a.createElement(z.a.Header,null,n.a.createElement(z.a.Row,null,n.a.createElement(z.a.Cell,null,"Artist"),n.a.createElement(z.a.Cell,null,"Album"),n.a.createElement(z.a.Cell,null,"Play count"))),n.a.createElement(z.a.Body,null,t.map((function(e){return n.a.createElement(z.a.Row,{key:e.track_id},n.a.createElement(z.a.Cell,null,n.a.createElement(u.b,{to:"/artist/".concat(e.artist_id)},e.artist)),n.a.createElement(z.a.Cell,null,n.a.createElement(u.b,{to:"/album/".concat(e.album_id)},e.album)),n.a.createElement(z.a.Cell,null,e.count))}))))},Ht=function(e){var t=e.top100;return n.a.createElement(z.a,{striped:!0},n.a.createElement(z.a.Header,null,n.a.createElement(z.a.Row,null,n.a.createElement(z.a.Cell,null,"Artist"),n.a.createElement(z.a.Cell,null,"Album"),n.a.createElement(z.a.Cell,null,"Track"),n.a.createElement(z.a.Cell,null,"Play count"),n.a.createElement(z.a.Cell,null))),n.a.createElement(z.a.Body,null,t.map((function(e){return n.a.createElement(z.a.Row,{key:e.track_id},n.a.createElement(z.a.Cell,null,n.a.createElement(u.b,{to:"/artist/".concat(e.artist_id)},e.artist)),n.a.createElement(z.a.Cell,null,n.a.createElement(u.b,{to:"/album/".concat(e.album_id)},e.album)),n.a.createElement(z.a.Cell,null,n.a.createElement(u.b,{to:"/track/".concat(e.track_id)},e.track_title)),n.a.createElement(z.a.Cell,null,e.count),n.a.createElement(z.a.Cell,null))}))))},qt=function(){var e=Object(o.c)((function(e){return e.search})),t=Object(o.b)(),a=function(e){console.log(e);var a,r=Object(d.a)({},e,{end_date:ne()(new Date).format("YYYY-MM-DD")});console.log(r),t((a=r,function(){var e=Object(g.a)(v.a.mark((function e(t){var r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"SET_SEARCH_LOADING"}),e.next=4,j.getTop100(a);case 4:r=e.sent,t({type:"TOP_100",data:r,query:a}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("searchActions error getting top100 results",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()))};return console.log(e),null===e.top100Query?n.a.createElement(p.a,null,n.a.createElement("h3",{style:{display:"inline"}},"Top 100"),n.a.createElement("p",null,"Get the top 100 most played tracks, albums or artists within a time period."),n.a.createElement(Yt,{onSubmit:a})):e.loading?n.a.createElement(p.a,null,n.a.createElement("h1",null,"Top 100"),n.a.createElement(Yt,{onSubmit:a}),n.a.createElement("div",null,"Loading")):"artist_id"===e.top100Query.list?n.a.createElement(p.a,null,n.a.createElement("h3",{style:{display:"inline"}},"Top 100"),n.a.createElement("p",null,"Get the top 100 most played tracks, albums or artists within a time period."),n.a.createElement(Yt,{onSubmit:a}),n.a.createElement(zt,{top100:e.top100})):"album_id"===e.top100Query.list?n.a.createElement(p.a,null,n.a.createElement("h3",{style:{display:"inline"}},"Top 100"),n.a.createElement("p",null,"Get the top 100 most played tracks, albums or artists within a time period."),n.a.createElement(Yt,{onSubmit:a}),n.a.createElement(Vt,{top100:e.top100})):"track_id"===e.top100Query.list?n.a.createElement(p.a,null,n.a.createElement("h3",{style:{display:"inline"}},"Top 100"),n.a.createElement("p",null,"Get the top 100 most played tracks, albums or artists within a time period."),n.a.createElement(Yt,{onSubmit:a}),n.a.createElement(Ht,{top100:e.top100})):null},Kt=function(e){var t,a=e.currentTrack,r=e.onSubmit;return null===a?n.a.createElement(E.a,null,n.a.createElement(f.a,null,"Loading track details...")):(console.log("current track at track details form",a),n.a.createElement(x.a,{columns:2},n.a.createElement(x.a.Column,null,n.a.createElement(L.a,null,"Track details"),n.a.createElement(I.d,{initialValues:{artist:a.artist,album:a.album,track_title:a.track_title,track_id:a.track_id,length:a.length,minutes:Math.floor(a.length/60),seconds:a.length%60,country:a.country,record_country:a.record_country,people:a.people,disc_no:a.disc_no,track_no:a.track_no,year:Number(null===(t=a.year)||void 0===t?void 0:t.substring(0,4))||"",label:a.label,cat_id:a.cat_id,isrc:a.isrc,comment:a.comment,user_id:null,artist_id:a.artist_id,album_id:a.album_id,sortable_rank:null,report_track_id:null},onSubmit:r,validate:function(e){console.log(e);var t={};return e.track_title||(t.name="Album name is required"),t}},(function(e){var t=e.isValid;return n.a.createElement(I.c,{className:"form ui"},n.a.createElement(I.b,{label:"Artist",placeholder:"Artist",name:"artist",component:U}),n.a.createElement(I.b,{label:"Album",placeholder:"Album",name:"album",component:U}),n.a.createElement(I.b,{label:"Track title",placeholder:"Track title...",name:"track_title",component:U}),n.a.createElement(I.b,{label:"Minutes",name:"minutes",component:B,min:0,max:999}),n.a.createElement(I.b,{label:"Seconds",name:"seconds",component:B,min:0,max:59}),n.a.createElement(I.b,{label:"Label",placeholder:"Label...",name:"label",component:U}),n.a.createElement(I.b,{label:"Catalog ID",placeholder:"Catalog ID...",name:"cat_id",component:U}),n.a.createElement(I.b,{label:"Year",name:"year",component:B,min:1900,max:2900}),n.a.createElement(I.b,{label:"Spotify id",placeholder:"Spotify id",name:"spotify_id",component:U}),n.a.createElement(D.a,{type:"submit",floated:"left",color:"green",disabled:!t},"Update track"))})))))},Jt=function(e){var t=e.pgm;return n.a.createElement(z.a.Row,null,n.a.createElement(z.a.Cell,null,t.program_date),n.a.createElement(z.a.Cell,null,n.a.createElement(u.b,{to:"/reports/".concat(t.report_id)},t.program_name)))},Wt=function(e){var t=e.playHistory;return 0===t.length?n.a.createElement(E.a,null,n.a.createElement(f.a,null,"Ladataan...")):"No plays yet"===t[0].result?n.a.createElement(n.a.Fragment,null,n.a.createElement("h4",null,"Soittohistoria"),n.a.createElement("p",null,"Ei soittoja")):n.a.createElement(n.a.Fragment,null,n.a.createElement("h4",null,"Play history"),n.a.createElement(z.a,{striped:!0},n.a.createElement(z.a.Header,null,n.a.createElement(z.a.Row,null,n.a.createElement(z.a.Cell,null,"Date"),n.a.createElement(z.a.Cell,null,"Program"))),n.a.createElement(z.a.Body,null,t.map((function(e){return n.a.createElement(Jt,{key:e.report_id,pgm:e})})))))},Qt=function(e){var t=e.id;console.log(t);var a=Object(o.b)(),l=Object(o.c)((function(e){return e.track})),c=Object(o.c)((function(e){return e.login}));console.log(l),console.log("track at track",l);var u=Object(o.c)((function(e){return e.report}));if(console.log(u),Object(r.useEffect)((function(){a(function(e){return function(){var t=Object(g.a)(v.a.mark((function t(a){var r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"SET_LOADING"}),t.next=4,qe.getOneTrack(e);case 4:r=t.sent,a({type:"GET_ONE_TRACK",data:r}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("trackActions getoneTrack error: ",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}(t)),a(function(e){return function(){var t=Object(g.a)(v.a.mark((function t(a){var r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"CLEAR_CURRENT_TRACK"}),a({type:"SET_LOADING"}),t.next=5,qe.getOneTrackHistory(e);case 5:r=t.sent,a({type:"GET_ONE_TRACK_HISTORY",data:r}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log("trackActions getOneTrackHistory error: ",t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}(t))}),[]),null===l.currentTrack||0===l.playHistory.length)return n.a.createElement(p.a,null,n.a.createElement(E.a,null,n.a.createElement(f.a,null,"Ladataan...")));return n.a.createElement(p.a,null,n.a.createElement(Kt,{onSubmit:function(e){var t,r,n={artist_name:e.artist,album_name:e.album,track_title:e.track_title,track_id:e.track_id,length:60*e.minutes+e.seconds,country:e.country,record_country:e.record_country,people:e.people,disc_no:e.disc_no,track_no:e.track_no,year:null===(t=e.year)||void 0===t?void 0:t.toString(),label:e.label,cat_id:e.cat_id,isrc:e.isrc,comment:e.comment,user_id:null===(r=c.currentUser)||void 0===r?void 0:r.id,artist_id:e.artist_id,album_id:e.album_id,sortable_rank:null,report_track_id:null};console.log("track to update",n),a(function(e){return function(){var t=Object(g.a)(v.a.mark((function t(a){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"SET_LOADING"}),console.log("track to update at action",e),t.next=5,qe.updateTrack(e);case 5:a({type:"UPDATE_TRACK",data:e}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("trackActions updateTrack error: ",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}(n)),a(S("Track ".concat(e.track_title," updated!"),"success"))},currentTrack:l.currentTrack}),n.a.createElement(Wt,{playHistory:l.playHistory}))},Xt=[{value:pe.DJ,label:"DJ"},{value:pe.Staff,label:"Staff"},{value:pe.Admin,label:"Admin"}],Zt=[{value:1,label:"Active"},{value:0,label:"Inactive"}],$t=function(e){var t=e.onSubmit,a=e.onCancel,r=e.user;return n.a.createElement(I.d,{initialValues:{password:"",confirm_password:"",first_name:r.first_name,last_name:r.last_name,email:r.email,level:r.level,status:r.status},onSubmit:t,validate:function(e){var t={};return e.password!==e.confirm_password&&(t.password="Passwords do not match",t.confirm_password="Passwords do not match"),e.email||(t.email="Field is required"),e.first_name||(t.first_name="Field is required"),e.last_name||(t.last_name="Field is required"),t}},(function(e){var t=e.isValid;return n.a.createElement(I.c,{className:"form ui"},n.a.createElement(I.b,{label:"Password - fill out field only if you wish to change the password",placeholder:"Password",name:"password",type:"password",component:M}),n.a.createElement(I.b,{label:"Confirm password",placeholder:"Confirm password",name:"confirm_password",type:"password",component:M}),n.a.createElement(I.b,{label:"First name",placeholder:"First name",name:"first_name",component:U,required:!0}),n.a.createElement(I.b,{label:"Last name",placeholder:"Last name",name:"last_name",component:U}),n.a.createElement(I.b,{label:"Email",placeholder:"Email",name:"email",component:U}),n.a.createElement(P,{label:"Level",name:"level",options:Xt}),n.a.createElement(P,{label:"Status",name:"status",options:Zt}),n.a.createElement(x.a,null,n.a.createElement(x.a.Column,{floated:"left",width:5},n.a.createElement(D.a,{type:"button",onClick:a,color:"red"},"Cancel")),n.a.createElement(x.a.Column,{floated:"right",width:5},n.a.createElement(D.a,{type:"submit",floated:"right",color:"green",disabled:!t},"Update"))))}))},ea=function(e){var t=e.modalOpen,a=e.onClose,r=e.onSubmit,l=e.error,c=e.user;return n.a.createElement(at.a,{open:t,onClose:a,centered:!1,closeIcon:!0},n.a.createElement(at.a.Header,null,"Edit info of user ",c.username),n.a.createElement(at.a.Content,null,l&&n.a.createElement(dt.a,{inverted:!0,color:"red"},"Error: ".concat(l)),n.a.createElement($t,{user:c,onSubmit:r,onCancel:a})))},ta=function(e){var t,a,l,c=e.user,u=Object(o.b)(),i=Object(r.useState)(!1),s=Object(ae.a)(i,2),m=s[0],p=s[1],E=Object(r.useState)(!1),f=Object(ae.a)(E,2),b=f[0],h=f[1],y=Object(r.useState)(),_=Object(ae.a)(y,2),O=_[0],k=_[1],A=function(){h(!1),k(void 0)};return t=1===c.level?"DJ":2===c.level?"Staff":"Admin",null===c.status||0===c.status?(l="Inactive",a="inactive-user"):1===c.status&&(l="Active",a="active-user"),n.a.createElement(z.a.Row,null,n.a.createElement(z.a.Cell,null,n.a.createElement(ea,{user:c,modalOpen:b,onSubmit:function(e){try{var t=Object(d.a)({},e,{id:c.id});u(nt(t)),u(S("".concat(t.first_name," ").concat(t.last_name," updated!"),"success")),console.log("updating user",t),A()}catch(a){console.error(a.response.data),k(a.response.data.error)}},error:O,onClose:A}),n.a.createElement("button",{style:{border:"none",cursor:"pointer",color:"blue"},onClick:function(){return h(!0)}},c.username)),n.a.createElement(z.a.Cell,null,c.first_name," ",c.last_name),n.a.createElement(z.a.Cell,null,c.last_seen),n.a.createElement(z.a.Cell,{className:a},l),n.a.createElement(z.a.Cell,null,t),n.a.createElement(z.a.Cell,null,n.a.createElement(ye.a,{color:"red",onClick:function(){return p(!0)},name:"delete"}),n.a.createElement(_e.a,{content:"Are you sure you wish to delete user ".concat(c.username,"?"),open:m,onCancel:function(){p(!1)},onConfirm:function(){var e;p(!1),u((e=c.id,function(){var t=Object(g.a)(v.a.mark((function t(a){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"SET_LOADING"}),a({type:"DELETE_USER",data:e}),t.next=5,Je.deleteUser(e);case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()))},cancelButton:"Cancel delete",confirmButton:"Confirm delete"})))},aa=function(e){var t=e.users;return n.a.createElement(p.a,null,n.a.createElement("div",{style:{marginTop:"1rem",marginBottom:"1rem"}},n.a.createElement("h3",{style:{display:"inline"}},"Users")),n.a.createElement(z.a,{striped:!0},n.a.createElement(z.a.Header,null,n.a.createElement(z.a.Row,null,n.a.createElement(z.a.Cell,null,"Username"),n.a.createElement(z.a.Cell,null,"Name"),n.a.createElement(z.a.Cell,null,"Latest login"),n.a.createElement(z.a.Cell,null,"Status"),n.a.createElement(z.a.Cell,null,"Level"))),n.a.createElement(z.a.Body,null,t.map((function(e){return n.a.createElement(ta,{user:e,key:e.id})})))))},ra=[{value:pe.DJ,label:"DJ"},{value:pe.Staff,label:"Staff"},{value:pe.Admin,label:"Admin"}],na=function(e){var t=e.onSubmit,a=e.onCancel;return n.a.createElement(I.d,{initialValues:{username:"",password:"",confirm_password:"",first_name:"",last_name:"",email:"",level:pe.DJ},onSubmit:t,validate:function(e){var t="Field is required",a={};return e.username||(a.username=t),e.password||(a.password=t),e.confirm_password||(a.confirm_password=t),e.password!==e.confirm_password&&(a.password="Passwords do not match",a.confirm_password="Passwords do not match"),e.email||(a.email=t),e.first_name||(a.first_name=t),e.last_name||(a.last_name=t),a}},(function(e){var t=e.isValid,r=e.dirty;return n.a.createElement(I.c,{className:"form ui"},n.a.createElement(I.b,{label:"Username",placeholder:"Username",name:"username",component:G}),n.a.createElement(I.b,{label:"Password",placeholder:"Password",name:"password",type:"password",component:F}),n.a.createElement(I.b,{label:"Confirm password",placeholder:"Confirm password",name:"confirm_password",type:"password",component:F}),n.a.createElement(I.b,{label:"First name",placeholder:"First name",name:"first_name",component:G}),n.a.createElement(I.b,{label:"Last name",placeholder:"Last name",name:"last_name",component:G}),n.a.createElement(I.b,{label:"Email",placeholder:"Email",name:"email",component:G}),n.a.createElement(P,{label:"Level",name:"level",options:ra}),n.a.createElement(x.a,null,n.a.createElement(x.a.Column,{floated:"left",width:5},n.a.createElement(D.a,{type:"button",onClick:a,color:"red"},"Cancel")),n.a.createElement(x.a.Column,{floated:"right",width:5},n.a.createElement(D.a,{type:"submit",floated:"right",color:"green",disabled:!r||!t},"Add"))))}))},la=function(e){var t=e.modalOpen,a=e.onClose,r=e.onSubmit,l=e.error;return n.a.createElement(at.a,{open:t,onClose:a,centered:!1,closeIcon:!0},n.a.createElement(at.a.Header,null,"Add a new user"),n.a.createElement(at.a.Content,null,l&&n.a.createElement(dt.a,{inverted:!0,color:"red"},"Error: ".concat(l)),n.a.createElement(na,{onSubmit:r,onCancel:a})))},ca=function(){var e,t=Object(o.c)((function(e){return e.user})),a=Object(o.c)((function(e){return e.login})),r=Object(o.b)(),l=n.a.useState(!1),c=Object(ae.a)(l,2),u=c[0],i=c[1],s=n.a.useState(),m=Object(ae.a)(s,2),d=m[0],E=m[1],f=function(){i(!1),E(void 0)};return 3===(null===(e=a.currentUser)||void 0===e?void 0:e.level)?n.a.createElement(p.a,null,n.a.createElement(D.a,{floated:"right",color:"green",style:{marginBottom:"0.5rem"},onClick:function(){return i(!0)}},n.a.createElement(ye.a,{name:"add"}),"Add a new user"),n.a.createElement(la,{modalOpen:u,onSubmit:function(e){try{r((t=e,function(){var e=Object(g.a)(v.a.mark((function e(a){var r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:"SET_LOADING"}),e.next=4,Je.createUser(t);case 4:r=e.sent,a({type:"CREATE_USER",data:r}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}())),r(S("User ".concat(e.username," created!"),"success")),f()}catch(a){r(S("Failed to create user!","fail")),console.error(a.response.data),E(a.response.data.error)}var t},error:d,onClose:f}),n.a.createElement(aa,{users:t.users})):null},oa=function(){var e,t,a,l=Object(o.b)(),c=Object(o.c)((function(e){return e.login})),s=Object(o.c)((function(e){return e.notification}));return Object(r.useEffect)((function(){l(function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t({type:"SET_LOADING"}),(a=window.localStorage.getItem("loggedUser"))&&(r=JSON.parse(a),Je.setToken(r.token),ge.setToken(r.token),je.setToken(r.token),Ge.setToken(r.token),j.setToken(r.token),qe.setToken(r.token),Q.setToken(r.token),O.setToken(r.token),t({type:"INIT_USER",data:r}))}catch(n){console.log("error initializing user",n)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),l(function(){var e=Object(g.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"SET_LOADING"}),e.next=4,Je.getAll();case 4:a=e.sent,t({type:"INIT_USER_LIST",data:a}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()),l(function(){var e=Object(g.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"SET_LOADING"}),e.next=4,Ge.getAllActive();case 4:a=e.sent,t({type:"GET_ALL_ACTIVE_PROGRAMS",data:a}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("error getting all active programs programActions.initializePrograms",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()),l(pt()),m.a.get("/ping")}),[null===(e=c.currentUser)||void 0===e?void 0:e.token]),null===c.currentUser?n.a.createElement(p.a,null,n.a.createElement(Qe,null),n.a.createElement(te,null)):null===(null===(t=c.currentUser)||void 0===t?void 0:t.status)||0===(null===(a=c.currentUser)||void 0===a?void 0:a.status)?n.a.createElement(p.a,null,n.a.createElement(Qe,null),n.a.createElement("div",null,"Credentials deactivated. Please contact the administrator."),n.a.createElement(te,null)):n.a.createElement(u.a,null,n.a.createElement("div",{className:"App"},n.a.createElement(it,null),n.a.createElement(mt,{notification:s})),n.a.createElement(i.c,null,n.a.createElement(i.a,{exact:!0,path:"/",component:Ie}),n.a.createElement(i.a,{path:"/album/:id",render:function(e){var t=e.match;return n.a.createElement(q,{id:t.params.id})}}),n.a.createElement(i.a,{path:"/artist/:id",render:function(e){var t=e.match;return n.a.createElement(ee,{id:t.params.id})}}),n.a.createElement(i.a,{path:"/track/:id",render:function(e){var t=e.match;return n.a.createElement(Qt,{id:t.params.id})}}),n.a.createElement(i.a,{path:"/reports/:id",render:function(e){var t=e.match;return n.a.createElement(Nt,{id:t.params.id})}}),n.a.createElement(i.a,{exact:!0,path:"/reports",component:St}),n.a.createElement(i.a,{exact:!0,path:"/top100",component:qt}),n.a.createElement(i.a,{exact:!0,path:"/search",component:Ft}),n.a.createElement(i.a,{exact:!0,path:"/programs",component:wt}),n.a.createElement(i.a,{exact:!0,path:"/users",component:ca})),n.a.createElement(te,null))},ua=a(81),ia=a(308),sa=a(309),ma=a(36),pa={currentAlbum:null,tracklist:[],loading:!1},da=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ONE_ALBUM":return Object(d.a)({},e,{currentAlbum:t.data,loading:!1});case"GET_TRACKLIST_OF_ALBUM":return Object(d.a)({},e,{tracklist:t.data,loading:!1});case"CLEAR_CURRENT_ALBUM":return Object(d.a)({},e,{currentAlbum:null,tracklist:[],loading:!1});case"ADD_TRACK_TO_ALBUM":return Object(d.a)({},e,{tracklist:[].concat(Object(ma.a)(e.tracklist),[t.data])});case"SET_LOADING":return Object(d.a)({},e,{loading:!0});default:return e}},Ea={currentArtist:null,albumList:[],loading:!1},fa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ea,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ONE_ARTIST":return Object(d.a)({},e,{currentArtist:t.data,loading:!1});case"GET_ALBUM_LIST_BY_ARTIST":return Object(d.a)({},e,{albumList:t.data,loading:!1});case"CLEAR_CURRENT_ARTIST":return Object(d.a)({},e,{currentArtist:null});case"SET_LOADING":return Object(d.a)({},e,{loading:!0});default:return e}},ba={loading:!1,currentUser:null},va=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ba,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_USER":case"LOGIN":case"UPDATE_CURRENT_USER":return Object(d.a)({},e,{currentUser:t.data,loading:!1});case"LOGOUT":return ba;case"SET_LOADING":return Object(d.a)({},e,{loading:!0});default:return e}},ga={message:null,type:null},ha=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ga,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_NOTIFICATION":return t.data;case"CLEAR_NOTIFICATION":return ga;default:return e}},ya={allPrograms:[],activePrograms:[],program:null,loading:!1},_a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ya,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ALL_PROGRAMS":return Object(d.a)({},e,{allPrograms:t.data,loading:!1});case"GET_ALL_ACTIVE_PROGRAMS":return Object(d.a)({},e,{activePrograms:t.data,loading:!1});case"GET_ONE_PROGRAM":return Object(d.a)({},e,{program:t.data,loading:!1});case"CREATE_NEW_PROGRAM":return Object(d.a)({},e,{allPrograms:[].concat(Object(ma.a)(e.allPrograms),[t.data]),loading:!1});case"CREATE_NEW_PROGRAM_ON_NEW_REPORT":return Object(d.a)({},e,{activePrograms:[].concat(Object(ma.a)(e.activePrograms),[t.data]),loading:!1});case"UPDATE_PROGRAM":return Object(d.a)({},e,{allPrograms:e.allPrograms.map((function(e){return e.id===t.data.id?t.data:e})),loading:!1});default:return e}},Oa={report:[],playlog:[],editTrackId:null,reportDetails:null,newReport:null,loading:!1,checkedForDelete:[],currentTrack:null},ka=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ONE_REPORT":return Object(d.a)({},e,{report:t.data,loading:!1});case"GET_PLAYLOG_TRACKS":return Object(d.a)({},e,{report:[].concat(Object(ma.a)(e.report),Object(ma.a)(t.report)),playlog:t.playlog,loading:!1});case"GET_REPORT_DETAILS":return Object(d.a)({},e,{reportDetails:t.data,newReport:null,loading:!1});case"ADD_NEW_TRACK":return Object(d.a)({},e,{report:[].concat(Object(ma.a)(e.report),[t.data]),loading:!1});case"ADD_TRACK_TO_REPORT":return Object(d.a)({},e,{report:[].concat(Object(ma.a)(e.report),[t.data])});case"SET_EDIT_TRACK_ID":return Object(d.a)({},e,{editTrackId:t.data});case"GET_ONE_TRACK":return Object(d.a)({},e,{currentTrack:t.data,loading:!1});case"REMOVE_CURRENT_TRACK":return Object(d.a)({},e,{currentTrack:null});case"CLEAR_CURRENT_REPORT":return Object(d.a)({},e,{report:[]});case"CREATE_REPORT":return Object(d.a)({},e,{newReport:t.data,reportDetails:t.data,loading:!1});case"UPDATE_REPORT":return Object(d.a)({},e,{reportDetails:t.data,newReport:null,loading:!1});case"DELETE_TRACK_FROM_REPORT":return Object(d.a)({},e,{report:e.report.filter((function(e){return e.report_track_id!==t.data}))});case"CHECK_FOR_DELETE":return Object(d.a)({},e,{checkedForDelete:[t.data].concat(Object(ma.a)(e.checkedForDelete))});case"UNCHECK_FOR_DELETE":return Object(d.a)({},e,{checkedForDelete:e.checkedForDelete.filter((function(e){return e!==t.data}))});case"CLEAR_CHECKED_FOR_DELETE":return Object(d.a)({},e,{checkedForDelete:[]});case"SET_LOADING":return Object(d.a)({},e,{loading:!0});default:return e}},Aa={reportList:[],inProgress:[],reportListDate:null,reportTransferList:[],lastTransfer:null,loading:!1,filterStatusValue:null,filterUserValue:null,filterByText:"",error:null},Ta=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Aa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ALL_REPORTS_BY_DATE":return Object(d.a)({},e,{reportList:t.data,reportListDate:t.date,loading:!1});case"GET_ALL_IN_PROGRESS":return Object(d.a)({},e,{inProgress:t.data,loading:!1});case"GET_ALL_REPORT_TRANSFERS":return Object(d.a)({},e,{reportTransferList:t.data,loading:!1});case"GENERATE_REPORT_TRANSFER":return Object(d.a)({},e,{lastTransfer:t.data,loading:!1});case"DELETE_REPORT":return Object(d.a)({},e,{reportList:e.reportList.filter((function(e){return e.id!==t.data})),loading:!1});case"FILTER_BY_USER_ID":return Object(d.a)({},e,{filterUserValue:t.data});case"FILTER_BY_STATUS":return Object(d.a)({},e,{filterStatusValue:t.data});case"FILTER_BY_TEXT":return Object(d.a)({},e,{filterByText:t.data});case"SET_LOADING":return Object(d.a)({},e,{loading:!0});default:return e}},wa={top100:[],top100Query:null,advancedResults:[],sortAdvancedResults:null,loading:!1,discogsData:null},Ca=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADVANCED_RESULTS":return Object(d.a)({},e,{advancedResults:t.data,loading:!1});case"SORT_ADVANCED_RESULTS":return Object(d.a)({},e,{sortAdvancedResults:t.data});case"TOP_100":return Object(d.a)({},e,{top100:t.data,top100Query:t.query,loading:!1});case"GET_DISCOGS_DATA":return Object(d.a)({},e,{discogsData:t.data});case"CLEAR_DISCOGS_DATA":return Object(d.a)({},e,{discogsData:null});case"SET_SEARCH_LOADING":return Object(d.a)({},e,{loading:!0});case"MERGE_TRACKS":return Object(d.a)({},e,{advancedResults:e.advancedResults.filter((function(e){return e.track_id!==t.data.merge}))});case"MERGE_ARTISTS":var a=t.data.merge,r=t.data.mergeTo,n=t.data.newName,l=e.advancedResults.filter((function(e){return e.artist_id===a})),c=l.map((function(e){return Object(d.a)({},e,{artist_id:r,artist_name:n})})),o=e.advancedResults.filter((function(e){return e.artist_id!==a})),u=[].concat(Object(ma.a)(c),Object(ma.a)(o));return Object(d.a)({},e,{advancedResults:u});default:return e}},Ra={currentTrack:null,playHistory:[],loading:!1},ja=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ra,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ONE_TRACK":case"UPDATE_TRACK":return Object(d.a)({},e,{currentTrack:t.data,loading:!1});case"GET_ONE_TRACK_HISTORY":return Object(d.a)({},e,{playHistory:t.data,loading:!1});case"CLEAR_CURRENT_TRACK":return Object(d.a)({},e,{playhistory:null,currentTrack:null});case"SET_LOADING":return Object(d.a)({},e,{loading:!0});default:return e}},Sa={users:[],loading:!1},xa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_USER_LIST":return Object(d.a)({},e,{users:t.data,loading:!1});case"CREATE_USER":return Object(d.a)({},e,{users:[].concat(Object(ma.a)(e.users),[t.data]),loading:!1});case"UPDATE_USER":return Object(d.a)({},e,{users:t.data,loading:!1});case"DELETE_USER":return Object(d.a)({},e,{users:e.users.filter((function(e){return e.id!==t.data})),loading:!1});case"SET_LOADING":return Object(d.a)({},e,{loading:!0});default:return e}},La=Object(ua.combineReducers)({album:da,artist:fa,login:va,notification:ha,program:_a,report:ka,reportList:Ta,search:Ca,track:ja,user:xa}),Da=Object(ua.createStore)(La,Object(ia.composeWithDevTools)(Object(ua.applyMiddleware)(sa.a)));c.a.render(n.a.createElement(o.a,{store:Da},n.a.createElement(oa,null)),document.getElementById("root"))},95:function(e,t,a){e.exports=a.p+"static/media/logo.ca9e42db.png"}},[[321,1,2]]]);
//# sourceMappingURL=main.31696f90.chunk.js.map