(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{114:function(e,a,t){e.exports=t.p+"static/media/logo.ca9e42db.png"},392:function(e,a,t){e.exports=t(677)},418:function(e,a,t){},677:function(e,a,t){"use strict";t.r(a);for(var r=t(0),n=t.n(r),l=t(51),c=t.n(l),o=t(13),u=(t(400),t(24)),i=t(82),s=t(17),m=t.n(s),p=t(693),d=(t(418),t(14)),b=t(702),E=t(690),v=t(2),f=t.n(v),g=t(9),h=null,y=function(){var e=Object(g.a)(f.a.mark((function e(a){var t,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:h}},e.next=3,m.a.get("".concat("/api/albums","/albumdetails/").concat(a),t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),_=function(){var e=Object(g.a)(f.a.mark((function e(a){var t,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:h}},e.next=3,m.a.get("".concat("/api/albums","/tracklist/").concat(a),t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),k={setToken:function(e){h="bearer ".concat(e)},updateAlbum:function(){var e=Object(g.a)(f.a.mark((function e(a){var t,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:h}},e.next=3,m.a.put("".concat("/api/albums","/albumdetails/").concat(a.id),a,t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),getOneAlbum:y,getTracklistOfAlbum:_,changeArtistId:function(){var e=Object(g.a)(f.a.mark((function e(a){var t,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:h}},e.next=3,m.a.put("/api/albums/updateartist",a,t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()},O=null,A=function(){var e=Object(g.a)(f.a.mark((function e(a){var t,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:O}},e.next=3,m.a.get("".concat("/api/search","/autocomplete/").concat(a),t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),T=function(){var e=Object(g.a)(f.a.mark((function e(a){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get("https://api.discogs.com/database/search?artist=".concat(a.artist,"&release_title=").concat(a.album,"&token=").concat("THjssRPqbcSFrfIYgsZWCAPmWPDpKIypkMXQWGHZ"));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),C=function(){var e=Object(g.a)(f.a.mark((function e(a){var t,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:O}},e.next=3,m.a.get("/api/top100?list=".concat(a.list,"&start_date=").concat(a.start_date,"&end_date=").concat(a.end_date),t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),w=function(){var e=Object(g.a)(f.a.mark((function e(a){var t,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:O}},e.next=3,m.a.get("".concat("/api/search","/advanced?kind=").concat(a.kind,"&query=").concat(a.query),t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),S=function(){var e=Object(g.a)(f.a.mark((function e(a){var t,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:O}},e.next=3,m.a.put("".concat("/api/search","/advanced"),a,t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),R={advancedSearch:w,getTop100:C,getDiscogsData:T,getTracksForAutocompleteSearch:A,setToken:function(e){O="bearer ".concat(e)},changeArtistOptions:function(){var e=Object(g.a)(f.a.mark((function e(a){var t,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:O}},e.next=3,m.a.get("".concat("/api/search","/changeartist/").concat(a),t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),changeAlbumOptions:function(){var e=Object(g.a)(f.a.mark((function e(a){var t,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:O}},e.next=3,m.a.get("".concat("/api/search","/changealbum/").concat(a),t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),merge:S},j=function(e,a){var t={message:e,type:a};return function(){var e=Object(g.a)(f.a.mark((function e(a){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a({type:"SET_NOTIFICATION",data:t}),setTimeout((function(){a({type:"CLEAR_NOTIFICATION"})}),3e3);case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()},x=t(703),D=t(704),I=t(251),L=t(5),N=t(695),G=function(e){var a=e.name,t=e.label,r=e.options;return n.a.createElement(N.a.Field,null,n.a.createElement("label",null,t),n.a.createElement(L.b,{as:"select",name:a,className:"ui dropdown"},r.map((function(e){return n.a.createElement("option",{key:e.value,value:e.value},e.label||e.value)}))))},P=function(e){var a=e.field,t=e.label,r=e.placeholder;return n.a.createElement(N.a.Field,null,n.a.createElement("label",null,t),n.a.createElement(L.b,Object.assign({placeholder:r},a,{type:"text"})),n.a.createElement("div",{style:{color:"red"}},n.a.createElement(L.a,{name:a.name})))},M=function(e){var a=e.field,t=e.label,r=e.placeholder;return n.a.createElement(N.a.Field,{required:!0},n.a.createElement("label",null,t),n.a.createElement(L.b,Object.assign({placeholder:r},a,{type:"text"})),n.a.createElement("div",{style:{color:"red"}},n.a.createElement(L.a,{name:a.name})))},U=function(e){var a=e.field,t=e.label,r=e.placeholder;return n.a.createElement(N.a.Field,null,n.a.createElement("label",null,t),n.a.createElement(L.b,Object.assign({placeholder:r},a,{type:"password"})),n.a.createElement("div",{style:{color:"red"}},n.a.createElement(L.a,{name:a.name})))},F=function(e){var a=e.field,t=e.label,r=e.placeholder;return n.a.createElement(N.a.Field,{required:!0},n.a.createElement("label",null,t),n.a.createElement(L.b,Object.assign({placeholder:r},a,{type:"password"})),n.a.createElement("div",{style:{color:"red"}},n.a.createElement(L.a,{name:a.name})))},B=function(e){var a=e.field,t=e.label,r=e.min,l=e.max;return n.a.createElement(N.a.Field,null,n.a.createElement("label",null,t),n.a.createElement(L.b,Object.assign({},a,{type:"number",min:r,max:l})),n.a.createElement("div",{style:{color:"red"}},n.a.createElement(L.a,{name:a.name})))},Y=function(e){var a=e.field,t=e.label,r=e.placeholder;return n.a.createElement(N.a.Field,null,n.a.createElement("label",null,t),n.a.createElement(L.b,Object.assign({placeholder:r},a,{component:"textarea"})),n.a.createElement("div",{style:{color:"red"}},n.a.createElement(L.a,{name:a.name})))},V=function(e){var a,t=e.currentAlbum,r=e.onSubmit;return null===t?n.a.createElement(b.a,null,n.a.createElement(E.a,null,"Loading artist...")):n.a.createElement(x.a,{columns:2},n.a.createElement(x.a.Column,null,n.a.createElement(D.a,null,"Artist info"),n.a.createElement(L.d,{initialValues:{id:t.album_id,name:t.album_name,label:t.label||"",cat_id:t.cat_id||"",year:Number(null===(a=t.year)||void 0===a?void 0:a.substring(0,4))||"",spotify_id:t.spotify_id||""},onSubmit:r,validate:function(e){console.log(e);var a={};return e.name||(a.name="Album name is required"),a}},(function(e){var a=e.isValid;return n.a.createElement(L.c,{className:"form ui"},n.a.createElement(L.b,{label:"Album name",placeholder:"Name",name:"name",component:P}),n.a.createElement(L.b,{label:"Label",placeholder:"Label...",name:"label",component:P}),n.a.createElement(L.b,{label:"Catalog ID",placeholder:"Catalog ID...",name:"cat_id",component:P}),n.a.createElement(L.b,{label:"Year",name:"year",component:B,min:1900,max:2900}),n.a.createElement(L.b,{label:"Spotify id",placeholder:"Spotify id",name:"spotify_id",component:P}),n.a.createElement(I.a,{type:"submit",floated:"left",color:"green",disabled:!a},"Update album"))}))))},z=t(697),H=t(698),K=t(96),q=t(26),J=null,W=function(){var e=Object(g.a)(f.a.mark((function e(a){var t,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:J}},e.next=3,m.a.get("".concat("/api/reports","/").concat(a),t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),Z={setToken:function(e){J="bearer ".concat(e)},addTrackToReport:function(){var e=Object(g.a)(f.a.mark((function e(a){var t,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:J}},e.next=3,m.a.post("".concat("/api/reports"),a,t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),deleteTrackFromReport:function(){var e=Object(g.a)(f.a.mark((function e(a){var t,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:J}},e.next=3,m.a.delete("".concat("/api/reports","/").concat(a),t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),deleteReport:function(){var e=Object(g.a)(f.a.mark((function e(a){var t,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:J}},e.next=3,m.a.put("/api/reportslist/".concat(a),{},t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),updateSortableRank:function(){var e=Object(g.a)(f.a.mark((function e(a){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={headers:{Authorization:J}},null!==a){e.next=3;break}return e.abrupt("return");case 3:a.forEach(function(){var e=Object(g.a)(f.a.mark((function e(a,r){var n,l;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={sortable_rank:r+1},e.next=3,m.a.put("".concat("/api/reports","/").concat(a.report_track_id),n,t);case 3:return l=e.sent,e.abrupt("return",l.data);case 5:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}());case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),getOne:W,getReportDetails:function(){var e=Object(g.a)(f.a.mark((function e(a){var t,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:J}},e.next=3,m.a.get("/api/reportdetails/details/".concat(a),t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),createReport:function(){var e=Object(g.a)(f.a.mark((function e(a){var t,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:J}},e.next=3,m.a.post("/api/reportdetails",a,t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),updateReport:function(){var e=Object(g.a)(f.a.mark((function e(a){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:J}},e.next=3,m.a.put("/api/reportdetails/update/".concat(a.id),a,t);case 3:return e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),checkPlaylogTracks:function(){var e=Object(g.a)(f.a.mark((function e(a){var t,r,n,l,c,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:J}},e.next=3,m.a.get("/api/playlog?date=".concat(a.date));case 3:return r=e.sent,n=[],Object.entries(r.data).forEach((function(e){var a=Object(q.a)(e,2),t=(a[0],a[1]);n.push(t)})),n=n.reverse(),l=[],n.forEach((function(e){var t=e.date.charAt(11)+e.date.charAt(12);t=parseInt(t);var r=e.length.split(":"),n=60*parseInt(r[0])+parseInt(r[1]);t<parseInt(a.startTime)||t>=parseInt(a.endTime)||l.push({album_name:e.album,artist_name:e.artist,cat_id:e.matrix,disc_no:Number(e.side),track_no:Number(e.tracknumber),isrc:e.isrc,record_country:e.recording_country,country:null,play_time:e.date,djonline_id:e.id,label:e.label,length:n,track_title:e.song,year:e.year,report_id:a.report_id})})),c=[],l.forEach((function(e,t){c.push(Object(d.a)({},e,{sortable_rank:a.sortable_rank_start+t+1}))})),o=[],c.forEach(function(){var e=Object(g.a)(f.a.mark((function e(a){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.post("/api/tracks/playlog",a,t);case 2:r=e.sent,o.push(r.data);case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()),console.log("return array at reportservice",o),e.abrupt("return",o);case 16:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()},Q=function(e){return function(){var a=Object(g.a)(f.a.mark((function a(t){var r,n;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t({type:"SET_LOADING"}),a.next=4,Z.addTrackToReport(e);case 4:return r=a.sent,a.next=7,Z.getOne(r.report_id);case 7:n=a.sent,t({type:"GET_ONE_REPORT",data:n}),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(0),console.log("reportActions addTrackToReport error",a.t0);case 14:case"end":return a.stop()}}),a,null,[[0,11]])})));return function(e){return a.apply(this,arguments)}}()},X={borderRadius:0,display:"block",opacity:.9,padding:"2em"},$=function(e){var a=e.track_id,t=e.track_title,r=e.length,l=Object(o.b)(),c=Object(o.c)((function(e){return e.report}));if(!c.reportDetails)return null;return n.a.createElement(n.a.Fragment,null,n.a.createElement(H.a,{trigger:n.a.createElement(K.a,{style:{cursor:"pointer"},color:"green",onClick:function(){var e,n,o={track_id:a,report_id:null===(e=c.reportDetails)||void 0===e?void 0:e.id,length:r,sortable_rank:c.report.length+1};l(Q(o)),l(j("".concat(t," added to ").concat(null===(n=c.reportDetails)||void 0===n?void 0:n.program_name,"!"),"success"))},name:"add"}),style:X,inverted:!0,basic:!0,content:"Add ".concat(t," to ").concat(c.reportDetails.program_name)}))},ee=function(e){var a=e.track;return n.a.createElement(z.a.Row,null,n.a.createElement(z.a.Cell,null,"merge album tracks modal here"),n.a.createElement(z.a.Cell,null,n.a.createElement(u.b,{to:"/track/".concat(a.track_id)},a.artist_name," - ",a.track_title," ")),n.a.createElement(z.a.Cell,null,a.track_no," / ",a.disc_no),n.a.createElement(z.a.Cell,null,a.isrc),n.a.createElement(z.a.Cell,null,a.report_occurrence),n.a.createElement(z.a.Cell,null,n.a.createElement($,{track_title:a.track_title,track_id:a.track_id,length:a.length})))},ae=function(e){var a=e.tracklist;return null===a?n.a.createElement("span",null,"loading"):n.a.createElement(n.a.Fragment,null,n.a.createElement("h4",null,"Tracks"),n.a.createElement(z.a,{striped:!0},n.a.createElement(z.a.Header,null,n.a.createElement(z.a.Row,null,n.a.createElement(z.a.Cell,null,"Track ID#"),n.a.createElement(z.a.Cell,null,"ARTIST - Track"),n.a.createElement(z.a.Cell,null,"Track# / Disc#"),n.a.createElement(z.a.Cell,null,"ISRC"),n.a.createElement(z.a.Cell,null,"Report occurrence"))),n.a.createElement(z.a.Body,null,a.map((function(e){return n.a.createElement(ee,{key:e.track_id,track:e})})))))},te=t(187),re=[{label:"Finland",value:"FI"},{label:"United Kingdom",value:"GB"},{label:"United States",value:"US"},{label:"Afghanistan",value:"AF"},{label:"\xc5land Islands",value:"AX"},{label:"Albania",value:"AL"},{label:"Algeria",value:"DZ"},{label:"American Samoa",value:"AS"},{label:"AndorrA",value:"AD"},{label:"Angola",value:"AO"},{label:"Anguilla",value:"AI"},{label:"Antarctica",value:"AQ"},{label:"Antigua and Barbuda",value:"AG"},{label:"Argentina",value:"AR"},{label:"Armenia",value:"AM"},{label:"Aruba",value:"AW"},{label:"Australia",value:"AU"},{label:"Austria",value:"AT"},{label:"Azerbaijan",value:"AZ"},{label:"Bahamas",value:"BS"},{label:"Bahrain",value:"BH"},{label:"Bangladesh",value:"BD"},{label:"Barbados",value:"BB"},{label:"Belarus",value:"BY"},{label:"Belgium",value:"BE"},{label:"Belize",value:"BZ"},{label:"Benin",value:"BJ"},{label:"Bermuda",value:"BM"},{label:"Bhutan",value:"BT"},{label:"Bolivia",value:"BO"},{label:"Bosnia and Herzegovina",value:"BA"},{label:"Botswana",value:"BW"},{label:"Bouvet Island",value:"BV"},{label:"Brazil",value:"BR"},{label:"British Indian Ocean Territory",value:"IO"},{label:"Brunei Darussalam",value:"BN"},{label:"Bulgaria",value:"BG"},{label:"Burkina Faso",value:"BF"},{label:"Burundi",value:"BI"},{label:"Cambodia",value:"KH"},{label:"Cameroon",value:"CM"},{label:"Canada",value:"CA"},{label:"Cape Verde",value:"CV"},{label:"Cayman Islands",value:"KY"},{label:"Central African Republic",value:"CF"},{label:"Chad",value:"TD"},{label:"Chile",value:"CL"},{label:"China",value:"CN"},{label:"Christmas Island",value:"CX"},{label:"Cocos (Keeling) Islands",value:"CC"},{label:"Colombia",value:"CO"},{label:"Comoros",value:"KM"},{label:"Congo",value:"CG"},{label:"Congo, The Democratic Republic of the",value:"CD"},{label:"Cook Islands",value:"CK"},{label:"Costa Rica",value:"CR"},{label:"Cote D'Ivoire",value:"CI"},{label:"Croatia",value:"HR"},{label:"Cuba",value:"CU"},{label:"Cyprus",value:"CY"},{label:"Czech Republic",value:"CZ"},{label:"Denmark",value:"DK"},{label:"Djibouti",value:"DJ"},{label:"Dominica",value:"DM"},{label:"Dominican Republic",value:"DO"},{label:"Ecuador",value:"EC"},{label:"Egypt",value:"EG"},{label:"El Salvador",value:"SV"},{label:"Equatorial Guinea",value:"GQ"},{label:"Eritrea",value:"ER"},{label:"Estonia",value:"EE"},{label:"Ethiopia",value:"ET"},{label:"Falkland Islands (Malvinas)",value:"FK"},{label:"Faroe Islands",value:"FO"},{label:"Fiji",value:"FJ"},{label:"France",value:"FR"},{label:"French Guiana",value:"GF"},{label:"French Polynesia",value:"PF"},{label:"French Southern Territories",value:"TF"},{label:"Gabon",value:"GA"},{label:"Gambia",value:"GM"},{label:"Georgia",value:"GE"},{label:"Germany",value:"DE"},{label:"Ghana",value:"GH"},{label:"Gibraltar",value:"GI"},{label:"Greece",value:"GR"},{label:"Greenland",value:"GL"},{label:"Grenada",value:"GD"},{label:"Guadeloupe",value:"GP"},{label:"Guam",value:"GU"},{label:"Guatemala",value:"GT"},{label:"Guernsey",value:"GG"},{label:"Guinea",value:"GN"},{label:"Guinea-Bissau",value:"GW"},{label:"Guyana",value:"GY"},{label:"Haiti",value:"HT"},{label:"Heard Island and Mcdonald Islands",value:"HM"},{label:"Holy See (Vatican City State)",value:"VA"},{label:"Honduras",value:"HN"},{label:"Hong Kong",value:"HK"},{label:"Hungary",value:"HU"},{label:"Iceland",value:"IS"},{label:"India",value:"IN"},{label:"Indonesia",value:"ID"},{label:"Iran, Islamic Republic Of",value:"IR"},{label:"Iraq",value:"IQ"},{label:"Ireland",value:"IE"},{label:"Isle of Man",value:"IM"},{label:"Israel",value:"IL"},{label:"Italy",value:"IT"},{label:"Jamaica",value:"JM"},{label:"Japan",value:"JP"},{label:"Jersey",value:"JE"},{label:"Jordan",value:"JO"},{label:"Kazakhstan",value:"KZ"},{label:"Kenya",value:"KE"},{label:"Kiribati",value:"KI"},{label:"Korea, Democratic People's Republic of",value:"KP"},{label:"Korea, Republic of",value:"KR"},{label:"Kuwait",value:"KW"},{label:"Kyrgyzstan",value:"KG"},{label:"Lao People's Democratic Republic",value:"LA"},{label:"Latvia",value:"LV"},{label:"Lebanon",value:"LB"},{label:"Lesotho",value:"LS"},{label:"Liberia",value:"LR"},{label:"Libyan Arab Jamahiriya",value:"LY"},{label:"Liechtenstein",value:"LI"},{label:"Lithuania",value:"LT"},{label:"Luxembourg",value:"LU"},{label:"Macao",value:"MO"},{label:"Macedonia, The Former Yugoslav Republic of",value:"MK"},{label:"Madagascar",value:"MG"},{label:"Malawi",value:"MW"},{label:"Malaysia",value:"MY"},{label:"Maldives",value:"MV"},{label:"Mali",value:"ML"},{label:"Malta",value:"MT"},{label:"Marshall Islands",value:"MH"},{label:"Martinique",value:"MQ"},{label:"Mauritania",value:"MR"},{label:"Mauritius",value:"MU"},{label:"Mayotte",value:"YT"},{label:"Mexico",value:"MX"},{label:"Micronesia, Federated States of",value:"FM"},{label:"Moldova, Republic of",value:"MD"},{label:"Monaco",value:"MC"},{label:"Mongolia",value:"MN"},{label:"Montenegro",value:"ME"},{label:"Montserrat",value:"MS"},{label:"Morocco",value:"MA"},{label:"Mozambique",value:"MZ"},{label:"Myanmar",value:"MM"},{label:"Namibia",value:"NA"},{label:"Nauru",value:"NR"},{label:"Nepal",value:"NP"},{label:"Netherlands",value:"NL"},{label:"Netherlands Antilles",value:"AN"},{label:"New Caledonia",value:"NC"},{label:"New Zealand",value:"NZ"},{label:"Nicaragua",value:"NI"},{label:"Niger",value:"NE"},{label:"Nigeria",value:"NG"},{label:"Niue",value:"NU"},{label:"Norfolk Island",value:"NF"},{label:"Northern Mariana Islands",value:"MP"},{label:"Norway",value:"NO"},{label:"Oman",value:"OM"},{label:"Pakistan",value:"PK"},{label:"Palau",value:"PW"},{label:"Palestinian Territory, Occupied",value:"PS"},{label:"Panama",value:"PA"},{label:"Papua New Guinea",value:"PG"},{label:"Paraguay",value:"PY"},{label:"Peru",value:"PE"},{label:"Philippines",value:"PH"},{label:"Poland",value:"PL"},{label:"Portugal",value:"PT"},{label:"Puerto Rico",value:"PR"},{label:"Qatar",value:"QA"},{label:"Romania",value:"RO"},{label:"Russian Federation",value:"RU"},{label:"RWANDA",value:"RW"},{label:"Saint Helena",value:"SH"},{label:"Saint Kitts and Nevis",value:"KN"},{label:"Saint Lucia",value:"LC"},{label:"Saint Pierre and Miquelon",value:"PM"},{label:"Saint Vincent and the Grenadines",value:"VC"},{label:"Samoa",value:"WS"},{label:"San Marino",value:"SM"},{label:"Sao Tome and Principe",value:"ST"},{label:"Saudi Arabia",value:"SA"},{label:"Senegal",value:"SN"},{label:"Serbia",value:"RS"},{label:"Seychelles",value:"SC"},{label:"Sierra Leone",value:"SL"},{label:"Singapore",value:"SG"},{label:"Slovakia",value:"SK"},{label:"Slovenia",value:"SI"},{label:"Solomon Islands",value:"SB"},{label:"Somalia",value:"SO"},{label:"South Africa",value:"ZA"},{label:"South Georgia and the South Sandwich Islands",value:"GS"},{label:"Spain",value:"ES"},{label:"Sri Lanka",value:"LK"},{label:"Sudan",value:"SD"},{label:"Suriname",value:"SR"},{label:"Svalbard and Jan Mayen",value:"SJ"},{label:"Swaziland",value:"SZ"},{label:"Sweden",value:"SE"},{label:"Switzerland",value:"CH"},{label:"Syrian Arab Republic",value:"SY"},{label:"Taiwan, Province of China",value:"TW"},{label:"Tajikistan",value:"TJ"},{label:"Tanzania, United Republic of",value:"TZ"},{label:"Thailand",value:"TH"},{label:"Timor-Leste",value:"TL"},{label:"Togo",value:"TG"},{label:"Tokelau",value:"TK"},{label:"Tonga",value:"TO"},{label:"Trinidad and Tobago",value:"TT"},{label:"Tunisia",value:"TN"},{label:"Turkey",value:"TR"},{label:"Turkmenistan",value:"TM"},{label:"Turks and Caicos Islands",value:"TC"},{label:"Tuvalu",value:"TV"},{label:"Uganda",value:"UG"},{label:"Ukraine",value:"UA"},{label:"United Arab Emirates",value:"AE"},{label:"United States Minor Outlying Islands",value:"UM"},{label:"Uruguay",value:"UY"},{label:"Uzbekistan",value:"UZ"},{label:"Vanuatu",value:"VU"},{label:"Venezuela",value:"VE"},{label:"Viet Nam",value:"VN"},{label:"Virgin Islands, British",value:"VG"},{label:"Virgin Islands, U.S.",value:"VI"},{label:"Wallis and Futuna",value:"WF"},{label:"Western Sahara",value:"EH"},{label:"Yemen",value:"YE"},{label:"Zambia",value:"ZM"},{label:"Zimbabwe",value:"ZW"}],ne=[{key:1,label:"Finland",value:1},{key:2,label:"Other than Finland",value:2},{key:0,label:"Unknown",value:0}],le=[{key:0,label:"00:00",value:"00:00:00"},{key:1,label:"01:00",value:"01:00:00"},{key:2,label:"02:00",value:"02:00:00"},{key:3,label:"03:00",value:"03:00:00"},{key:4,label:"04:00",value:"04:00:00"},{key:5,label:"05:00",value:"05:00:00"},{key:6,label:"06:00",value:"06:00:00"},{key:7,label:"07:00",value:"07:00:00"},{key:8,label:"08:00",value:"08:00:00"},{key:9,label:"09:00",value:"09:00:00"},{key:10,label:"10:00",value:"10:00:00"},{key:11,label:"11:00",value:"11:00:00"},{key:12,label:"12:00",value:"12:00:00"},{key:13,label:"13:00",value:"13:00:00"},{key:14,label:"14:00",value:"14:00:00"},{key:15,label:"15:00",value:"15:00:00"},{key:16,label:"16:00",value:"16:00:00"},{key:17,label:"17:00",value:"17:00:00"},{key:18,label:"18:00",value:"18:00:00"},{key:19,label:"19:00",value:"19:00:00"},{key:20,label:"20:00",value:"20:00:00"},{key:21,label:"21:00",value:"21:00:00"},{key:22,label:"22:00",value:"22:00:00"},{key:23,label:"23:00",value:"23:00:00"}],ce=[{key:0,label:"01:00",value:"01:00:00"},{key:1,label:"02:00",value:"02:00:00"},{key:2,label:"03:00",value:"03:00:00"},{key:3,label:"04:00",value:"04:00:00"},{key:4,label:"05:00",value:"05:00:00"},{key:5,label:"06:00",value:"06:00:00"},{key:6,label:"07:00",value:"07:00:00"},{key:7,label:"08:00",value:"08:00:00"},{key:8,label:"09:00",value:"09:00:00"},{key:9,label:"10:00",value:"10:00:00"},{key:10,label:"11:00",value:"11:00:00"},{key:11,label:"12:00",value:"12:00:00"},{key:12,label:"13:00",value:"13:00:00"},{key:13,label:"14:00",value:"14:00:00"},{key:14,label:"15:00",value:"15:00:00"},{key:15,label:"16:00",value:"16:00:00"},{key:16,label:"17:00",value:"17:00:00"},{key:17,label:"18:00",value:"18:00:00"},{key:18,label:"19:00",value:"19:00:00"},{key:19,label:"20:00",value:"20:00:00"},{key:20,label:"21:00",value:"21:00:00"},{key:21,label:"22:00",value:"22:00:00"},{key:22,label:"23:00",value:"23:00:00"},{key:23,label:"24:00",value:"23:59:59"}],oe=[{key:"01",label:"January",value:"01"},{key:"02",label:"February",value:"02"},{key:"03",label:"March",value:"03"},{key:"04",label:"April",value:"04"},{key:"05",label:"May",value:"05"},{key:"06",label:"June",value:"06"},{key:"07",label:"July",value:"07"},{key:"08",label:"August",value:"08"},{key:"09",label:"September",value:"09"},{key:"10",label:"October",value:"10"},{key:"11",label:"November",value:"11"},{key:"12",label:"December",value:"12"}],ue=[{key:0,label:"In progress",value:0},{key:1,label:"Ready",value:1},{key:9,label:"Deleted",value:9}],ie=(new Date).getFullYear()+1,se=[],me=2001;me<=ie;me++)se.push(me);var pe,de=se.map((function(e){return{key:e.toString(),label:e.toString(),value:e.toString()}})),be=de=de.reverse(),Ee=function(e){var a=e.reportDetails,t=(e.currentAlbum,e.addToAlbumAndReport),r=e.onSubmit,l=e.onClose;return n.a.createElement(L.d,{initialValues:{track_title:"",disc_no:1,track_no:1,minutes:0,seconds:0,country:1,record_country:"",people:"",comment:"",isrc:""},onSubmit:r},(function(e){var r,c=e.isValid,o=e.dirty;return r=null!==a?n.a.createElement(n.a.Fragment,null,n.a.createElement(x.a.Column,{width:6},n.a.createElement(I.a,{disabled:!c||!o,color:"green",onClick:function(){return t}},"Add track to album and report ".concat(a.program_name," ").concat(a.program_date))),n.a.createElement(x.a.Column,{width:6},n.a.createElement(I.a,{disabled:!c||!o,type:"submit",color:"blue"},"Add track to album"))):n.a.createElement(x.a.Column,{width:6},n.a.createElement(I.a,{disabled:!c||!o,color:"blue",type:"submit"},"Add track to album")),n.a.createElement(L.c,{className:"form ui"},n.a.createElement(L.b,{label:"Track title",placeholder:"Track title...",name:"track_title",component:P}),n.a.createElement(x.a,null,n.a.createElement(x.a.Column,{width:8},n.a.createElement(L.b,{label:"Length - minutes",name:"minutes",component:B,min:0,max:999})),n.a.createElement(x.a.Column,{width:8},n.a.createElement(L.b,{label:"Length - seconds",name:"seconds",component:B,min:0,max:59}))),n.a.createElement(x.a,null,n.a.createElement(x.a.Column,{width:8},n.a.createElement(L.b,{label:"Track #",name:"track_no",component:B,min:0,max:999})),n.a.createElement(x.a.Column,{width:8},n.a.createElement(L.b,{label:"Disc #",name:"disc_no",component:B,min:0,max:99})),n.a.createElement(x.a.Column,{width:8},n.a.createElement(G,{label:"Country",name:"country",options:ne})),n.a.createElement(x.a.Column,{width:8},n.a.createElement(G,{label:"Recorded in",name:"record_country",options:re}))),n.a.createElement(L.b,{label:"Composers - one per line",placeholder:"LAST NAME FIRST NAME",name:"people",component:Y}),n.a.createElement(L.b,{label:"Comment",placeholder:"Any additional information",name:"comment",component:P}),n.a.createElement(x.a,null,r,n.a.createElement(x.a.Column,{floated:"right",width:6},n.a.createElement(I.a,{type:"button",onClick:l,color:"red"},"Cancel"))))}))},ve=function(e){var a=e.currentAlbum,t=e.report;Object(o.b)();console.log("album at album details",a),console.log("report at album details",t);var l=Object(r.useState)(!1),c=Object(q.a)(l,2),u=c[0],i=c[1],s=function(){i(!1)};return n.a.createElement(te.a,{trigger:n.a.createElement(I.a,{style:{marginBottom:"0.5rem"},onClick:function(){i(!0)},floated:"right",color:"green"},n.a.createElement(K.a,{name:"add"}),"Add a track to the album"),closeIcon:!0,open:u,onClose:s},n.a.createElement(te.a.Content,null,n.a.createElement(D.a,{content:"Add a track to album ".concat(a.album_name)}),n.a.createElement(Ee,{onClose:s,onSubmit:function(e){console.log(e),s()},reportDetails:t.reportDetails,currentAlbum:a,addToAlbumAndReport:function(e){console.log(e),s()}})))},fe=function(e){var a=e.id,t=Object(o.b)(),l=Object(o.c)((function(e){return e.album})),c=Object(o.c)((function(e){return e.report}));if(Object(r.useEffect)((function(){t(function(e){return function(){var a=Object(g.a)(f.a.mark((function a(t){var r,n;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t({type:"CLEAR_CURRENT_ALBUM"}),t({type:"SET_LOADING"}),a.next=5,k.getOneAlbum(e);case 5:return r=a.sent,console.log("albumactions getonealbum",r),t({type:"GET_ONE_ALBUM",data:r}),a.next=10,k.getTracklistOfAlbum(e);case 10:n=a.sent,t({type:"GET_TRACKLIST_OF_ALBUM",data:n}),a.next=17;break;case 14:a.prev=14,a.t0=a.catch(0),console.log("albumActions getOneAlbum error:",a.t0);case 17:case"end":return a.stop()}}),a,null,[[0,14]])})));return function(e){return a.apply(this,arguments)}}()}(a))}),[a]),null===l.currentAlbum)return n.a.createElement(p.a,null,n.a.createElement(b.a,null,n.a.createElement(E.a,null,"Ladataan...")));return n.a.createElement(p.a,null,n.a.createElement(ve,{currentAlbum:l.currentAlbum,report:c}),n.a.createElement(V,{onSubmit:function(e){var a=Object(d.a)({},e,{year:e.year.toString()});t(function(e){return function(){var a=Object(g.a)(f.a.mark((function a(t){var r;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t({type:"SET_LOADING"}),a.next=4,k.updateAlbum(e);case 4:return a.next=6,k.getOneAlbum(e.id);case 6:r=a.sent,t({type:"GET_ONE_ALBUM",data:r}),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),console.log("albumActions updateAlbum error:",a.t0);case 13:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(e){return a.apply(this,arguments)}}()}(a)),t(j("Artist ".concat(e.name," updated!"),"success"))},currentAlbum:l.currentAlbum}),n.a.createElement(ae,{tracklist:l.tracklist}))},ge=null,he=function(){var e=Object(g.a)(f.a.mark((function e(a){var t,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:ge}},e.next=3,m.a.get("".concat("/api/artists","/details/").concat(a),t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),ye=function(){var e=Object(g.a)(f.a.mark((function e(a){var t,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:ge}},e.next=3,m.a.get("".concat("/api/artists","/albumsby/").concat(a),t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),_e={setToken:function(e){ge="bearer ".concat(e)},updateArtist:function(){var e=Object(g.a)(f.a.mark((function e(a){var t,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:ge}},e.next=3,m.a.put("".concat("/api/artists","/details/").concat(a.id),a,t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),getOneArtist:he,getAlbumsByArtist:ye},ke=function(e){var a=e.album;return n.a.createElement(z.a.Row,null,n.a.createElement(z.a.Cell,null,"merge albums modal here"),n.a.createElement(z.a.Cell,null,n.a.createElement(u.b,{to:"/album/".concat(a.album_id)},a.name)),n.a.createElement(z.a.Cell,null,a.identifier),n.a.createElement(z.a.Cell,null,a.track_count),n.a.createElement(z.a.Cell,null,a.report_occurrence))},Oe=function(e){var a=e.albumList;return null===a?n.a.createElement("span",null,"loading"):n.a.createElement(n.a.Fragment,null,n.a.createElement("h4",null,"Albums"),n.a.createElement(z.a,{striped:!0},n.a.createElement(z.a.Header,null,n.a.createElement(z.a.Row,null,n.a.createElement(z.a.Cell,null,"ID#"),n.a.createElement(z.a.Cell,null,"Album name"),n.a.createElement(z.a.Cell,null,"Catalog ID"),n.a.createElement(z.a.Cell,null,"Tracks"),n.a.createElement(z.a.Cell,null,"Report occurrence"),n.a.createElement(z.a.Cell,null))),n.a.createElement(z.a.Body,null,a.map((function(e){return n.a.createElement(ke,{key:e.album_id,album:e})})))))},Ae=function(e){var a=e.currentArtist,t=e.onSubmit;return null===a?n.a.createElement(b.a,null,n.a.createElement(E.a,null,"Loading artist...")):n.a.createElement(x.a,{columns:2},n.a.createElement(x.a.Column,null,n.a.createElement(D.a,null,"Artist info"),n.a.createElement(L.d,{initialValues:{id:a.id,name:a.name,spotify_id:a.spotify_id||""},onSubmit:t,validate:function(e){var a={};return e.name||(a.name="Artist name is required"),a}},(function(e){var a=e.isValid;return n.a.createElement(L.c,{className:"form ui"},n.a.createElement(L.b,{label:"Artist name",placeholder:"Name",name:"name",component:P}),n.a.createElement(L.b,{label:"Spotify id",placeholder:"Spotify id",name:"spotify_id",component:P}),n.a.createElement(I.a,{type:"submit",floated:"left",color:"green",disabled:!a},"Update artist"))}))))},Te=function(e){var a=e.id,t=Object(o.b)(),l=Object(o.c)((function(e){return e.artist}));Object(r.useEffect)((function(){t(function(e){return function(){var a=Object(g.a)(f.a.mark((function a(t){var r,n;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t({type:"CLEAR_CURRENT_ARTIST"}),t({type:"SET_LOADING"}),a.next=5,_e.getOneArtist(e);case 5:return r=a.sent,t({type:"GET_ONE_ARTIST",data:r}),a.next=9,_e.getAlbumsByArtist(e);case 9:n=a.sent,t({type:"GET_ALBUM_LIST_BY_ARTIST",data:n}),a.next=16;break;case 13:a.prev=13,a.t0=a.catch(0),console.log(a.t0);case 16:case"end":return a.stop()}}),a,null,[[0,13]])})));return function(e){return a.apply(this,arguments)}}()}(a))}),[a]);return null===l.currentArtist?n.a.createElement(p.a,null,n.a.createElement(b.a,null,n.a.createElement(E.a,null,"Ladataan..."))):n.a.createElement(p.a,null,n.a.createElement(Ae,{currentArtist:l.currentArtist,onSubmit:function(e){var a;t((a=e,function(){var e=Object(g.a)(f.a.mark((function e(t){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"SET_LOADING"}),e.next=3,_e.updateArtist(a);case 3:return e.next=5,_e.getOneArtist(a.id);case 5:r=e.sent,t({type:"GET_ONE_ARTIST",data:r});case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}())),t(j("Artist ".concat(e.name," updated!"),"success"))}}),n.a.createElement(Oe,{albumList:l.albumList}))},Ce=function(){return n.a.createElement("div",{style:{marginTop:"5rem",marginBottom:"2rem",textAlign:"center"}},n.a.createElement("br",null),n.a.createElement("em",null," ","\xa9 ",(new Date).getFullYear()," ",n.a.createElement("a",{href:"https://www.teemukostamo.com",target:"_blank",rel:"noopener noreferrer"}," ","Teemu Kostamo"," ")," "))},we=t(32),Se=t.n(we),Re=t(67),je=function(e){var a=e.onSubmit,t=e.currentUser,r=e.programOptions;return n.a.createElement(L.d,{initialValues:{program_name:"",program_no:0,program_dj:"".concat(null===t||void 0===t?void 0:t.first_name," ").concat(null===t||void 0===t?void 0:t.last_name),program_date:Se()(new Date).format("YYYY-MM-DD"),program_start_time:void 0,program_end_time:void 0,program_id:0,rerun:null,status:0,user_id:(null===t||void 0===t?void 0:t.id)||0,username:(null===t||void 0===t?void 0:t.username)||"",first_name:(null===t||void 0===t?void 0:t.first_name)||"",last_name:(null===t||void 0===t?void 0:t.last_name)||""},onSubmit:a,validate:function(e){console.log(e);var a={};return e.program_dj||(a.name="Field is required"),void 0===e.program_start_time&&(a.name="Field is required"),void 0===e.program_end_time&&(a.name="Field is required"),a}},(function(e){var a=e.isValid,t=e.dirty;return n.a.createElement(L.c,{className:"form ui"},n.a.createElement(G,{label:"Program",name:"program_id",options:r}),n.a.createElement(L.b,{label:"Program number",name:"program_no",component:B,min:0,max:999}),n.a.createElement(L.b,{label:"DJ",placeholder:"DJ",name:"program_dj",component:P}),n.a.createElement(x.a,null,n.a.createElement(x.a.Column,{width:5},n.a.createElement("label",null,"Program date"),n.a.createElement(Re.a,{name:"program_date",dateFormat:"dd.MM.yyyy",placeholder:"dd.mm.yyyy"})," "),n.a.createElement(x.a.Column,{width:5},n.a.createElement(G,{label:"Start time",name:"program_start_time",options:le})),n.a.createElement(x.a.Column,{width:5},n.a.createElement(G,{label:"End time",name:"program_end_time",options:ce}))),n.a.createElement(I.a,{style:{marginTop:"1rem"},type:"submit",floated:"left",color:"green",disabled:!a||!t},"Create report"))}))},xe=function(){var e=Object(r.useState)(!1),a=Object(q.a)(e,2),t=(a[0],a[1],Object(o.b)()),l=Object(o.c)((function(e){return e.program})),c=Object(o.c)((function(e){return e.login})),u=l.activePrograms.map((function(e){return{key:e.id,label:e.name,value:e.id}}));return n.a.createElement(x.a.Column,null,n.a.createElement(p.a,null,n.a.createElement(D.a,null,"Create a new report"),n.a.createElement(je,{onSubmit:function(e){var a;console.log("submit new report values",e);var r,n=Object(d.a)({},e,{program_id:Number(e.program_id),program_name:null===(a=l.activePrograms.find((function(a){return a.id===Number(e.program_id)})))||void 0===a?void 0:a.name});console.log("report to create values",n),t(j("Created new report for the program ".concat(n.program_name," "),"success")),t((r=n,function(){var e=Object(g.a)(f.a.mark((function e(a){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:"SET_LOADING"}),e.next=4,Z.createReport(r);case 4:t=e.sent,a({type:"CREATE_REPORT",data:t}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(a){return e.apply(this,arguments)}}()))},currentUser:c.currentUser,programOptions:u})))},De=t(694),Ie=t(369),Le=t.n(Ie),Ne=null,Ge=function(){var e=Object(g.a)(f.a.mark((function e(a){var t,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:Ne}},e.next=3,m.a.get("".concat("/api/reportslist","/date/").concat(a),t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),Pe=function(){var e=Object(g.a)(f.a.mark((function e(a,t){var r,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:{Authorization:Ne}},e.next=3,m.a.get("".concat("/api/reportslist","/all?date=").concat(a,"&user=").concat(t),r);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),Me=function(){var e=Object(g.a)(f.a.mark((function e(a){var t,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:Ne}},e.next=3,m.a.get("".concat("/api/reportslist","/user/").concat(a),t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),Ue=function(){var e=Object(g.a)(f.a.mark((function e(){var a,t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:Ne}},e.next=3,m.a.get("/api/reporttransfer",a);case 3:return t=e.sent,e.abrupt("return",t.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Fe={setToken:function(e){Ne="bearer ".concat(e)},deleteReport:function(){var e=Object(g.a)(f.a.mark((function e(a){var t,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:Ne}},e.next=3,m.a.put("".concat("/api/reportslist","/").concat(a),{},t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),getAllByDate:Ge,getAllByDateByUser:Pe,getAllInProgress:Me,getAllTransfers:Ue,generateReportDownload:function(){var e=Object(g.a)(f.a.mark((function e(a){var t,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={headers:{Authorization:Ne,responseType:"blob"}},e.next=4,m.a.post("/api/reporttransfer",a,t);case 4:return r=e.sent,e.abrupt("return",r.data);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(a){return e.apply(this,arguments)}}(),downloadReport:function(){var e=Object(g.a)(f.a.mark((function e(a){var t,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={headers:{Authorization:Ne,responseType:"blob"}},e.next=4,m.a.get("/api/reporttransfer/".concat(a),t);case 4:r=e.sent,Le()(r.data,a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(a){return e.apply(this,arguments)}}()},Be=function(e){return function(){var a=Object(g.a)(f.a.mark((function a(t){var r;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t({type:"SET_LOADING"}),t({type:"CLEAR_CURRENT_REPORT"}),a.next=5,Fe.getAllByDate(e);case 5:r=a.sent,t({type:"GET_ALL_REPORTS_BY_DATE",data:r,date:e}),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),console.log("reportListActions getAllReportsByDate error",a.t0);case 12:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e){return a.apply(this,arguments)}}()},Ye=function(e,a){return function(){var t=Object(g.a)(f.a.mark((function t(r){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r({type:"SET_LOADING"}),r({type:"CLEAR_CURRENT_REPORT"}),t.next=5,Fe.getAllByDateByUser(e,a);case 5:n=t.sent,r({type:"GET_ALL_REPORTS_BY_DATE",data:n,date:e}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log("reportListActions getAllReportsByDateByUser error",t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},Ve=function(e){var a=e.report,t=Object(o.b)(),l=Object(o.c)((function(e){return e.login})),c=Object(r.useState)(!1),i=Object(q.a)(c,2),s=i[0],m=i[1];return n.a.createElement(n.a.Fragment,null,n.a.createElement(z.a.Row,null,n.a.createElement(z.a.Cell,null,n.a.createElement(u.b,{to:"reports/".concat(a.id)},a.name)),n.a.createElement(z.a.Cell,null,Se()(a.program_date).format("DD.MM.YYYY")),n.a.createElement(z.a.Cell,null,a.program_no),n.a.createElement(z.a.Cell,null," ",n.a.createElement(K.a,{color:"red",onClick:function(){return m(!0)},name:"delete"}),n.a.createElement(De.a,{content:"Are you sure you wish to delete ".concat(a.name," ").concat(a.program_date),open:s,onCancel:function(){m(!1)},onConfirm:function(){var e;m(!1);var r={report_id:a.id,user_id:null===(e=l.currentUser)||void 0===e?void 0:e.id};t(function(e){return function(){var a=Object(g.a)(f.a.mark((function a(t){var r;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t({type:"SET_LOADING"}),a.next=4,Fe.deleteReport(e.report_id);case 4:return a.next=6,Fe.getAllInProgress(e.user_id);case 6:r=a.sent,t({type:"GET_ALL_IN_PROGRESS",data:r}),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),console.log(a.t0);case 13:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(e){return a.apply(this,arguments)}}()}(r)),t(j("".concat(a.name," ").concat(a.program_date," poistettu!"),"success"))},cancelButton:"Nope",confirmButton:"Sure"}))))},ze=function(e){var a=e.inProgress;return console.log(a),null===a?null:0===a.length?n.a.createElement(x.a.Column,null,n.a.createElement(p.a,null,n.a.createElement("h3",null,"Reports in progress"),"no reports in progress")):n.a.createElement(n.a.Fragment,null,n.a.createElement(x.a.Column,null,n.a.createElement(p.a,null,n.a.createElement(D.a,null,"Reports in progress"),n.a.createElement(z.a,{striped:!0},n.a.createElement(z.a.Header,null,n.a.createElement(z.a.Row,null,n.a.createElement(z.a.Cell,null,"Program name"),n.a.createElement(z.a.Cell,null,"Date"),n.a.createElement(z.a.Cell,null,"Number"),n.a.createElement(z.a.Cell,null))),n.a.createElement(z.a.Body,null,a.map((function(e){return n.a.createElement(Ve,{key:e.id,report:e})})))))))},He=function(){var e=Object(o.b)(),a=Object(o.c)((function(e){return e.reportList})),t=Object(o.c)((function(e){return e.program})),l=Object(o.c)((function(e){return e.login}));return Object(r.useEffect)((function(){var a,t;e((t=null===(a=l.currentUser)||void 0===a?void 0:a.id,function(){var e=Object(g.a)(f.a.mark((function e(a){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:"SET_LOADING"}),a({type:"CLEAR_CURRENT_REPORT"}),e.next=5,Fe.getAllInProgress(t);case 5:r=e.sent,a({type:"GET_ALL_IN_PROGRESS",data:r}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("reportListActions getAllInProgressReports error",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(a){return e.apply(this,arguments)}}()))}),[l.currentUser]),null===t.activePrograms?n.a.createElement(p.a,null,n.a.createElement(b.a,{active:!0},n.a.createElement(E.a,null,"Loading active programs..."))," "):n.a.createElement(p.a,null,n.a.createElement(x.a,{divided:"vertically"},n.a.createElement(x.a.Row,{columns:2},n.a.createElement(xe,null),n.a.createElement(ze,{inProgress:a.inProgress}))))},Ke=t(689),qe={login:function(){var e=Object(g.a)(f.a.mark((function e(a){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.post("/api/login",a);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()},Je=null,We={getAllActive:function(){var e=Object(g.a)(f.a.mark((function e(){var a,t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:Je}},e.next=3,m.a.get("".concat("/api/programs","/active"),a);case 3:return t=e.sent,e.abrupt("return",t.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getAll:function(){var e=Object(g.a)(f.a.mark((function e(){var a,t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:Je}},e.next=3,m.a.get("".concat("/api/programs","/all"),a);case 3:return t=e.sent,e.abrupt("return",t.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getOne:function(){var e=Object(g.a)(f.a.mark((function e(a){var t,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:Je}},e.next=3,m.a.get("".concat("/api/programs","/getone/").concat(a),t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),createProgram:function(){var e=Object(g.a)(f.a.mark((function e(a){var t,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:Je}},e.next=3,m.a.post("/api/programs",a,t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),updateProgram:function(){var e=Object(g.a)(f.a.mark((function e(a){var t,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:Je}},e.next=3,m.a.put("".concat("/api/programs","/update"),a,t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),mergePrograms:function(){var e=Object(g.a)(f.a.mark((function e(a){var t,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:Je}},e.next=3,m.a.put("".concat("/api/programs","/merge"),a,t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),setToken:function(e){Je="bearer ".concat(e)}},Ze=null,Qe=function(){var e=Object(g.a)(f.a.mark((function e(a){var t,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:Ze}},e.next=3,m.a.post("".concat("/api/tracks","/addandreport"),a,t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),Xe=function(){var e=Object(g.a)(f.a.mark((function e(a){var t,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:Ze}},e.next=3,m.a.post("".concat("/api/tracks","/addtodb"),a,t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),$e=function(){var e=Object(g.a)(f.a.mark((function e(a){var t,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:Ze}},e.next=3,m.a.post("".concat("/api/tracks","/addtracktoalbum"),a,t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),ea=function(){var e=Object(g.a)(f.a.mark((function e(a){var t,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("track to update at service",a),t={headers:{Authorization:Ze}},e.next=4,m.a.put("/api/tracks",a,t);case 4:return r=e.sent,e.abrupt("return",r.data);case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),aa=function(){var e=Object(g.a)(f.a.mark((function e(a){var t,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:Ze}},e.next=3,m.a.put("/api/tracks/updatealbum",a,t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),ta=function(){var e=Object(g.a)(f.a.mark((function e(a){var t,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:Ze}},e.next=3,m.a.put("/api/tracks/updateartist",a,t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),ra={setToken:function(e){Ze="bearer ".concat(e)},addNewTrack:Qe,addTrackToAlbum:$e,updateTrack:ea,getOneTrack:function(){var e=Object(g.a)(f.a.mark((function e(a){var t,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:Ze}},e.next=3,m.a.get("".concat("/api/tracks","/details/").concat(a),t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),getOneTrackHistory:function(){var e=Object(g.a)(f.a.mark((function e(a){var t,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:Ze}},e.next=3,m.a.get("".concat("/api/tracks","/history/").concat(a),t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),updateAlbumId:aa,updateArtistId:ta,addTrackToDb:Xe},na=null,la={getAll:function(){var e=Object(g.a)(f.a.mark((function e(){var a,t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:na}},e.next=3,m.a.get("/api/users",a);case 3:return t=e.sent,e.abrupt("return",t.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),setToken:function(e){na="bearer ".concat(e)},createUser:function(){var e=Object(g.a)(f.a.mark((function e(a){var t,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:na}},e.next=3,m.a.post("/api/users",a,t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),updateUser:function(){var e=Object(g.a)(f.a.mark((function e(a){var t,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:na}},e.next=3,m.a.put("".concat("/api/users","/").concat(a.id),a,t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),deleteUser:function(){var e=Object(g.a)(f.a.mark((function e(a){var t,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:na}},e.next=3,m.a.delete("".concat("/api/users","/").concat(a),t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()},ca=function(){return function(){var e=Object(g.a)(f.a.mark((function e(a){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.localStorage.removeItem("loggedUser"),a({type:"LOGOUT"});case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()},oa=function(){var e=Object(o.b)(),a=Object(r.useState)(""),t=Object(q.a)(a,2),l=t[0],c=t[1],u=Object(r.useState)(""),i=Object(q.a)(u,2),s=i[0],m=i[1];return n.a.createElement("div",null,n.a.createElement("h1",null,"RADIO TRACKLIST REPORTING"),n.a.createElement("h3",null,"Log in"),n.a.createElement(N.a,{onSubmit:function(a){a.preventDefault(),e(function(e){return function(){var a=Object(g.a)(f.a.mark((function a(t){var r;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t({type:"SET_LOADING"}),a.next=4,qe.login(e);case 4:r=a.sent,window.localStorage.setItem("loggedUser",JSON.stringify(r)),t({type:"LOGIN",data:r,loading:!1}),a.next=15;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0),t({type:"SET_NOTIFICATION",data:{message:"wrong username or password",type:"fail"}}),setTimeout((function(){t({type:"CLEAR_NOTIFICATION"})}),3e3);case 15:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e){return a.apply(this,arguments)}}()}({username:l,password:s}))}},n.a.createElement(N.a.Field,{id:"login-username",label:"username",control:Ke.a,type:"text",placeholder:"Username...",onChange:function(e){return c(e.target.value.trim())}}),n.a.createElement(N.a.Field,{id:"login-password",label:"password",control:Ke.a,type:"password",placeholder:"Password...",onChange:function(e){return m(e.target.value.trim())}}),n.a.createElement(I.a,{id:"login-button",color:"green",type:"submit"},"Log in")))},ua=t(701),ia=t(380),sa=t(696),ma=t(114),pa=t.n(ma),da=function(e){var a=e.onSubmit,t=e.onCancel,r=e.user;return n.a.createElement(L.d,{initialValues:{password:"",confirm_password:"",first_name:r.first_name,last_name:r.last_name,email:r.email},onSubmit:a,validate:function(e){var a={};return e.password!==e.confirm_password&&(a.password="Passwords do not match",a.confirm_password="Passwords do not match"),e.email||(a.email="Field is required"),e.first_name||(a.first_name="Field is required"),e.last_name||(a.last_name="Field is required"),a}},(function(e){var a=e.isValid;return n.a.createElement(L.c,{className:"form ui"},n.a.createElement(L.b,{label:"Password - fill out field only if you wish to change the password",placeholder:"Password",name:"password",type:"password",component:U}),n.a.createElement(L.b,{label:"Confirm password",placeholder:"Confirm password",name:"confirm_password",type:"password",component:U}),n.a.createElement(L.b,{label:"First name",placeholder:"First name",name:"first_name",component:P,required:!0}),n.a.createElement(L.b,{label:"Last name",placeholder:"Last name",name:"last_name",component:P}),n.a.createElement(L.b,{label:"Email",placeholder:"Email",name:"email",component:P}),n.a.createElement(x.a,null,n.a.createElement(x.a.Column,{floated:"left",width:5},n.a.createElement(I.a,{type:"button",onClick:t,color:"red"},"Cancel")),n.a.createElement(x.a.Column,{floated:"right",width:5},n.a.createElement(I.a,{type:"submit",floated:"right",color:"green",disabled:!a},"Update"))))}))};!function(e){e[e.DJ=1]="DJ",e[e.Staff=2]="Staff",e[e.Admin=3]="Admin"}(pe||(pe={}));var ba=function(e){return function(){var a=Object(g.a)(f.a.mark((function a(t){var r;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t({type:"SET_LOADING"}),a.next=4,la.updateUser(e);case 4:return a.next=6,la.getAll();case 6:r=a.sent,t({type:"UPDATE_USER",data:r}),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),console.log(a.t0);case 13:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(e){return a.apply(this,arguments)}}()},Ea=function(e){var a=e.currentUser,t=Object(o.b)(),l=Object(r.useState)(!1),c=Object(q.a)(l,2),u=c[0],i=c[1],s=function(){i(!1)};return n.a.createElement(te.a,{trigger:n.a.createElement("span",{role:"menuitem",tabIndex:-8,onClick:function(){i(!0)}},"Edit user info"),closeIcon:!0,open:u,onClose:s},n.a.createElement(D.a,{content:"Edit current user info"}),n.a.createElement(te.a.Content,null,n.a.createElement(da,{user:a,onCancel:s,onSubmit:function(e){try{var r=Object(d.a)({},e,{id:a.id,status:a.status,level:a.level}),n=Object(d.a)({},e,{token:a.token,username:a.username,id:a.id,level:a.level,status:a.status});t(ba(r)),t((l=n,function(){var e=Object(g.a)(f.a.mark((function e(a){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a({type:"UPDATE_CURRENT_USER",data:l});case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}())),t(j("".concat(r.first_name," ").concat(r.last_name," updated!"),"success")),console.log("updating user",r),s()}catch(c){console.error(c.response.data)}var l}})))},va=function(e){var a=e.reportDetails;return a?n.a.createElement("div",{style:{display:"inline",color:"white",float:"right",marginTop:"auto",marginRight:"0.6rem",marginBottom:"0.7rem"}},n.a.createElement(u.b,{to:"/reports/".concat(a.id)},a.program_name," ",n.a.createElement("br",null),Se()(a.program_date).format("DD.MM.YYYY")," ",a.program_start_time.slice(0,-3)," -"," ",a.program_end_time.slice(0,-3))):null},fa=function(e){var a=e.currentUser,t=e.reportDetails,r=Object(o.b)(),l=n.a.createElement("span",null,n.a.createElement(K.a,{color:"pink",name:"user",size:"large"})," ",a.first_name," ",a.last_name),c=[{key:"user",text:n.a.createElement(Ea,{currentUser:a}),icon:"user",onClick:function(){return n.a.createElement(Ea,{currentUser:a})}},{key:"sign-out",text:"Log out",icon:"sign out",onClick:function(){r(ca())}}];return n.a.createElement("div",{style:{marginBottom:"1.5rem"}},n.a.createElement(ua.a,{pointing:!0,stackable:!0,inverted:!0},n.a.createElement(ua.a.Item,{link:!0},n.a.createElement(u.b,{to:"/"},n.a.createElement(ia.a,{alt:"logo",src:pa.a,size:"mini"}))),n.a.createElement(ua.a.Item,{link:!0},n.a.createElement(u.b,{to:"/reports"},n.a.createElement("h4",null,"REPORTS"))),n.a.createElement(ua.a.Item,{link:!0},n.a.createElement(u.b,{to:"/top100"},n.a.createElement("h4",null,"TOP 100"))),n.a.createElement(ua.a.Item,{link:!0},n.a.createElement(u.b,{to:"/search"},n.a.createElement("h4",null,"SEARCH"))),n.a.createElement(ua.a.Item,{link:!0},n.a.createElement(u.b,{to:"/transfer"},n.a.createElement("h4",null,"TRANSFER FILES"))),n.a.createElement(ua.a.Item,{link:!0},n.a.createElement(u.b,{to:"/programs"},n.a.createElement("h4",null,"PROGRAMS"))),n.a.createElement(ua.a.Item,{link:!0},n.a.createElement(u.b,{to:"/users"},n.a.createElement("h4",null,"USERS"))),n.a.createElement(ua.a.Item,{position:"right"},n.a.createElement(sa.a,{trigger:l,options:c,pointing:"top left",icon:null})),n.a.createElement(ua.a.Item,null,n.a.createElement(va,{reportDetails:t}))))},ga=function(e){var a=e.currentUser,t=e.reportDetails,r=Object(o.b)(),l=n.a.createElement("span",null,n.a.createElement(K.a,{color:"pink",name:"user",size:"large"})," ",a.first_name," ",a.last_name),c=[{key:"user",text:n.a.createElement(Ea,{currentUser:a}),icon:"user",onClick:function(){return n.a.createElement(Ea,{currentUser:a})}},{key:"sign-out",text:"Log out",icon:"sign out",onClick:function(){r(ca())}}];return n.a.createElement("div",{style:{marginBottom:"1.5rem"}},n.a.createElement(ua.a,{pointing:!0,stackable:!0,inverted:!0},n.a.createElement(ua.a.Item,{link:!0},n.a.createElement(u.b,{to:"/"},n.a.createElement(ia.a,{alt:"logo",src:pa.a,size:"mini"}))),n.a.createElement(ua.a.Item,{link:!0},n.a.createElement(u.b,{to:"/reports"},n.a.createElement("h4",null,"REPORTS"))),n.a.createElement(ua.a.Item,{link:!0},n.a.createElement(u.b,{to:"/top100"},n.a.createElement("h4",null,"TOP 100"))),n.a.createElement(ua.a.Item,{link:!0},n.a.createElement(u.b,{to:"/search"},n.a.createElement("h4",null,"SEARCH"))),n.a.createElement(ua.a.Item,{link:!0},n.a.createElement(u.b,{to:"/transfer"},n.a.createElement("h4",null,"TRANSFER FILES"))),n.a.createElement(ua.a.Item,{link:!0},n.a.createElement(u.b,{to:"/programs"},n.a.createElement("h4",null,"PROGRAMS"))),n.a.createElement(ua.a.Item,{position:"right"},n.a.createElement(sa.a,{trigger:l,options:c,pointing:"top left",icon:null})),n.a.createElement(ua.a.Item,null,n.a.createElement(va,{reportDetails:t}))))},ha=function(e){var a=e.currentUser,t=e.reportDetails,r=Object(o.b)(),l=n.a.createElement("span",null,n.a.createElement(K.a,{color:"pink",name:"user",size:"large"})," ",a.first_name," ",a.last_name),c=[{key:"user",text:n.a.createElement(Ea,{currentUser:a}),icon:"user",onClick:function(){return n.a.createElement(Ea,{currentUser:a})}},{key:"sign-out",text:"Log out",icon:"sign out",onClick:function(){r(ca())}}];return n.a.createElement("div",{style:{marginBottom:"1.5rem"}},n.a.createElement(ua.a,{pointing:!0,stackable:!0,inverted:!0},n.a.createElement(ua.a.Item,{link:!0},n.a.createElement(u.b,{to:"/"},n.a.createElement(ia.a,{alt:"logo",src:pa.a,size:"mini"}))),n.a.createElement(ua.a.Item,{link:!0},n.a.createElement(u.b,{to:"/reports"},n.a.createElement("h4",null,"REPORTS"))),n.a.createElement(ua.a.Item,{link:!0},n.a.createElement(u.b,{to:"/top100"},n.a.createElement("h4",null,"TOP 100"))),n.a.createElement(ua.a.Item,{link:!0},n.a.createElement(u.b,{to:"/search"},n.a.createElement("h4",null,"SEARCH"))),n.a.createElement(ua.a.Item,{position:"right"},n.a.createElement(sa.a,{trigger:l,options:c,pointing:"top left",icon:null})),n.a.createElement(ua.a.Item,null,n.a.createElement(va,{reportDetails:t}))))},ya=function(){var e,a=Object(o.c)((function(e){return e.login})),t=Object(o.c)((function(e){return e.report}));switch(null===(e=a.currentUser)||void 0===e?void 0:e.level){case 1:return n.a.createElement(ha,{reportDetails:t.reportDetails,currentUser:a.currentUser});case 2:return n.a.createElement(ga,{reportDetails:t.reportDetails,currentUser:a.currentUser});case 3:return n.a.createElement(fa,{reportDetails:t.reportDetails,currentUser:a.currentUser});default:return null}},_a=t(699),ka=function(e){var a=e.notification;return"success"===a.type?n.a.createElement("div",{className:"fixedTop"},n.a.createElement(_a.a,{floating:!0,success:!0,header:a.message})):"fail"===a.type?n.a.createElement("div",{className:"fixedTop"},n.a.createElement(_a.a,{floating:!0,negative:!0,header:a.message})):null},Oa=function(){return function(){var e=Object(g.a)(f.a.mark((function e(a){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:"SET_LOADING"}),e.next=4,We.getAll();case 4:t=e.sent,a({type:"GET_ALL_PROGRAMS",data:t}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("error getting all programs programActions.getAllPrograms",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(a){return e.apply(this,arguments)}}()},Aa=t(705),Ta=[{value:1,label:"Visible"},{value:0,label:"Invisible"}],Ca=[{value:1,label:"Visible"},{value:0,label:"Invisible"}],wa=function(e){var a,t=e.onSubmit,r=e.onCancel,l=e.login,c=e.program;return n.a.createElement(L.d,{initialValues:{id:c.id,name:c.name,identifier:c.identifier,display:c.display||1,site:c.site||1,user_id:null===(a=l.currentUser)||void 0===a?void 0:a.id},onSubmit:t,validate:function(e){var a={};return e.name||(a.name="Field is required"),console.log(e.display),console.log(e.site),a}},(function(e){var a=e.isValid;return n.a.createElement(L.c,{className:"form ui"},n.a.createElement(L.b,{label:"Name",placeholder:"Name",name:"name",component:P}),n.a.createElement(L.b,{label:"Identifier",placeholder:"Identifier",name:"identifier",type:"password",component:P}),n.a.createElement(G,{label:"Display",name:"display",options:Ta}),n.a.createElement(G,{label:"Display on site",name:"site",options:Ca}),n.a.createElement(x.a,null,n.a.createElement(x.a.Column,{floated:"left",width:5},n.a.createElement(I.a,{type:"button",onClick:r,color:"red"},"Cancel")),n.a.createElement(x.a.Column,{floated:"right",width:5},n.a.createElement(I.a,{type:"submit",floated:"right",color:"green",disabled:!a},"Save changes"))))}))},Sa=function(e){var a=e.modalOpen,t=e.onClose,r=e.onSubmit,l=e.error,c=e.program,o=e.login;return n.a.createElement(te.a,{open:a,onClose:t,centered:!1,closeIcon:!0},n.a.createElement(te.a.Header,null,"Edit info of program ",c.name),n.a.createElement(te.a.Content,null,l&&n.a.createElement(Aa.a,{inverted:!0,color:"red"},"Error: ".concat(l)),n.a.createElement(wa,{program:c,login:o,onSubmit:r,onCancel:t})))},Ra=function(e){var a=e.onSubmit,t=e.onCancel,r=e.selectOptions;return n.a.createElement(L.d,{initialValues:{programToMerge:r[0].value},onSubmit:a},(function(e){var a=e.dirty;return n.a.createElement(L.c,{className:"form ui"},n.a.createElement("span",{style:{color:"red"}},n.a.createElement(G,{label:"",name:"programToMerge",options:r})),n.a.createElement(x.a,null,n.a.createElement(x.a.Column,{style:{marginTop:"1rem"},floated:"left",width:5},n.a.createElement(I.a,{type:"button",onClick:t,color:"red"},"Cancel")),n.a.createElement(x.a.Column,{floated:"right",width:5},n.a.createElement(I.a,{type:"submit",floated:"right",color:"green",disabled:!a},"Merge"))))}))},ja=function(e){var a=e.program_id,t=e.program_name,l=Object(o.b)(),c=Object(o.c)((function(e){return e.program})),u=Object(r.useState)(!1),i=Object(q.a)(u,2),s=i[0],m=i[1],p=function(){m(!0)},d=function(){m(!1)};if(!s)return n.a.createElement("button",{type:"button",className:"link-btn",onClick:p},a);var b=c.allPrograms.map((function(e){return{key:e.id,label:"".concat(e.id," - ").concat(e.name),value:e.id}}));return n.a.createElement(te.a,{open:s,closeIcon:!0,onClose:d,trigger:n.a.createElement("button",{type:"button",className:"link-btn",onClick:p},a)},n.a.createElement(D.a,null,"Merge ",a," - ",t," with:"),n.a.createElement(te.a.Content,null,n.a.createElement(Ra,{onSubmit:function(e){console.log(Number(e.programToMerge));var t={type:"program",merge:Number(e.programToMerge),mergeTo:a};console.log(t),l(function(e){return function(){var a=Object(g.a)(f.a.mark((function a(t){var r;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t({type:"SET_LOADING"}),a.next=4,We.mergePrograms(e);case 4:return a.next=6,We.getAll();case 6:r=a.sent,t({type:"GET_ALL_PROGRAMS",data:r}),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),console.log("error merging two programs programActions.mergePrograms",a.t0);case 13:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(e){return a.apply(this,arguments)}}()}(t)),l(j("Ohjelma #".concat(t.merge," yhdistetty!"),"success")),d()},onCancel:d,selectOptions:b})))},xa=function(e){var a,t=e.program,l=Object(o.c)((function(e){return e.login})),c=Object(o.b)(),u=Object(r.useState)(!1),i=Object(q.a)(u,2),s=i[0],m=i[1],p=Object(r.useState)(),d=Object(q.a)(p,2),b=d[0],E=d[1];1===t.display&&(a="active-program");var v=function(){m(!1),E(void 0)};return n.a.createElement(z.a.Row,{className:a},n.a.createElement(z.a.Cell,null,n.a.createElement(ja,{program_id:t.id,program_name:t.name})),n.a.createElement(z.a.Cell,null,n.a.createElement(Sa,{program:t,login:l,modalOpen:s,onSubmit:function(e){try{console.log(e),c((a=e,function(){var e=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"SET_LOADING"}),e.next=4,We.updateProgram(a);case 4:t({type:"UPDATE_PROGRAM",data:a}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("error updating program",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(a){return e.apply(this,arguments)}}())),c(j("".concat(e.name," updated!"),"success")),v()}catch(t){console.error(t.response.data),E(t.response.data.error)}var a},error:b,onClose:v}),n.a.createElement("button",{style:{border:"none",cursor:"pointer",color:"blue"},onClick:function(){return m(!0)}},t.name)),n.a.createElement(z.a.Cell,null,t.identifier))},Da=function(e){var a,t,r=e.login,l=e.program;return null===l.allPrograms||!0===l.loading?n.a.createElement(p.a,null,n.a.createElement(b.a,{active:!0,inverted:!0},n.a.createElement(E.a,{size:"medium"},"Loading programs..."))):2===(null===(a=r.currentUser)||void 0===a?void 0:a.level)||3===(null===(t=r.currentUser)||void 0===t?void 0:t.level)?n.a.createElement(p.a,null,n.a.createElement("div",{style:{marginTop:"1rem",marginBottom:"1rem"}},n.a.createElement("h3",{style:{display:"inline"}},"Programs")),n.a.createElement(z.a,{striped:!0},n.a.createElement(z.a.Header,null,n.a.createElement(z.a.Row,null,n.a.createElement(z.a.Cell,null,"ID"),n.a.createElement(z.a.Cell,null,"Program name"),n.a.createElement(z.a.Cell,null,"Additional info"))),n.a.createElement(z.a.Body,null,l.allPrograms.map((function(e){return n.a.createElement(xa,{program:e,key:e.id})}))))):null},Ia=[{value:1,label:"Visible"},{value:0,label:"Invisible"}],La=[{value:1,label:"Visible"},{value:0,label:"Invisible"}],Na=function(e){var a,t=e.onSubmit,r=e.onCancel,l=e.login;return n.a.createElement(L.d,{initialValues:{name:"",identifier:"",display:1,site:1,user_id:null===(a=l.currentUser)||void 0===a?void 0:a.id},onSubmit:t,validate:function(e){var a={};return e.name||(a.name="Field is required"),console.log(e.display),console.log(e.site),a}},(function(e){var a=e.isValid,t=e.dirty;return n.a.createElement(L.c,{className:"form ui"},n.a.createElement(L.b,{label:"Name",placeholder:"Name",name:"name",component:M}),n.a.createElement(L.b,{label:"Identifier",placeholder:"Identifier",name:"identifier",type:"password",component:P}),n.a.createElement(G,{label:"Display",name:"display",options:Ia}),n.a.createElement(G,{label:"Display on site",name:"site",options:La}),n.a.createElement(x.a,null,n.a.createElement(x.a.Column,{floated:"left",width:5},n.a.createElement(I.a,{type:"button",onClick:r,color:"red"},"Cancel")),n.a.createElement(x.a.Column,{floated:"right",width:5},n.a.createElement(I.a,{type:"submit",floated:"right",color:"green",disabled:!t||!a},"Add"))))}))},Ga=function(e){var a=e.modalOpen,t=e.onClose,r=e.onSubmit,l=e.error,c=e.login;return n.a.createElement(te.a,{open:a,onClose:t,centered:!1,closeIcon:!0},n.a.createElement(te.a.Header,null,"Add a new program"),n.a.createElement(te.a.Content,null,l&&n.a.createElement(Aa.a,{inverted:!0,color:"red"},"Error: ".concat(l)),n.a.createElement(Na,{onSubmit:r,onCancel:t,login:c})))},Pa=function(){var e=Object(o.c)((function(e){return e.program})),a=Object(o.c)((function(e){return e.login})),t=Object(o.b)();Object(r.useEffect)((function(){t(Oa())}),[]);var l=n.a.useState(!1),c=Object(q.a)(l,2),u=c[0],i=c[1],s=n.a.useState(),m=Object(q.a)(s,2),b=m[0],E=m[1],v=function(){i(!1),E(void 0)};return n.a.createElement(p.a,null,n.a.createElement(I.a,{floated:"right",color:"green",style:{marginBottom:"0.5rem"},onClick:function(){return i(!0)}},n.a.createElement(K.a,{name:"add"}),"Create a new program"),n.a.createElement(Ga,{modalOpen:u,onSubmit:function(e){try{var a=Object(d.a)({},e,{display:Number(e.display),site:Number(e.site)});console.log(a),t(function(e){return function(){var a=Object(g.a)(f.a.mark((function a(t){var r;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t({type:"SET_LOADING"}),a.next=4,We.createProgram(e);case 4:r=a.sent,t({type:"CREATE_NEW_PROGRAM",data:r}),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log("error creating new program",a.t0);case 11:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(e){return a.apply(this,arguments)}}()}(a)),console.log("adding program",a),v()}catch(r){console.error(r.response.data),E(r.response.data.error)}},error:b,onClose:v,login:a}),n.a.createElement(Da,{program:e,login:a}))},Ma=t(707),Ua=function(e){var a=e.onSubmit;return console.log(be),n.a.createElement(L.d,{initialValues:{reportYear:"2020",reportMonth:"01"},onSubmit:a},(function(){return n.a.createElement(L.c,{className:"form ui"},n.a.createElement(x.a,null,n.a.createElement(x.a.Column,{width:4},n.a.createElement(G,{label:"Select month",name:"reportMonth",options:oe})),n.a.createElement(x.a.Column,{width:4},n.a.createElement(G,{label:"Select month",name:"reportYear",options:be})),n.a.createElement(x.a.Column,{width:4},n.a.createElement(I.a,{type:"submit",floated:"right",color:"green"},"Get reports"))))}))},Fa=function(e){var a,t,l=e.loginLevel,c=e.report,i=Object(o.b)(),s=Object(r.useState)(!1),m=Object(q.a)(s,2),p=m[0],d=m[1];if(1===c.status)a="Ready";else if(0===c.status)a="In progress";else if(9===c.status)return a="Deleted",null;return 1===c.rerun&&(t="rerun"),1===l&&1===c.rerun?null:n.a.createElement(n.a.Fragment,null,n.a.createElement(z.a.Row,{className:t},n.a.createElement(Ma.a,{as:z.a.Cell,minWidth:768},c.program_no),n.a.createElement(z.a.Cell,null,n.a.createElement(u.b,{className:t,to:"reports/".concat(c.id)},c.name)),n.a.createElement(z.a.Cell,null,Se()(c.program_date).format("DD.MM.YYYY")),n.a.createElement(z.a.Cell,null,c.program_start_time.slice(0,-3)," -"," ",c.program_end_time.slice(0,-3)),n.a.createElement(z.a.Cell,null,a),n.a.createElement(z.a.Cell,null,n.a.createElement(K.a,{style:{color:"red"},name:"delete",onClick:function(){return d(!0)}}),n.a.createElement(De.a,{content:"Haluatko varmasti poistaa raportin ".concat(c.name," ").concat(c.program_date),open:p,onCancel:function(){d(!1)},onConfirm:function(){var e;d(!1),i((e=c.id,function(){var a=Object(g.a)(f.a.mark((function a(t){return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t({type:"SET_LOADING"}),a.next=4,Fe.deleteReport(e);case 4:t({type:"DELETE_REPORT",data:e}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log(a.t0);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}())),i(j("".concat(c.name," ").concat(c.program_date," poistettu!"),"success"))}}))))},Ba=function(){var e=Object(o.c)((function(e){return e.login})),a=Object(o.c)((function(e){return e.reportList}));console.log(a);var t=Object(o.b)();Object(r.useEffect)((function(){var r;1===(null===(r=e.currentUser)||void 0===r?void 0:r.level)?null===a.reportListDate?t(Ye(Se()().format("YYYY-MM"),e.currentUser.id)):t(Ye(a.reportListDate,e.currentUser.id)):null===a.reportListDate?t(Be(Se()().format("YYYY-MM"))):t(Be(a.reportListDate))}),[]);var l,c=function(a){var r;console.log(a);var n="".concat(a.reportYear,"-").concat(a.reportMonth);1===(null===(r=e.currentUser)||void 0===r?void 0:r.level)?t(Ye(n,e.currentUser.id)):t(Be(n))};if(null===a.reportList||a.loading)return n.a.createElement(b.a,{active:!0},n.a.createElement(E.a,{content:"Ladataan..."}));if(0===a.reportList.length)return n.a.createElement(p.a,null,n.a.createElement("h2",null,"No reports in the selected time period"),n.a.createElement(Ua,{onSubmit:c}));l=null===a.reportListDate?Se()().format("MMMM YYYY"):Se()(a.reportListDate).format("MMMM YYYY");var u=a.reportList;return u=0===Number(a.filterByText)?u:u=u.filter((function(e){return e.name.toLowerCase().includes(a.filterByText.toLowerCase())})),u=null===a.filterUserValue?u:u=u.filter((function(e){return e.user_id===a.filterUserValue})),u=null===a.filterStatusValue?u:u=u.filter((function(e){return e.status===a.filterStatusValue})),n.a.createElement(p.a,null,n.a.createElement("h3",null,"Reports ",l),n.a.createElement(Ua,{onSubmit:c}),n.a.createElement(z.a,{striped:!0},n.a.createElement(z.a.Header,null,n.a.createElement(z.a.Row,null,n.a.createElement(Ma.a,{as:z.a.Cell,minWidth:768},"Program number"),n.a.createElement(z.a.Cell,null,"Program name"),n.a.createElement(z.a.Cell,null,"Date"),n.a.createElement(z.a.Cell,null,"Time"),n.a.createElement(z.a.Cell,null,"Status"),n.a.createElement(z.a.Cell,null))),n.a.createElement(z.a.Body,null,u.map((function(a){var t;return n.a.createElement(Fa,{key:a.id,report:a,loginLevel:null===(t=e.currentUser)||void 0===t?void 0:t.level})})))))},Ya=t(378),Va=t(688),za=function(e){var a,t,l=e.track,c=e.report,u=Object(r.useState)(!1),i=Object(q.a)(u,2),s=i[0],m=i[1],p=Object(o.b)();a=(a=Math.floor(l.length/60)).toString(),1===(t=l.length-60*a).toString().length&&(t="0".concat(t.toString())),t=t.toString();return n.a.createElement(z.a.Row,null,n.a.createElement(z.a.Cell,null,n.a.createElement(Va.a,{onChange:function(){var e;m(!s),p(!0===s?(e=l.report_track_id,function(){var a=Object(g.a)(f.a.mark((function a(t){return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:try{t({type:"UNCHECK_FOR_DELETE",data:e})}catch(r){console.log("reportActions unCheckForDelete error",r)}case 1:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()):function(e){return function(){var a=Object(g.a)(f.a.mark((function a(t){return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:try{t({type:"CHECK_FOR_DELETE",data:e})}catch(r){console.log("reportActions checkFordelete error",r)}case 1:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(l.report_track_id))},checked:s}),n.a.createElement(K.a,{style:{marginLeft:"1.5rem",cursor:"pointer"},name:"arrows alternate"})),n.a.createElement(z.a.Cell,null,l.sortable_rank),n.a.createElement(z.a.Cell,null,l.artist_name),n.a.createElement(z.a.Cell,null,l.track_title),n.a.createElement(z.a.Cell,null,a,":",t),n.a.createElement(z.a.Cell,null,n.a.createElement(K.a,{style:{cursor:"pointer"},color:"red",onClick:function(){var e,a=c.report.filter((function(e){return e.report_track_id!==l.report_track_id})),t={report_track_id:l.report_track_id,report_id:(null===(e=c.reportDetails)||void 0===e?void 0:e.id)||0,remainingTracks:a};p(function(e){return function(){var a=Object(g.a)(f.a.mark((function a(t){var r;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t({type:"SET_LOADING"}),a.next=4,Z.deleteTrackFromReport(e.report_track_id);case 4:return a.next=6,Z.getOne(e.report_id);case 6:r=a.sent,t({type:"GET_ONE_REPORT",data:r}),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),console.log("reportActions deleteTrackFromReport error: ",a.t0);case 13:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(e){return a.apply(this,arguments)}}()}(t))},name:"delete"})),n.a.createElement(z.a.Cell,null))},Ha=function(e){var a=e.report;return n.a.createElement(z.a,{striped:!0},n.a.createElement(z.a.Header,null,n.a.createElement(z.a.Row,null,n.a.createElement(z.a.Cell,null),n.a.createElement(z.a.Cell,null,"#"),n.a.createElement(z.a.Cell,null,"Artist"),n.a.createElement(z.a.Cell,null,"Track Title"),n.a.createElement(z.a.Cell,null,"Length"),n.a.createElement(z.a.Cell,null),n.a.createElement(z.a.Cell,null))),n.a.createElement(z.a.Body,null,a.report.map((function(e){return n.a.createElement(za,{key:e.report_track_id,track:e,report:a})}))),n.a.createElement(z.a.Footer,null,n.a.createElement(z.a.Row,null)))},Ka=t(700),qa=t(379),Ja=t(373),Wa=t(374),Za=function(){var e,a=Object(r.useState)(null),t=Object(q.a)(a,2),l=t[0],c=t[1],u=Object(r.useState)(!1),s=Object(q.a)(u,2),m=s[0],p=s[1],d=function(){var e=Object(r.useState)(""),a=Object(q.a)(e,2),t=a[0],n=a[1],l=Object(Ja.a)((function(){return Object(qa.a)(R.getTracksForAutocompleteSearch,400)})),c=Object(Wa.useAsync)(Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=4;break}return e.abrupt("return",[]);case 4:return e.abrupt("return",l(t));case 5:case"end":return e.stop()}}),e)}))),[t]);return{inputText:t,setInputText:n,search:c}}(),b=d.setInputText,E=d.search,v=Object(o.c)((function(e){return e.report})),h=Object(o.b)(),y=function(e,a){var t,r=a.result;console.log(" selected result",r);var n={track_id:r.value,report_id:null===(t=v.reportDetails)||void 0===t?void 0:t.id,length:r.length,sortable_rank:v.report.length+1};c(n)};e=void 0===E.result?[]:E.result.map((function(e){return{key:e.track_id,title:e.track_title,description:"".concat(e.artist,":\n                    ").concat(e.album),length:e.length,value:e.track_id}}));return m?n.a.createElement(i.a,{to:"/search"}):n.a.createElement("div",{style:{marginLeft:"1rem",marginBottom:"1rem"}},n.a.createElement(N.a,null,n.a.createElement(D.a,null,"Search"),n.a.createElement(N.a.Group,null,n.a.createElement(N.a.Field,{width:8},n.a.createElement(Ka.a,{loading:E.loading,onResultSelect:y,onSearchChange:function(e){return b(e.target.value)},onSelectionChange:y,results:e,style:{cursor:"pointer"}})),n.a.createElement(N.a.Field,{width:8},n.a.createElement(I.a,{color:"green",onClick:function(){l?(console.log(l),h(Q(l)),c(null)):h(j("Valitse biisi!","fail"))}},"Add the track to the report"))),n.a.createElement(N.a.Group,null,n.a.createElement(N.a.Field,{width:8}," ",n.a.createElement(I.a,{onClick:function(){p(!0)},color:"blue"},"Advanced search")),n.a.createElement(N.a.Field,{width:6}," "))))},Qa=function(e){var a=e.reportDetails,t=e.onSubmit,r=e.sortable_rank_start,l=[{key:"928",label:"Studio 1",value:"928"},{key:"1047",label:"Studio 2",value:"1047"}];return n.a.createElement(L.d,{initialValues:{studioId:"928",date:Se()(null===a||void 0===a?void 0:a.program_date).format("YYYY-MM-DD"),startTime:(null===a||void 0===a?void 0:a.program_start_time.slice(0,2))||"",endTime:(null===a||void 0===a?void 0:a.program_end_time.slice(0,2))||"",report_id:(null===a||void 0===a?void 0:a.id)||0,sortable_rank_start:r},onSubmit:t},(function(){return n.a.createElement(L.c,{className:"form ui"},n.a.createElement(x.a,null,n.a.createElement(x.a.Column,{width:8},n.a.createElement("label",null,"Select date"),n.a.createElement(Re.a,{name:"date",dateFormat:"dd.MM.yyyy",placeholder:"dd.mm.yyyy"})," "),n.a.createElement(x.a.Column,{width:8},n.a.createElement(G,{label:"Studio",name:"studioId",options:l})),n.a.createElement(x.a.Column,{width:8},n.a.createElement(G,{label:"Starting",name:"startTime",options:le})),n.a.createElement(x.a.Column,{width:8},n.a.createElement(G,{label:"Ending",name:"endTime",options:ce}))),n.a.createElement(I.a,{style:{marginTop:"1rem"},type:"submit",color:"green"},"Get Tracks"))}))},Xa=function(){var e=Object(o.b)(),a=Object(o.c)((function(e){return e.report}));return n.a.createElement(n.a.Fragment,null,n.a.createElement(D.a,null,"Get tracks from playlog"),n.a.createElement(Qa,{onSubmit:function(t){var r,n={studioId:t.studioId,date:Se()(t.date).format("YYYY-MM-DD"),startTime:t.startTime,endTime:t.endTime,report_id:(null===(r=a.reportDetails)||void 0===r?void 0:r.id)||0,sortable_rank_start:a.report.length};console.log("get playlog params",n),e(function(e){return function(){var a=Object(g.a)(f.a.mark((function a(t){var r;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t({type:"SET_LOADING"}),a.next=4,Z.checkPlaylogTracks(e);case 4:r=a.sent,console.log("returnArray at report action",r),t({type:"GET_PLAYLOG_TRACKS",data:r}),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0);case 12:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e){return a.apply(this,arguments)}}()}(n))},reportDetails:a.reportDetails,sortable_rank_start:a.report.length}))},$a=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(D.a,null,"Add a track to the report:"),n.a.createElement(Aa.a.Group,{horizontal:!0},n.a.createElement(Aa.a,null,n.a.createElement(Za,null)),n.a.createElement(Aa.a,null,n.a.createElement(Xa,null))))},et=function(e){var a=e.onSubmit,t=e.programOptions,r=e.userOptions,l=e.reportDetails;return n.a.createElement(x.a,{divided:"vertically"},n.a.createElement(x.a.Row,{columns:2},n.a.createElement(x.a.Column,null,n.a.createElement(D.a,null,"Raportin tiedot:"),n.a.createElement(L.d,{initialValues:{id:l.id,program_name:l.program_name,program_no:l.program_no,program_dj:l.program_dj,program_date:Se()(l.program_date).format("YYYY-MM-DD"),program_start_time:l.program_start_time,program_end_time:l.program_end_time,program_id:l.program_id,rerun:l.rerun,status:l.status,user_id:l.user_id,username:l.username,first_name:l.first_name,last_name:l.last_name},onSubmit:a,validate:function(e){console.log(e);var a={};return e.program_dj||(a.name="Field is required"),void 0===e.program_start_time&&(a.name="Field is required"),void 0===e.program_end_time&&(a.name="Field is required"),a}},(function(e){var a=e.isValid;return n.a.createElement(L.c,{className:"form ui"},n.a.createElement(G,{label:"Program",name:"program_id",options:t}),n.a.createElement(L.b,{label:"Program number",name:"program_no",component:B,min:0,max:999}),n.a.createElement(L.b,{label:"DJ",placeholder:"DJ",name:"program_dj",component:P}),n.a.createElement(x.a,null,n.a.createElement(x.a.Column,{width:5},n.a.createElement("label",null,"Program date"),n.a.createElement(Re.a,{name:"program_date",dateFormat:"dd.MM.yyyy",placeholder:"dd.mm.yyyy"})," "),n.a.createElement(x.a.Column,{width:5},n.a.createElement(G,{label:"Start time",name:"program_start_time",options:le})),n.a.createElement(x.a.Column,{width:5},n.a.createElement(G,{label:"End time",name:"program_end_time",options:ce}))),n.a.createElement(G,{label:"Report status",name:"status",options:ue}),n.a.createElement(G,{label:"User",name:"user_id",options:r}),n.a.createElement(I.a,{style:{marginTop:"1rem"},type:"submit",floated:"left",color:"green",disabled:!a},"Save changes"))})))))},at=function(){var e=Object(o.b)(),a=Object(o.c)((function(e){return e.report})),t=Object(o.c)((function(e){return e.user})),r=Object(o.c)((function(e){return e.program}));Object(o.c)((function(e){return e.login}));if(null===a.reportDetails||null===t.users||null===r.allPrograms)return n.a.createElement(Aa.a,null,n.a.createElement("div",null,"loading..."));var l=r.allPrograms.map((function(e){return{key:e.id,label:e.name,value:e.id}})),c=t.users.map((function(e){return{key:e.id,label:"".concat(e.first_name," ").concat(e.last_name),value:e.id}}));return n.a.createElement("div",null,n.a.createElement(et,{reportDetails:a.reportDetails,onSubmit:function(a){var t;console.log(a),e((t=a,function(){var e=Object(g.a)(f.a.mark((function e(a){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:"SET_LOADING"}),e.next=4,Z.updateReport(t);case 4:a({type:"UPDATE_REPORT",data:t}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("reportActions updateReport error:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(a){return e.apply(this,arguments)}}())),e(j("Report details updated","success"))},programOptions:l,userOptions:c}))},tt=function(e){var a,t,l=e.id,c=Object(o.b)(),u=Object(o.c)((function(e){return e.report})),i=Object(o.c)((function(e){return e.login})),s=Object(r.useState)(u.report),m=Object(q.a)(s,2),b=m[0],E=m[1];Object(r.useEffect)((function(){c(function(e){return function(){var a=Object(g.a)(f.a.mark((function a(t){var r,n;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t({type:"SET_LOADING"}),a.next=4,Z.getReportDetails(e);case 4:r=a.sent,n=r[0],t({type:"GET_REPORT_DETAILS",data:n,id:e}),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),console.log("reportActions getReportDetails error",a.t0);case 12:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e){return a.apply(this,arguments)}}()}(l)),c(function(e){return function(){var a=Object(g.a)(f.a.mark((function a(t){var r;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t({type:"SET_LOADING"}),a.next=4,Z.getOne(e);case 4:r=a.sent,t({type:"GET_ONE_REPORT",data:r,id:e}),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log("reportActions getOneReport error:",a.t0);case 11:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(e){return a.apply(this,arguments)}}()}(l))}),[u.playlog]),Object(r.useEffect)((function(){var e;c((e=b,function(){var a=Object(g.a)(f.a.mark((function a(t){var r;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t({type:"SET_LOADING"}),a.next=4,Z.updateSortableRank(e);case 4:r=[],e.forEach((function(e,a){var t=Object(d.a)({},e,{sortable_rank:a+1});r.push(t)})),t({type:"GET_ONE_REPORT",data:r}),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0);case 12:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e){return a.apply(this,arguments)}}()))}),[b]);var v=n.a.createElement(I.a,{color:"red",onClick:function(){var e=u.report.filter((function(e){return!u.checkedForDelete.includes(e.report_track_id)}));c(function(e,a,t){return function(){var r=Object(g.a)(f.a.mark((function r(n){var l;return f.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,n({type:"SET_LOADING"}),console.log("function fired"),e.forEach(function(){var e=Object(g.a)(f.a.mark((function e(a){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.deleteTrackFromReport(a);case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()),r.next=6,Z.updateSortableRank(t);case 6:return r.next=8,Z.getOne(Number(a));case 8:l=r.sent,console.log(l),n({type:"GET_ONE_REPORT",data:t}),n({type:"CLEAR_CHECKED_FOR_DELETE"}),r.next=17;break;case 14:r.prev=14,r.t0=r.catch(0),console.log("reportActions deleteChecked error:",r.t0);case 17:case"end":return r.stop()}}),r,null,[[0,14]])})));return function(e){return r.apply(this,arguments)}}()}(u.checkedForDelete,l,e))},style:{marginLeft:"1rem",marginBottom:"1rem",marginTop:"1rem"}},"Poista valitut"),h=u.report,y={onDragEnd:function(e,a){var t=h.splice(e,1)[0];h.splice(a,0,t),E(h)},nodeSelector:"tr",handleSelector:"i.arrows"};return 1===(null===(a=i.currentUser)||void 0===a?void 0:a.level)&&i.currentUser.id!==(null===(t=u.reportDetails)||void 0===t?void 0:t.user_id)?null:0===u.report.length?n.a.createElement(p.a,null,n.a.createElement(D.a,null,"Report"),n.a.createElement("div",null,"No tracks added. Please add tracks from below"),n.a.createElement($a,null),n.a.createElement(at,null)):n.a.createElement(p.a,null,n.a.createElement(D.a,null,"Report"),n.a.createElement(Ya.a,y,n.a.createElement(Ha,{report:u})),v,n.a.createElement($a,null),n.a.createElement(at,null))},rt=function(){var e=Object(o.b)(),a=[{key:1,label:"Tracks",value:"tr"},{key:2,label:"Artists",value:"ar"},{key:3,label:"Albums",value:"al"}];return n.a.createElement(x.a,{columns:2},n.a.createElement(x.a.Column,null,n.a.createElement(L.d,{initialValues:{query:"",kind:"ar"},onSubmit:function(a){var t;e((t=a,function(){var e=Object(g.a)(f.a.mark((function e(a){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:"SET_SEARCH_LOADING"}),e.next=4,R.advancedSearch(t);case 4:r=e.sent,a({type:"ADVANCED_RESULTS",data:r}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("searchActions error getting advanced results",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(a){return e.apply(this,arguments)}}()))}},(function(){return n.a.createElement(L.c,{className:"form ui"},n.a.createElement(x.a,null,n.a.createElement(x.a.Column,{width:8},n.a.createElement(L.b,{label:"Search query",placeholder:"Artist, album, track...",name:"query",component:P})),n.a.createElement(x.a.Column,{width:8},n.a.createElement(G,{label:"Search for",name:"kind",options:a})),n.a.createElement(x.a.Column,{width:8},n.a.createElement(I.a,{type:"submit"},"Search"))))}))))},nt=function(e){var a=e.result;return null===a?null:n.a.createElement(z.a.Row,null,n.a.createElement(z.a.Cell,null,n.a.createElement(u.b,{to:"../artist/".concat(a.artist_id)},a.artist_name)),n.a.createElement(z.a.Cell,null,n.a.createElement(u.b,{to:"../album/".concat(a.album_id)},a.album_name)),n.a.createElement(z.a.Cell,null,n.a.createElement(u.b,{to:"../track/".concat(a.track_id)},a.track_title)),n.a.createElement(z.a.Cell,null,n.a.createElement(u.b,{to:"../reports/".concat(a.report_id)},a.program_date)),n.a.createElement(z.a.Cell,null,n.a.createElement($,{track_title:a.track_title,track_id:a.track_id,length:a.length})))},lt=function(){var e=Object(o.b)(),a=Object(r.useState)(1),t=Object(q.a)(a,2),l=t[0],c=t[1];Object(r.useEffect)((function(){e(function(e){return function(){var a=Object(g.a)(f.a.mark((function a(t){return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:try{t({type:"SORT_ADVANCED_RESULTS",data:e})}catch(r){console.log("searchActions error sorting advanced results",r)}case 1:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(l))}),[l]);var u=[{key:1,label:"Track title",value:1},{key:2,label:"Artist name",value:2}];return n.a.createElement(x.a,{columns:4},n.a.createElement(x.a.Column,null,n.a.createElement(L.d,{initialValues:{sortBy:1},onSubmit:function(e){c(e.sortBy)},validate:function(e){c(Number(e.sortBy))}},(function(){return n.a.createElement(L.c,{className:"form ui"},n.a.createElement(G,{label:"Sort by",name:"sortBy",options:u}))}))))},ct=function(e){var a=e.search;if(0===a.advancedResults.length)return n.a.createElement("div",null,"no results. please enter a query");if(!0===a.loading)return n.a.createElement(b.a,{active:!0},n.a.createElement(E.a,null,"Loading results..."));var t=a.advancedResults;return t=2===a.sortAdvancedResults?t:t.sort((function(e,a){return e.track_title>a.track_title?1:a.track_title>e.track_title?-1:0})),t=1===a.sortAdvancedResults?t:t.sort((function(e,a){return e.artist_name>a.artist_name?1:a.artist_name>e.artist_name?-1:0})),n.a.createElement("div",{style:{marginTop:"2rem"}},n.a.createElement(lt,null),n.a.createElement(z.a,{striped:!0},n.a.createElement(z.a.Header,null,n.a.createElement(z.a.Row,null,n.a.createElement(z.a.Cell,null,"Artist"),n.a.createElement(z.a.Cell,null,"Album"),n.a.createElement(z.a.Cell,null,"Track"),n.a.createElement(z.a.Cell,null,"Latest play on"),n.a.createElement(z.a.Cell,null))),n.a.createElement(z.a.Body,null,t.map((function(e){return n.a.createElement(nt,{key:e.track_id,result:e})})))))},ot=function(e){var a=e.onSubmit,t=e.onCancel;e.error;return n.a.createElement(L.d,{initialValues:{track_title:"",artist_name:"",album_name:"",label:"",cat_id:"",year:"",disc_no:1,track_no:1,minutes:0,seconds:0,country:0,record_country:"",people:"",comment:"",isrc:""},onSubmit:a,validate:function(e){console.log(e);var a={};return e.track_title&&""!==e.track_title||(a.track_title="Field is required"),e.album_name&&""!==e.album_name||(a.album_name="Field is required"),e.artist_name&&""!==e.artist_name||(a.artist_name="Field is required"),a}},(function(e){var a=e.isValid,r=e.dirty;return n.a.createElement(L.c,{className:"form ui"},n.a.createElement(L.b,{label:"Artist",placeholder:"Artist",name:"artist_name",component:M}),n.a.createElement(L.b,{label:"Album",placeholder:"Album",name:"album_name",component:M}),n.a.createElement(L.b,{label:"Track title",placeholder:"Track title...",name:"track_title",component:M}),n.a.createElement(x.a,null,n.a.createElement(x.a.Column,{width:8},n.a.createElement(L.b,{label:"Length - minutes",name:"minutes",component:B,min:0,max:999})),n.a.createElement(x.a.Column,{width:8},n.a.createElement(L.b,{label:"Length - seconds",name:"seconds",component:B,min:0,max:59}))),n.a.createElement(x.a,null,n.a.createElement(x.a.Column,{width:8},n.a.createElement(L.b,{label:"Track #",name:"track_no",component:B,min:0,max:999})),n.a.createElement(x.a.Column,{width:8},n.a.createElement(L.b,{label:"Disc #",name:"disc_no",component:B,min:0,max:99})),n.a.createElement(x.a.Column,{width:8},n.a.createElement(G,{label:"Country",name:"country",options:ne})),n.a.createElement(x.a.Column,{width:8},n.a.createElement(G,{label:"Recorded in",name:"record_country",options:re}))),n.a.createElement(L.b,{label:"Composers - one per line",placeholder:"LAST NAME FIRST NAME",name:"people",component:Y}),n.a.createElement(L.b,{label:"Year",name:"year",component:B,min:1900,max:2900}),n.a.createElement(L.b,{label:"Spotify id",placeholder:"Spotify id",name:"spotify_id",component:P}),n.a.createElement(L.b,{label:"Comment",placeholder:"Any additional information",name:"comment",component:P}),n.a.createElement(I.a,{type:"submit",floated:"left",color:"green",disabled:!a||!r},"Add"),n.a.createElement(I.a,{floated:"right",style:{marginBottom:"1rem"},type:"button",onClick:t,color:"red"},"Cancel"))}))},ut=function(){var e=Object(r.useState)(!1),a=Object(q.a)(e,2),t=a[0],l=a[1],c=Object(r.useState)(),o=Object(q.a)(c,2),u=o[0],i=o[1],s=function(){l(!1),i(void 0)};return n.a.createElement(n.a.Fragment,null,n.a.createElement(I.a,{floated:"right",color:"green",style:{marginBottom:"0.5rem"},onClick:function(){return l(!0)}},n.a.createElement(K.a,{name:"add"}),"Add a new track"),n.a.createElement(te.a,{open:t,onClose:s,centered:!1,closeIcon:!0},n.a.createElement(te.a.Header,null,"Add a new program"),n.a.createElement(te.a.Content,null,u&&n.a.createElement(Aa.a,{inverted:!0,color:"red"},"Error: ".concat(u)),n.a.createElement(ot,{onSubmit:function(e){console.log(e)},onCancel:s}))))},it=function(){var e=Object(o.c)((function(e){return e.search}));return n.a.createElement(p.a,null,n.a.createElement(D.a,null,"Search"),n.a.createElement(ut,null),n.a.createElement(rt,null),n.a.createElement(ct,{search:e}))},st=[{key:1,value:"artist_id",label:"Artists"},{key:2,value:"track_id",label:"Tracks"},{key:3,value:"album_id",label:"Albums"}],mt=function(e){var a=e.onSubmit;return n.a.createElement(L.d,{initialValues:{list:"artist_id",start_date:Se()(Date.now()-6048e5).format("YYYY-MM-DD"),end_date:Se()(new Date).format("YYYY-MM-DD")},onSubmit:a},(function(){return n.a.createElement(L.c,{className:"form ui"},n.a.createElement(x.a,null,n.a.createElement(x.a.Column,{width:2},n.a.createElement(G,{label:"Get",name:"list",options:st})),n.a.createElement(x.a.Column,{width:4},n.a.createElement("label",null,"starting"),n.a.createElement(Re.a,{name:"start_date",dateFormat:"dd.MM.yyyy",placeholder:"dd.mm.yyyy"})),n.a.createElement(x.a.Column,{width:4},n.a.createElement("label",null,"ending"),n.a.createElement(Re.a,{name:"end_date",dateFormat:"dd.MM.yyyy",placeholder:"dd.mm.yyyy"})," ")),n.a.createElement(I.a,{type:"submit",color:"green"},"Submit"))}))},pt=function(e){var a=e.top100;return n.a.createElement(z.a,{striped:!0},n.a.createElement(z.a.Header,null,n.a.createElement(z.a.Row,null,n.a.createElement(z.a.Cell,null,"Artist"),n.a.createElement(z.a.Cell,null,"Play count"))),n.a.createElement(z.a.Body,null,a.map((function(e){return n.a.createElement(z.a.Row,{key:e.track_id},n.a.createElement(z.a.Cell,null,n.a.createElement(u.b,{to:"/artist/".concat(e.artist_id)},e.artist)),n.a.createElement(z.a.Cell,null,e.count))}))))},dt=function(e){var a=e.top100;return n.a.createElement(z.a,{striped:!0},n.a.createElement(z.a.Header,null,n.a.createElement(z.a.Row,null,n.a.createElement(z.a.Cell,null,"Artist"),n.a.createElement(z.a.Cell,null,"Album"),n.a.createElement(z.a.Cell,null,"Play count"))),n.a.createElement(z.a.Body,null,a.map((function(e){return n.a.createElement(z.a.Row,{key:e.track_id},n.a.createElement(z.a.Cell,null,n.a.createElement(u.b,{to:"/artist/".concat(e.artist_id)},e.artist)),n.a.createElement(z.a.Cell,null,n.a.createElement(u.b,{to:"/album/".concat(e.album_id)},e.album)),n.a.createElement(z.a.Cell,null,e.count))}))))},bt=function(e){var a=e.top100;return n.a.createElement(z.a,{striped:!0},n.a.createElement(z.a.Header,null,n.a.createElement(z.a.Row,null,n.a.createElement(z.a.Cell,null,"Artist"),n.a.createElement(z.a.Cell,null,"Album"),n.a.createElement(z.a.Cell,null,"Track"),n.a.createElement(z.a.Cell,null,"Play count"),n.a.createElement(z.a.Cell,null))),n.a.createElement(z.a.Body,null,a.map((function(e){return n.a.createElement(z.a.Row,{key:e.track_id},n.a.createElement(z.a.Cell,null,n.a.createElement(u.b,{to:"/artist/".concat(e.artist_id)},e.artist)),n.a.createElement(z.a.Cell,null,n.a.createElement(u.b,{to:"/album/".concat(e.album_id)},e.album)),n.a.createElement(z.a.Cell,null,n.a.createElement(u.b,{to:"/track/".concat(e.track_id)},e.track_title)),n.a.createElement(z.a.Cell,null,e.count),n.a.createElement(z.a.Cell,null,n.a.createElement($,{track_title:e.track_title,track_id:e.track_id,length:e.length})))}))))},Et=function(){var e=Object(o.c)((function(e){return e.search})),a=Object(o.b)(),t=function(e){console.log(e);var t,r=Object(d.a)({},e,{end_date:Se()(new Date).format("YYYY-MM-DD")});console.log(r),a((t=r,function(){var e=Object(g.a)(f.a.mark((function e(a){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:"SET_SEARCH_LOADING"}),e.next=4,R.getTop100(t);case 4:r=e.sent,a({type:"TOP_100",data:r,query:t}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("searchActions error getting top100 results",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(a){return e.apply(this,arguments)}}()))};return console.log(e),null===e.top100Query?n.a.createElement(p.a,null,n.a.createElement("h3",{style:{display:"inline"}},"Top 100"),n.a.createElement("p",null,"Get the top 100 most played tracks, albums or artists within a time period."),n.a.createElement(mt,{onSubmit:t})):e.loading?n.a.createElement(p.a,null,n.a.createElement("h1",null,"Top 100"),n.a.createElement(mt,{onSubmit:t}),n.a.createElement("div",null,"Loading")):"artist_id"===e.top100Query.list?n.a.createElement(p.a,null,n.a.createElement("h3",{style:{display:"inline"}},"Top 100"),n.a.createElement("p",null,"Get the top 100 most played tracks, albums or artists within a time period."),n.a.createElement(mt,{onSubmit:t}),n.a.createElement(pt,{top100:e.top100})):"album_id"===e.top100Query.list?n.a.createElement(p.a,null,n.a.createElement("h3",{style:{display:"inline"}},"Top 100"),n.a.createElement("p",null,"Get the top 100 most played tracks, albums or artists within a time period."),n.a.createElement(mt,{onSubmit:t}),n.a.createElement(dt,{top100:e.top100})):"track_id"===e.top100Query.list?n.a.createElement(p.a,null,n.a.createElement("h3",{style:{display:"inline"}},"Top 100"),n.a.createElement("p",null,"Get the top 100 most played tracks, albums or artists within a time period."),n.a.createElement(mt,{onSubmit:t}),n.a.createElement(bt,{top100:e.top100})):null},vt=function(e){var a,t=e.currentTrack,r=e.onSubmit;if(null===t)return n.a.createElement(b.a,null,n.a.createElement(E.a,null,"Loading track details..."));var l="";return t.people&&(l=t.people.replace(/\| /,"").replace(/\| /g,"\n").replace(/ \|/,"")),console.log("current track at track details form",t),n.a.createElement(x.a,{columns:2},n.a.createElement(x.a.Column,null,n.a.createElement(D.a,null,"Track details"),n.a.createElement(L.d,{initialValues:{artist:t.artist,album:t.album,track_title:t.track_title,track_id:t.track_id,length:t.length,minutes:Math.floor(t.length/60),seconds:t.length%60,country:t.country||0,record_country:t.record_country,people:l||"",disc_no:t.disc_no||1,track_no:t.track_no,year:Number(null===(a=t.year)||void 0===a?void 0:a.substring(0,4))||"",label:t.label,cat_id:t.cat_id,isrc:t.isrc,comment:t.comment||"",user_id:null,artist_id:t.artist_id,album_id:t.album_id,sortable_rank:null,report_track_id:null},onSubmit:r,validate:function(e){console.log(e);var a={};return e.track_title||(a.name="Album name is required"),a}},(function(e){var a=e.isValid;return n.a.createElement(L.c,{className:"form ui"},n.a.createElement(L.b,{label:"Artist",placeholder:"Artist",name:"artist",component:P}),n.a.createElement(L.b,{label:"Album",placeholder:"Album",name:"album",component:P}),n.a.createElement(L.b,{label:"Track title",placeholder:"Track title...",name:"track_title",component:P}),n.a.createElement(x.a,null,n.a.createElement(x.a.Column,{width:8},n.a.createElement(L.b,{label:"Length - minutes",name:"minutes",component:B,min:0,max:999})),n.a.createElement(x.a.Column,{width:8},n.a.createElement(L.b,{label:"Length - seconds",name:"seconds",component:B,min:0,max:59}))),n.a.createElement(x.a,null,n.a.createElement(x.a.Column,{width:8},n.a.createElement(L.b,{label:"Track #",name:"track_no",component:B,min:0,max:999})),n.a.createElement(x.a.Column,{width:8},n.a.createElement(L.b,{label:"Disc #",name:"disc_no",component:B,min:0,max:99})),n.a.createElement(x.a.Column,{width:8},n.a.createElement(G,{label:"Country",name:"country",options:ne})),n.a.createElement(x.a.Column,{width:8},n.a.createElement(G,{label:"Recorded in",name:"record_country",options:re}))),n.a.createElement(L.b,{label:"Composers - one per line",placeholder:"LAST NAME FIRST NAME",name:"people",component:Y}),n.a.createElement(L.b,{label:"Year",name:"year",component:B,min:1900,max:2900}),n.a.createElement(L.b,{label:"Spotify id",placeholder:"Spotify id",name:"spotify_id",component:P}),n.a.createElement(L.b,{label:"Comment",placeholder:"Any additional information",name:"comment",component:P}),n.a.createElement(I.a,{type:"submit",floated:"left",color:"green",disabled:!a},"Update track"))}))))},ft=function(e){var a=e.pgm;return n.a.createElement(z.a.Row,null,n.a.createElement(z.a.Cell,null,a.program_date),n.a.createElement(z.a.Cell,null,n.a.createElement(u.b,{to:"/reports/".concat(a.report_id)},a.program_name)))},gt=function(e){var a=e.playHistory;return 0===a.length?n.a.createElement(b.a,null,n.a.createElement(E.a,null,"Ladataan...")):"No plays yet"===a[0].result?n.a.createElement(n.a.Fragment,null,n.a.createElement("h4",null,"Soittohistoria"),n.a.createElement("p",null,"Ei soittoja")):n.a.createElement(n.a.Fragment,null,n.a.createElement("h4",null,"Play history"),n.a.createElement(z.a,{striped:!0},n.a.createElement(z.a.Header,null,n.a.createElement(z.a.Row,null,n.a.createElement(z.a.Cell,null,"Date"),n.a.createElement(z.a.Cell,null,"Program"))),n.a.createElement(z.a.Body,null,a.map((function(e){return n.a.createElement(ft,{key:e.report_id,pgm:e})})))))},ht=function(e){var a=e.id,t=Object(o.b)(),l=Object(o.c)((function(e){return e.track})),c=Object(o.c)((function(e){return e.login}));Object(o.c)((function(e){return e.report}));if(Object(r.useEffect)((function(){t(function(e){return function(){var a=Object(g.a)(f.a.mark((function a(t){var r;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t({type:"SET_LOADING"}),a.next=4,ra.getOneTrack(e);case 4:r=a.sent,t({type:"GET_ONE_TRACK",data:r}),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log("trackActions getoneTrack error: ",a.t0);case 11:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(e){return a.apply(this,arguments)}}()}(a)),t(function(e){return function(){var a=Object(g.a)(f.a.mark((function a(t){var r;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t({type:"CLEAR_CURRENT_TRACK"}),t({type:"SET_LOADING"}),a.next=5,ra.getOneTrackHistory(e);case 5:r=a.sent,t({type:"GET_ONE_TRACK_HISTORY",data:r}),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),console.log("trackActions getOneTrackHistory error: ",a.t0);case 12:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e){return a.apply(this,arguments)}}()}(a))}),[]),null===l.currentTrack||0===l.playHistory.length)return n.a.createElement(p.a,null,n.a.createElement(b.a,null,n.a.createElement(E.a,null,"Ladataan...")));return n.a.createElement(p.a,null,n.a.createElement(vt,{onSubmit:function(e){var a,r,n;n=e.people?"| ".concat(e.people.replace(/\n/g," | ")," |"):null;var l={artist_name:e.artist,album_name:e.album,track_title:e.track_title,track_id:e.track_id,length:60*e.minutes+e.seconds,country:e.country,record_country:e.record_country,people:n,disc_no:e.disc_no,track_no:e.track_no,year:null===(a=e.year)||void 0===a?void 0:a.toString(),label:e.label,cat_id:e.cat_id,isrc:e.isrc,comment:e.comment,user_id:null===(r=c.currentUser)||void 0===r?void 0:r.id,artist_id:e.artist_id,album_id:e.album_id,sortable_rank:null,report_track_id:null};console.log("track to update",l),t(function(e){return function(){var a=Object(g.a)(f.a.mark((function a(t){return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t({type:"SET_LOADING"}),console.log("track to update at action",e),a.next=5,ra.updateTrack(e);case 5:t({type:"UPDATE_TRACK",data:e}),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log("trackActions updateTrack error: ",a.t0);case 11:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(e){return a.apply(this,arguments)}}()}(l)),t(j("Track ".concat(e.track_title," updated!"),"success"))},currentTrack:l.currentTrack}),n.a.createElement(gt,{playHistory:l.playHistory}))},yt=[{value:pe.DJ,label:"DJ"},{value:pe.Staff,label:"Staff"},{value:pe.Admin,label:"Admin"}],_t=[{value:1,label:"Active"},{value:0,label:"Inactive"}],kt=function(e){var a=e.onSubmit,t=e.onCancel,r=e.user;return n.a.createElement(L.d,{initialValues:{password:"",confirm_password:"",first_name:r.first_name,last_name:r.last_name,email:r.email,level:r.level,status:r.status},onSubmit:a,validate:function(e){var a={};return e.password!==e.confirm_password&&(a.password="Passwords do not match",a.confirm_password="Passwords do not match"),e.email||(a.email="Field is required"),e.first_name||(a.first_name="Field is required"),e.last_name||(a.last_name="Field is required"),a}},(function(e){var a=e.isValid;return n.a.createElement(L.c,{className:"form ui"},n.a.createElement(L.b,{label:"Password - fill out field only if you wish to change the password",placeholder:"Password",name:"password",type:"password",component:U}),n.a.createElement(L.b,{label:"Confirm password",placeholder:"Confirm password",name:"confirm_password",type:"password",component:U}),n.a.createElement(L.b,{label:"First name",placeholder:"First name",name:"first_name",component:P,required:!0}),n.a.createElement(L.b,{label:"Last name",placeholder:"Last name",name:"last_name",component:P}),n.a.createElement(L.b,{label:"Email",placeholder:"Email",name:"email",component:P}),n.a.createElement(G,{label:"Level",name:"level",options:yt}),n.a.createElement(G,{label:"Status",name:"status",options:_t}),n.a.createElement(x.a,null,n.a.createElement(x.a.Column,{floated:"left",width:5},n.a.createElement(I.a,{type:"button",onClick:t,color:"red"},"Cancel")),n.a.createElement(x.a.Column,{floated:"right",width:5},n.a.createElement(I.a,{type:"submit",floated:"right",color:"green",disabled:!a},"Update"))))}))},Ot=function(e){var a=e.modalOpen,t=e.onClose,r=e.onSubmit,l=e.error,c=e.user;return n.a.createElement(te.a,{open:a,onClose:t,centered:!1,closeIcon:!0},n.a.createElement(te.a.Header,null,"Edit info of user ",c.username),n.a.createElement(te.a.Content,null,l&&n.a.createElement(Aa.a,{inverted:!0,color:"red"},"Error: ".concat(l)),n.a.createElement(kt,{user:c,onSubmit:r,onCancel:t})))},At=function(e){var a,t,l,c=e.user,u=Object(o.b)(),i=Object(r.useState)(!1),s=Object(q.a)(i,2),m=s[0],p=s[1],b=Object(r.useState)(!1),E=Object(q.a)(b,2),v=E[0],h=E[1],y=Object(r.useState)(),_=Object(q.a)(y,2),k=_[0],O=_[1],A=function(){h(!1),O(void 0)};return a=1===c.level?"DJ":2===c.level?"Staff":"Admin",null===c.status||0===c.status?(l="Inactive",t="inactive-user"):1===c.status&&(l="Active",t="active-user"),n.a.createElement(z.a.Row,null,n.a.createElement(z.a.Cell,null,n.a.createElement(Ot,{user:c,modalOpen:v,onSubmit:function(e){try{var a=Object(d.a)({},e,{id:c.id});u(ba(a)),u(j("".concat(a.first_name," ").concat(a.last_name," updated!"),"success")),console.log("updating user",a),A()}catch(t){console.error(t.response.data),O(t.response.data.error)}},error:k,onClose:A}),n.a.createElement("button",{style:{border:"none",cursor:"pointer",color:"blue"},onClick:function(){return h(!0)}},c.username)),n.a.createElement(z.a.Cell,null,c.first_name," ",c.last_name),n.a.createElement(z.a.Cell,null,c.last_seen),n.a.createElement(z.a.Cell,{className:t},l),n.a.createElement(z.a.Cell,null,a),n.a.createElement(z.a.Cell,null,n.a.createElement(K.a,{color:"red",onClick:function(){return p(!0)},name:"delete"}),n.a.createElement(De.a,{content:"Are you sure you wish to delete user ".concat(c.username,"?"),open:m,onCancel:function(){p(!1)},onConfirm:function(){var e;p(!1),u((e=c.id,function(){var a=Object(g.a)(f.a.mark((function a(t){return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t({type:"SET_LOADING"}),t({type:"DELETE_USER",data:e}),a.next=5,la.deleteUser(e);case 5:a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log(a.t0);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()))},cancelButton:"Cancel delete",confirmButton:"Confirm delete"})))},Tt=function(e){var a=e.users;return n.a.createElement(p.a,null,n.a.createElement("div",{style:{marginTop:"1rem",marginBottom:"1rem"}},n.a.createElement("h3",{style:{display:"inline"}},"Users")),n.a.createElement(z.a,{striped:!0},n.a.createElement(z.a.Header,null,n.a.createElement(z.a.Row,null,n.a.createElement(z.a.Cell,null,"Username"),n.a.createElement(z.a.Cell,null,"Name"),n.a.createElement(z.a.Cell,null,"Latest login"),n.a.createElement(z.a.Cell,null,"Status"),n.a.createElement(z.a.Cell,null,"Level"))),n.a.createElement(z.a.Body,null,a.map((function(e){return n.a.createElement(At,{user:e,key:e.id})})))))},Ct=[{value:pe.DJ,label:"DJ"},{value:pe.Staff,label:"Staff"},{value:pe.Admin,label:"Admin"}],wt=function(e){var a=e.onSubmit,t=e.onCancel;return n.a.createElement(L.d,{initialValues:{username:"",password:"",confirm_password:"",first_name:"",last_name:"",email:"",level:pe.DJ},onSubmit:a,validate:function(e){var a="Field is required",t={};return e.username||(t.username=a),e.password||(t.password=a),e.confirm_password||(t.confirm_password=a),e.password!==e.confirm_password&&(t.password="Passwords do not match",t.confirm_password="Passwords do not match"),e.email||(t.email=a),e.first_name||(t.first_name=a),e.last_name||(t.last_name=a),t}},(function(e){var a=e.isValid,r=e.dirty;return n.a.createElement(L.c,{className:"form ui"},n.a.createElement(L.b,{label:"Username",placeholder:"Username",name:"username",component:M}),n.a.createElement(L.b,{label:"Password",placeholder:"Password",name:"password",type:"password",component:F}),n.a.createElement(L.b,{label:"Confirm password",placeholder:"Confirm password",name:"confirm_password",type:"password",component:F}),n.a.createElement(L.b,{label:"First name",placeholder:"First name",name:"first_name",component:M}),n.a.createElement(L.b,{label:"Last name",placeholder:"Last name",name:"last_name",component:M}),n.a.createElement(L.b,{label:"Email",placeholder:"Email",name:"email",component:M}),n.a.createElement(G,{label:"Level",name:"level",options:Ct}),n.a.createElement(x.a,null,n.a.createElement(x.a.Column,{floated:"left",width:5},n.a.createElement(I.a,{type:"button",onClick:t,color:"red"},"Cancel")),n.a.createElement(x.a.Column,{floated:"right",width:5},n.a.createElement(I.a,{type:"submit",floated:"right",color:"green",disabled:!r||!a},"Add"))))}))},St=function(e){var a=e.modalOpen,t=e.onClose,r=e.onSubmit,l=e.error;return n.a.createElement(te.a,{open:a,onClose:t,centered:!1,closeIcon:!0},n.a.createElement(te.a.Header,null,"Add a new user"),n.a.createElement(te.a.Content,null,l&&n.a.createElement(Aa.a,{inverted:!0,color:"red"},"Error: ".concat(l)),n.a.createElement(wt,{onSubmit:r,onCancel:t})))},Rt=function(){var e,a=Object(o.c)((function(e){return e.user})),t=Object(o.c)((function(e){return e.login})),r=Object(o.b)(),l=n.a.useState(!1),c=Object(q.a)(l,2),u=c[0],i=c[1],s=n.a.useState(),m=Object(q.a)(s,2),d=m[0],b=m[1],E=function(){i(!1),b(void 0)};return 3===(null===(e=t.currentUser)||void 0===e?void 0:e.level)?n.a.createElement(p.a,null,n.a.createElement(I.a,{floated:"right",color:"green",style:{marginBottom:"0.5rem"},onClick:function(){return i(!0)}},n.a.createElement(K.a,{name:"add"}),"Add a new user"),n.a.createElement(St,{modalOpen:u,onSubmit:function(e){try{r((a=e,function(){var e=Object(g.a)(f.a.mark((function e(t){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"SET_LOADING"}),e.next=4,la.createUser(a);case 4:r=e.sent,t({type:"CREATE_USER",data:r}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(a){return e.apply(this,arguments)}}())),r(j("User ".concat(e.username," created!"),"success")),E()}catch(t){r(j("Failed to create user!","fail")),console.error(t.response.data),b(t.response.data.error)}var a},error:d,onClose:E}),n.a.createElement(Tt,{users:a.users})):null},jt=function(){var e,a,t,l=Object(o.b)(),c=Object(o.c)((function(e){return e.login})),s=Object(o.c)((function(e){return e.notification}));return Object(r.useEffect)((function(){l(function(){var e=Object(g.a)(f.a.mark((function e(a){var t,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{a({type:"SET_LOADING"}),(t=window.localStorage.getItem("loggedUser"))&&(r=JSON.parse(t),la.setToken(r.token),Z.setToken(r.token),Fe.setToken(r.token),We.setToken(r.token),R.setToken(r.token),ra.setToken(r.token),_e.setToken(r.token),k.setToken(r.token),a({type:"INIT_USER",data:r}))}catch(n){console.log("error initializing user",n)}case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()),l(function(){var e=Object(g.a)(f.a.mark((function e(a){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:"SET_LOADING"}),e.next=4,la.getAll();case 4:t=e.sent,a({type:"INIT_USER_LIST",data:t}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(a){return e.apply(this,arguments)}}()),l(function(){var e=Object(g.a)(f.a.mark((function e(a){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:"SET_LOADING"}),e.next=4,We.getAllActive();case 4:t=e.sent,a({type:"GET_ALL_ACTIVE_PROGRAMS",data:t}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("error getting all active programs programActions.initializePrograms",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(a){return e.apply(this,arguments)}}()),l(Oa()),m.a.get("/ping")}),[null===(e=c.currentUser)||void 0===e?void 0:e.token]),null===c.currentUser?n.a.createElement(p.a,null,n.a.createElement(oa,null),n.a.createElement(Ce,null)):null===(null===(a=c.currentUser)||void 0===a?void 0:a.status)||0===(null===(t=c.currentUser)||void 0===t?void 0:t.status)?n.a.createElement(p.a,null,n.a.createElement(oa,null),n.a.createElement("div",null,"Credentials deactivated. Please contact the administrator."),n.a.createElement(Ce,null)):n.a.createElement(u.a,null,n.a.createElement("div",{className:"App"},n.a.createElement(ya,null),n.a.createElement(ka,{notification:s})),n.a.createElement(i.d,null,n.a.createElement(i.b,{exact:!0,path:"/",component:He}),n.a.createElement(i.b,{path:"/album/:id",render:function(e){var a=e.match;return n.a.createElement(fe,{id:a.params.id})}}),n.a.createElement(i.b,{path:"/artist/:id",render:function(e){var a=e.match;return n.a.createElement(Te,{id:a.params.id})}}),n.a.createElement(i.b,{path:"/track/:id",render:function(e){var a=e.match;return n.a.createElement(ht,{id:a.params.id})}}),n.a.createElement(i.b,{path:"/reports/:id",render:function(e){var a=e.match;return n.a.createElement(tt,{id:a.params.id})}}),n.a.createElement(i.b,{exact:!0,path:"/reports",component:Ba}),n.a.createElement(i.b,{exact:!0,path:"/top100",component:Et}),n.a.createElement(i.b,{exact:!0,path:"/search",component:it}),n.a.createElement(i.b,{exact:!0,path:"/programs",component:Pa}),n.a.createElement(i.b,{exact:!0,path:"/users",component:Rt})),n.a.createElement(Ce,null))},xt=t(93),Dt=t(376),It=t(377),Lt=t(38),Nt={currentAlbum:null,tracklist:[],loading:!1},Gt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nt,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"GET_ONE_ALBUM":return Object(d.a)({},e,{currentAlbum:a.data,loading:!1});case"GET_TRACKLIST_OF_ALBUM":return Object(d.a)({},e,{tracklist:a.data,loading:!1});case"CLEAR_CURRENT_ALBUM":return Object(d.a)({},e,{currentAlbum:null,tracklist:[],loading:!1});case"ADD_TRACK_TO_ALBUM":return Object(d.a)({},e,{tracklist:[].concat(Object(Lt.a)(e.tracklist),[a.data])});case"SET_LOADING":return Object(d.a)({},e,{loading:!0});default:return e}},Pt={currentArtist:null,albumList:[],loading:!1},Mt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pt,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"GET_ONE_ARTIST":return Object(d.a)({},e,{currentArtist:a.data,loading:!1});case"GET_ALBUM_LIST_BY_ARTIST":return Object(d.a)({},e,{albumList:a.data,loading:!1});case"CLEAR_CURRENT_ARTIST":return Object(d.a)({},e,{currentArtist:null});case"SET_LOADING":return Object(d.a)({},e,{loading:!0});default:return e}},Ut={loading:!1,currentUser:null},Ft=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ut,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"INIT_USER":case"LOGIN":case"UPDATE_CURRENT_USER":return Object(d.a)({},e,{currentUser:a.data,loading:!1});case"LOGOUT":return Ut;case"SET_LOADING":return Object(d.a)({},e,{loading:!0});default:return e}},Bt={message:null,type:null},Yt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bt,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_NOTIFICATION":return a.data;case"CLEAR_NOTIFICATION":return Bt;default:return e}},Vt={allPrograms:[],activePrograms:[],program:null,loading:!1},zt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vt,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"GET_ALL_PROGRAMS":return Object(d.a)({},e,{allPrograms:a.data,loading:!1});case"GET_ALL_ACTIVE_PROGRAMS":return Object(d.a)({},e,{activePrograms:a.data,loading:!1});case"GET_ONE_PROGRAM":return Object(d.a)({},e,{program:a.data,loading:!1});case"CREATE_NEW_PROGRAM":return Object(d.a)({},e,{allPrograms:[].concat(Object(Lt.a)(e.allPrograms),[a.data]),loading:!1});case"CREATE_NEW_PROGRAM_ON_NEW_REPORT":return Object(d.a)({},e,{activePrograms:[].concat(Object(Lt.a)(e.activePrograms),[a.data]),loading:!1});case"UPDATE_PROGRAM":return Object(d.a)({},e,{allPrograms:e.allPrograms.map((function(e){return e.id===a.data.id?a.data:e})),loading:!1});default:return e}},Ht={report:[],playlog:[],editTrackId:null,reportDetails:null,newReport:null,loading:!1,checkedForDelete:[],currentTrack:null},Kt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ht,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"GET_ONE_REPORT":return Object(d.a)({},e,{report:a.data,loading:!1});case"GET_PLAYLOG_TRACKS":return Object(d.a)({},e,{report:[].concat(Object(Lt.a)(e.report),Object(Lt.a)(a.data)),playlog:a.data,loading:!1});case"GET_REPORT_DETAILS":return Object(d.a)({},e,{reportDetails:a.data,newReport:null,loading:!1});case"ADD_NEW_TRACK":return Object(d.a)({},e,{report:[].concat(Object(Lt.a)(e.report),[a.data]),loading:!1});case"ADD_TRACK_TO_REPORT":return Object(d.a)({},e,{report:[].concat(Object(Lt.a)(e.report),[a.data])});case"SET_EDIT_TRACK_ID":return Object(d.a)({},e,{editTrackId:a.data});case"GET_ONE_TRACK":return Object(d.a)({},e,{currentTrack:a.data,loading:!1});case"REMOVE_CURRENT_TRACK":return Object(d.a)({},e,{currentTrack:null});case"CLEAR_CURRENT_REPORT":return Object(d.a)({},e,{report:[]});case"CREATE_REPORT":return Object(d.a)({},e,{newReport:a.data,reportDetails:a.data,loading:!1});case"UPDATE_REPORT":return Object(d.a)({},e,{reportDetails:a.data,newReport:null,loading:!1});case"DELETE_TRACK_FROM_REPORT":return Object(d.a)({},e,{report:e.report.filter((function(e){return e.report_track_id!==a.data}))});case"CHECK_FOR_DELETE":return Object(d.a)({},e,{checkedForDelete:[a.data].concat(Object(Lt.a)(e.checkedForDelete))});case"UNCHECK_FOR_DELETE":return Object(d.a)({},e,{checkedForDelete:e.checkedForDelete.filter((function(e){return e!==a.data}))});case"CLEAR_CHECKED_FOR_DELETE":return Object(d.a)({},e,{checkedForDelete:[]});case"SET_LOADING":return Object(d.a)({},e,{loading:!0});default:return e}},qt={reportList:[],inProgress:[],reportListDate:null,reportTransferList:[],lastTransfer:null,loading:!1,filterStatusValue:null,filterUserValue:null,filterByText:"",error:null},Jt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qt,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"GET_ALL_REPORTS_BY_DATE":return Object(d.a)({},e,{reportList:a.data,reportListDate:a.date,loading:!1});case"GET_ALL_IN_PROGRESS":return Object(d.a)({},e,{inProgress:a.data,loading:!1});case"GET_ALL_REPORT_TRANSFERS":return Object(d.a)({},e,{reportTransferList:a.data,loading:!1});case"GENERATE_REPORT_TRANSFER":return Object(d.a)({},e,{lastTransfer:a.data,loading:!1});case"DELETE_REPORT":return Object(d.a)({},e,{reportList:e.reportList.filter((function(e){return e.id!==a.data})),loading:!1});case"FILTER_BY_USER_ID":return Object(d.a)({},e,{filterUserValue:a.data});case"FILTER_BY_STATUS":return Object(d.a)({},e,{filterStatusValue:a.data});case"FILTER_BY_TEXT":return Object(d.a)({},e,{filterByText:a.data});case"SET_LOADING":return Object(d.a)({},e,{loading:!0});default:return e}},Wt={top100:[],top100Query:null,advancedResults:[],sortAdvancedResults:null,loading:!1,discogsData:null},Zt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"ADVANCED_RESULTS":return Object(d.a)({},e,{advancedResults:a.data,loading:!1});case"SORT_ADVANCED_RESULTS":return Object(d.a)({},e,{sortAdvancedResults:a.data});case"TOP_100":return Object(d.a)({},e,{top100:a.data,top100Query:a.query,loading:!1});case"GET_DISCOGS_DATA":return Object(d.a)({},e,{discogsData:a.data});case"CLEAR_DISCOGS_DATA":return Object(d.a)({},e,{discogsData:null});case"SET_SEARCH_LOADING":return Object(d.a)({},e,{loading:!0});case"MERGE_TRACKS":return Object(d.a)({},e,{advancedResults:e.advancedResults.filter((function(e){return e.track_id!==a.data.merge}))});case"MERGE_ARTISTS":var t=a.data.merge,r=a.data.mergeTo,n=a.data.newName,l=e.advancedResults.filter((function(e){return e.artist_id===t})),c=l.map((function(e){return Object(d.a)({},e,{artist_id:r,artist_name:n})})),o=e.advancedResults.filter((function(e){return e.artist_id!==t})),u=[].concat(Object(Lt.a)(c),Object(Lt.a)(o));return Object(d.a)({},e,{advancedResults:u});default:return e}},Qt={currentTrack:null,playHistory:[],loading:!1},Xt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qt,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"GET_ONE_TRACK":case"UPDATE_TRACK":return Object(d.a)({},e,{currentTrack:a.data,loading:!1});case"GET_ONE_TRACK_HISTORY":return Object(d.a)({},e,{playHistory:a.data,loading:!1});case"CLEAR_CURRENT_TRACK":return Object(d.a)({},e,{playhistory:null,currentTrack:null});case"SET_LOADING":return Object(d.a)({},e,{loading:!0});default:return e}},$t={users:[],loading:!1},er=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$t,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"INIT_USER_LIST":return Object(d.a)({},e,{users:a.data,loading:!1});case"CREATE_USER":return Object(d.a)({},e,{users:[].concat(Object(Lt.a)(e.users),[a.data]),loading:!1});case"UPDATE_USER":return Object(d.a)({},e,{users:a.data,loading:!1});case"DELETE_USER":return Object(d.a)({},e,{users:e.users.filter((function(e){return e.id!==a.data})),loading:!1});case"SET_LOADING":return Object(d.a)({},e,{loading:!0});default:return e}},ar=Object(xt.combineReducers)({album:Gt,artist:Mt,login:Ft,notification:Yt,program:zt,report:Kt,reportList:Jt,search:Zt,track:Xt,user:er}),tr=Object(xt.createStore)(ar,Object(Dt.composeWithDevTools)(Object(xt.applyMiddleware)(It.a)));c.a.render(n.a.createElement(o.a,{store:tr},n.a.createElement(jt,null)),document.getElementById("root"))}},[[392,1,2]]]);
//# sourceMappingURL=main.e32e0464.chunk.js.map