(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{114:function(e,a,t){e.exports=t.p+"static/media/logo.ca9e42db.png"},392:function(e,a,t){e.exports=t(677)},418:function(e,a,t){},677:function(e,a,t){"use strict";t.r(a);for(var r=t(0),n=t.n(r),l=t(52),c=t.n(l),o=t(13),u=(t(400),t(25)),i=t(82),s=t(17),m=t.n(s),d=t(693),p=(t(418),t(14)),b=t(702),E=t(690),f=t(2),v=t.n(f),g=t(9),h=null,_=function(){var e=Object(g.a)(v.a.mark((function e(a){var t,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:h}},e.next=3,m.a.get("".concat("/api/albums","/albumdetails/").concat(a),t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),y=function(){var e=Object(g.a)(v.a.mark((function e(a){var t,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:h}},e.next=3,m.a.get("".concat("/api/albums","/tracklist/").concat(a),t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),k={setToken:function(e){h="bearer ".concat(e)},updateAlbum:function(){var e=Object(g.a)(v.a.mark((function e(a){var t,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:h}},e.next=3,m.a.put("".concat("/api/albums","/albumdetails/").concat(a.id),a,t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),getOneAlbum:_,getTracklistOfAlbum:y,changeArtistId:function(){var e=Object(g.a)(v.a.mark((function e(a){var t,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:h}},e.next=3,m.a.put("/api/albums/updateartist",a,t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()},O=null,T=function(){var e=Object(g.a)(v.a.mark((function e(a){var t,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:O}},e.next=3,m.a.get("".concat("/api/search","/autocomplete/").concat(a),t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),A=function(){var e=Object(g.a)(v.a.mark((function e(a){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get("https://api.discogs.com/database/search?artist=".concat(a.artist,"&release_title=").concat(a.album,"&token=").concat("THjssRPqbcSFrfIYgsZWCAPmWPDpKIypkMXQWGHZ"));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),C=function(){var e=Object(g.a)(v.a.mark((function e(a){var t,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:O}},e.next=3,m.a.get("/api/top100?list=".concat(a.list,"&start_date=").concat(a.start_date,"&end_date=").concat(a.end_date),t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),w=function(){var e=Object(g.a)(v.a.mark((function e(a){var t,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:O}},e.next=3,m.a.get("".concat("/api/search","/advanced?kind=").concat(a.kind,"&query=").concat(a.query),t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),S=function(){var e=Object(g.a)(v.a.mark((function e(a){var t,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:O}},e.next=3,m.a.put("".concat("/api/search","/advanced"),a,t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),R={advancedSearch:w,getTop100:C,getDiscogsData:A,getTracksForAutocompleteSearch:T,setToken:function(e){O="bearer ".concat(e)},changeArtistOptions:function(){var e=Object(g.a)(v.a.mark((function e(a){var t,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:O}},e.next=3,m.a.get("".concat("/api/search","/changeartist/").concat(a),t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),changeAlbumOptions:function(){var e=Object(g.a)(v.a.mark((function e(a){var t,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:O}},e.next=3,m.a.get("".concat("/api/search","/changealbum/").concat(a),t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),merge:S},j=function(e,a){var t={message:e,type:a};return function(){var e=Object(g.a)(v.a.mark((function e(a){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a({type:"SET_NOTIFICATION",data:t}),setTimeout((function(){a({type:"CLEAR_NOTIFICATION"})}),3e3);case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()},x=t(703),D=t(704),L=t(251),I=t(5),N=t(695),G=function(e){var a=e.name,t=e.label,r=e.options;return n.a.createElement(N.a.Field,null,n.a.createElement("label",null,t),n.a.createElement(I.b,{as:"select",name:a,className:"ui dropdown"},r.map((function(e){return n.a.createElement("option",{key:e.value,value:e.value},e.label||e.value)}))))},P=function(e){var a=e.field,t=e.label,r=e.placeholder;return n.a.createElement(N.a.Field,null,n.a.createElement("label",null,t),n.a.createElement(I.b,Object.assign({placeholder:r},a,{type:"text"})),n.a.createElement("div",{style:{color:"red"}},n.a.createElement(I.a,{name:a.name})))},M=function(e){var a=e.field,t=e.label,r=e.placeholder;return n.a.createElement(N.a.Field,{required:!0},n.a.createElement("label",null,t),n.a.createElement(I.b,Object.assign({placeholder:r},a,{type:"text"})),n.a.createElement("div",{style:{color:"red"}},n.a.createElement(I.a,{name:a.name})))},U=function(e){var a=e.field,t=e.label,r=e.placeholder;return n.a.createElement(N.a.Field,{disabled:!0},n.a.createElement("label",null,t),n.a.createElement(I.b,Object.assign({placeholder:r},a,{type:"text"})),n.a.createElement("div",{style:{color:"red"}},n.a.createElement(I.a,{name:a.name})))},F=function(e){var a=e.field,t=e.label,r=e.placeholder;return n.a.createElement(N.a.Field,null,n.a.createElement("label",null,t),n.a.createElement(I.b,Object.assign({placeholder:r},a,{type:"password"})),n.a.createElement("div",{style:{color:"red"}},n.a.createElement(I.a,{name:a.name})))},B=function(e){var a=e.field,t=e.label,r=e.placeholder;return n.a.createElement(N.a.Field,{required:!0},n.a.createElement("label",null,t),n.a.createElement(I.b,Object.assign({placeholder:r},a,{type:"password"})),n.a.createElement("div",{style:{color:"red"}},n.a.createElement(I.a,{name:a.name})))},Y=function(e){var a=e.field,t=e.label,r=e.min,l=e.max;return n.a.createElement(N.a.Field,null,n.a.createElement("label",null,t),n.a.createElement(I.b,Object.assign({},a,{type:"number",min:r,max:l})),n.a.createElement("div",{style:{color:"red"}},n.a.createElement(I.a,{name:a.name})))},V=function(e){var a=e.field,t=e.label,r=e.placeholder;return n.a.createElement(N.a.Field,{style:{marginTop:"1rem"}},n.a.createElement("label",null,t),n.a.createElement(I.b,Object.assign({placeholder:r},a,{component:"textarea"})),n.a.createElement("div",{style:{color:"red"}},n.a.createElement(I.a,{name:a.name})))},z=function(e){var a,t=e.currentAlbum,r=e.onSubmit;return null===t?n.a.createElement(b.a,null,n.a.createElement(E.a,null,"Loading album...")):n.a.createElement(x.a,{columns:2},n.a.createElement(x.a.Column,null,n.a.createElement(D.a,null,"Album info"),n.a.createElement(I.d,{initialValues:{id:t.album_id,name:t.album_name,label:t.label||"",cat_id:t.cat_id||"",year:Number(null===(a=t.year)||void 0===a?void 0:a.substring(0,4))||"",spotify_id:t.spotify_id||""},onSubmit:r,validate:function(e){console.log(e);var a={};return e.name||(a.name="Album name is required"),a}},(function(e){var a=e.isValid;return n.a.createElement(I.c,{className:"form ui"},n.a.createElement(I.b,{label:"Album name",placeholder:"Name",name:"name",component:P}),n.a.createElement(I.b,{label:"Label",placeholder:"Label...",name:"label",component:P}),n.a.createElement(I.b,{label:"Catalog ID",placeholder:"Catalog ID...",name:"cat_id",component:P}),n.a.createElement(I.b,{label:"Year",name:"year",component:Y,min:1900,max:2900}),n.a.createElement(I.b,{label:"Spotify id",placeholder:"Spotify id",name:"spotify_id",component:P}),n.a.createElement(L.a,{type:"submit",floated:"left",color:"green",disabled:!a},"Update album"))}))))},H=t(697),K=t(698),q=t(96),J=t(24),W=null,Z=function(){var e=Object(g.a)(v.a.mark((function e(a){var t,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:W}},e.next=3,m.a.get("".concat("/api/reports","/").concat(a),t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),Q={setToken:function(e){W="bearer ".concat(e)},addTrackToReport:function(){var e=Object(g.a)(v.a.mark((function e(a){var t,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:W}},e.next=3,m.a.post("".concat("/api/reports"),a,t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),deleteTrackFromReport:function(){var e=Object(g.a)(v.a.mark((function e(a){var t,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:W}},e.next=3,m.a.delete("".concat("/api/reports","/").concat(a),t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),deleteReport:function(){var e=Object(g.a)(v.a.mark((function e(a){var t,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:W}},e.next=3,m.a.put("/api/reportslist/".concat(a),{},t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),updateSortableRank:function(){var e=Object(g.a)(v.a.mark((function e(a){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={headers:{Authorization:W}},null!==a){e.next=3;break}return e.abrupt("return");case 3:a.forEach(function(){var e=Object(g.a)(v.a.mark((function e(a,r){var n,l;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={sortable_rank:r+1},e.next=3,m.a.put("".concat("/api/reports","/").concat(a.report_track_id),n,t);case 3:return l=e.sent,e.abrupt("return",l.data);case 5:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}());case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),getOne:Z,getReportDetails:function(){var e=Object(g.a)(v.a.mark((function e(a){var t,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:W}},e.next=3,m.a.get("/api/reportdetails/details/".concat(a),t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),createReport:function(){var e=Object(g.a)(v.a.mark((function e(a){var t,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:W}},e.next=3,m.a.post("/api/reportdetails",a,t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),updateReport:function(){var e=Object(g.a)(v.a.mark((function e(a){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:W}},e.next=3,m.a.put("/api/reportdetails/update/".concat(a.id),a,t);case 3:return e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),checkPlaylogTracks:function(){var e=Object(g.a)(v.a.mark((function e(a){var t,r,n,l,c,o;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:W}},e.next=3,m.a.get("/api/playlog?date=".concat(a.date));case 3:return r=e.sent,n=[],Object.entries(r.data).forEach((function(e){var a=Object(J.a)(e,2),t=(a[0],a[1]);n.push(t)})),n=n.reverse(),l=[],n.forEach((function(e){var t=e.date.charAt(11)+e.date.charAt(12);t=parseInt(t);var r=e.length.split(":"),n=60*parseInt(r[0])+parseInt(r[1]);t<parseInt(a.startTime)||t>=parseInt(a.endTime)||l.push({album_name:e.album,artist_name:e.artist,cat_id:e.matrix,disc_no:Number(e.side),track_no:Number(e.tracknumber),isrc:e.isrc,record_country:e.recording_country,country:null,play_time:e.date,djonline_id:e.id,label:e.label,length:n,track_title:e.song,year:e.year,report_id:a.report_id})})),c=[],l.forEach((function(e,t){c.push(Object(p.a)({},e,{sortable_rank:a.sortable_rank_start+t+1}))})),o=[],c.forEach(function(){var e=Object(g.a)(v.a.mark((function e(a){var r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.post("/api/tracks/playlog",a,t);case 2:r=e.sent,o.push(r.data);case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()),console.log("return array at reportservice",o),e.abrupt("return",o);case 16:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()},X=function(e){return function(){var a=Object(g.a)(v.a.mark((function a(t){var r;return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t({type:"SET_LOADING"}),a.next=4,Q.getOne(e);case 4:r=a.sent,t({type:"GET_ONE_REPORT",data:r,id:e}),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log("reportActions getOneReport error:",a.t0);case 11:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(e){return a.apply(this,arguments)}}()},$=function(e){return function(){var a=Object(g.a)(v.a.mark((function a(t){var r,n;return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t({type:"SET_LOADING"}),a.next=4,Q.addTrackToReport(e);case 4:return r=a.sent,a.next=7,Q.getOne(r.report_id);case 7:n=a.sent,t({type:"GET_ONE_REPORT",data:n}),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(0),console.log("reportActions addTrackToReport error",a.t0);case 14:case"end":return a.stop()}}),a,null,[[0,11]])})));return function(e){return a.apply(this,arguments)}}()},ee={borderRadius:0,display:"block",opacity:.9,padding:"2em"},ae=function(e){var a=e.track_id,t=e.track_title,r=e.length,l=Object(o.b)(),c=Object(o.c)((function(e){return e.report}));if(!c.reportDetails)return null;return n.a.createElement(n.a.Fragment,null,n.a.createElement(K.a,{trigger:n.a.createElement(q.a,{style:{cursor:"pointer"},color:"green",onClick:function(){var e,n,o={track_id:a,report_id:null===(e=c.reportDetails)||void 0===e?void 0:e.id,length:r,sortable_rank:c.report.length+1};l($(o)),l(j("".concat(t," added to ").concat(null===(n=c.reportDetails)||void 0===n?void 0:n.program_name,"!"),"success"))},name:"add"}),style:ee,inverted:!0,basic:!0,content:"Add ".concat(t," to ").concat(c.reportDetails.program_name)}))},te=function(e){var a=e.track;return n.a.createElement(H.a.Row,null,n.a.createElement(H.a.Cell,null,"merge album tracks modal here"),n.a.createElement(H.a.Cell,null,n.a.createElement(u.b,{to:"/track/".concat(a.track_id)},a.artist_name," - ",a.track_title," ")),n.a.createElement(H.a.Cell,null,a.track_no," / ",a.disc_no),n.a.createElement(H.a.Cell,null,a.isrc),n.a.createElement(H.a.Cell,null,a.report_occurrence),n.a.createElement(H.a.Cell,null,n.a.createElement(ae,{track_title:a.track_title,track_id:a.track_id,length:a.length})))},re=function(e){var a=e.tracklist;return null===a?n.a.createElement("span",null,"loading"):n.a.createElement(n.a.Fragment,null,n.a.createElement("h4",null,"Tracks"),n.a.createElement(H.a,{striped:!0},n.a.createElement(H.a.Header,null,n.a.createElement(H.a.Row,null,n.a.createElement(H.a.Cell,null,"Track ID#"),n.a.createElement(H.a.Cell,null,"ARTIST - Track"),n.a.createElement(H.a.Cell,null,"Track# / Disc#"),n.a.createElement(H.a.Cell,null,"ISRC"),n.a.createElement(H.a.Cell,null,"Report occurrence"))),n.a.createElement(H.a.Body,null,a.map((function(e){return n.a.createElement(te,{key:e.track_id,track:e})})))))},ne=t(187),le=null,ce=function(){var e=Object(g.a)(v.a.mark((function e(a){var t,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:le}},e.next=3,m.a.post("".concat("/api/tracks","/addandreport"),a,t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),oe=function(){var e=Object(g.a)(v.a.mark((function e(a){var t,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:le}},e.next=3,m.a.post("".concat("/api/tracks","/addtodb"),a,t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),ue=function(){var e=Object(g.a)(v.a.mark((function e(a){var t,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:le}},e.next=3,m.a.post("".concat("/api/tracks","/addtracktoalbum"),a,t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),ie=function(){var e=Object(g.a)(v.a.mark((function e(a){var t,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("track to update at service",a),t={headers:{Authorization:le}},e.next=4,m.a.put("/api/tracks",a,t);case 4:return r=e.sent,e.abrupt("return",r.data);case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),se=function(){var e=Object(g.a)(v.a.mark((function e(a){var t,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:le}},e.next=3,m.a.put("/api/tracks/updatealbum",a,t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),me=function(){var e=Object(g.a)(v.a.mark((function e(a){var t,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:le}},e.next=3,m.a.put("/api/tracks/updateartist",a,t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),de={setToken:function(e){le="bearer ".concat(e)},addNewTrack:ce,addTrackToAlbum:ue,updateTrack:ie,getOneTrack:function(){var e=Object(g.a)(v.a.mark((function e(a){var t,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:le}},e.next=3,m.a.get("".concat("/api/tracks","/details/").concat(a),t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),getOneTrackHistory:function(){var e=Object(g.a)(v.a.mark((function e(a){var t,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:le}},e.next=3,m.a.get("".concat("/api/tracks","/history/").concat(a),t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),updateAlbumId:se,updateArtistId:me,addTrackToDb:oe},pe=[{label:"Finland",value:"FI"},{label:"United Kingdom",value:"GB"},{label:"United States",value:"US"},{label:"Afghanistan",value:"AF"},{label:"\xc5land Islands",value:"AX"},{label:"Albania",value:"AL"},{label:"Algeria",value:"DZ"},{label:"American Samoa",value:"AS"},{label:"AndorrA",value:"AD"},{label:"Angola",value:"AO"},{label:"Anguilla",value:"AI"},{label:"Antarctica",value:"AQ"},{label:"Antigua and Barbuda",value:"AG"},{label:"Argentina",value:"AR"},{label:"Armenia",value:"AM"},{label:"Aruba",value:"AW"},{label:"Australia",value:"AU"},{label:"Austria",value:"AT"},{label:"Azerbaijan",value:"AZ"},{label:"Bahamas",value:"BS"},{label:"Bahrain",value:"BH"},{label:"Bangladesh",value:"BD"},{label:"Barbados",value:"BB"},{label:"Belarus",value:"BY"},{label:"Belgium",value:"BE"},{label:"Belize",value:"BZ"},{label:"Benin",value:"BJ"},{label:"Bermuda",value:"BM"},{label:"Bhutan",value:"BT"},{label:"Bolivia",value:"BO"},{label:"Bosnia and Herzegovina",value:"BA"},{label:"Botswana",value:"BW"},{label:"Bouvet Island",value:"BV"},{label:"Brazil",value:"BR"},{label:"British Indian Ocean Territory",value:"IO"},{label:"Brunei Darussalam",value:"BN"},{label:"Bulgaria",value:"BG"},{label:"Burkina Faso",value:"BF"},{label:"Burundi",value:"BI"},{label:"Cambodia",value:"KH"},{label:"Cameroon",value:"CM"},{label:"Canada",value:"CA"},{label:"Cape Verde",value:"CV"},{label:"Cayman Islands",value:"KY"},{label:"Central African Republic",value:"CF"},{label:"Chad",value:"TD"},{label:"Chile",value:"CL"},{label:"China",value:"CN"},{label:"Christmas Island",value:"CX"},{label:"Cocos (Keeling) Islands",value:"CC"},{label:"Colombia",value:"CO"},{label:"Comoros",value:"KM"},{label:"Congo",value:"CG"},{label:"Congo, The Democratic Republic of the",value:"CD"},{label:"Cook Islands",value:"CK"},{label:"Costa Rica",value:"CR"},{label:"Cote D'Ivoire",value:"CI"},{label:"Croatia",value:"HR"},{label:"Cuba",value:"CU"},{label:"Cyprus",value:"CY"},{label:"Czech Republic",value:"CZ"},{label:"Denmark",value:"DK"},{label:"Djibouti",value:"DJ"},{label:"Dominica",value:"DM"},{label:"Dominican Republic",value:"DO"},{label:"Ecuador",value:"EC"},{label:"Egypt",value:"EG"},{label:"El Salvador",value:"SV"},{label:"Equatorial Guinea",value:"GQ"},{label:"Eritrea",value:"ER"},{label:"Estonia",value:"EE"},{label:"Ethiopia",value:"ET"},{label:"Falkland Islands (Malvinas)",value:"FK"},{label:"Faroe Islands",value:"FO"},{label:"Fiji",value:"FJ"},{label:"France",value:"FR"},{label:"French Guiana",value:"GF"},{label:"French Polynesia",value:"PF"},{label:"French Southern Territories",value:"TF"},{label:"Gabon",value:"GA"},{label:"Gambia",value:"GM"},{label:"Georgia",value:"GE"},{label:"Germany",value:"DE"},{label:"Ghana",value:"GH"},{label:"Gibraltar",value:"GI"},{label:"Greece",value:"GR"},{label:"Greenland",value:"GL"},{label:"Grenada",value:"GD"},{label:"Guadeloupe",value:"GP"},{label:"Guam",value:"GU"},{label:"Guatemala",value:"GT"},{label:"Guernsey",value:"GG"},{label:"Guinea",value:"GN"},{label:"Guinea-Bissau",value:"GW"},{label:"Guyana",value:"GY"},{label:"Haiti",value:"HT"},{label:"Heard Island and Mcdonald Islands",value:"HM"},{label:"Holy See (Vatican City State)",value:"VA"},{label:"Honduras",value:"HN"},{label:"Hong Kong",value:"HK"},{label:"Hungary",value:"HU"},{label:"Iceland",value:"IS"},{label:"India",value:"IN"},{label:"Indonesia",value:"ID"},{label:"Iran, Islamic Republic Of",value:"IR"},{label:"Iraq",value:"IQ"},{label:"Ireland",value:"IE"},{label:"Isle of Man",value:"IM"},{label:"Israel",value:"IL"},{label:"Italy",value:"IT"},{label:"Jamaica",value:"JM"},{label:"Japan",value:"JP"},{label:"Jersey",value:"JE"},{label:"Jordan",value:"JO"},{label:"Kazakhstan",value:"KZ"},{label:"Kenya",value:"KE"},{label:"Kiribati",value:"KI"},{label:"Korea, Democratic People's Republic of",value:"KP"},{label:"Korea, Republic of",value:"KR"},{label:"Kuwait",value:"KW"},{label:"Kyrgyzstan",value:"KG"},{label:"Lao People's Democratic Republic",value:"LA"},{label:"Latvia",value:"LV"},{label:"Lebanon",value:"LB"},{label:"Lesotho",value:"LS"},{label:"Liberia",value:"LR"},{label:"Libyan Arab Jamahiriya",value:"LY"},{label:"Liechtenstein",value:"LI"},{label:"Lithuania",value:"LT"},{label:"Luxembourg",value:"LU"},{label:"Macao",value:"MO"},{label:"Macedonia, The Former Yugoslav Republic of",value:"MK"},{label:"Madagascar",value:"MG"},{label:"Malawi",value:"MW"},{label:"Malaysia",value:"MY"},{label:"Maldives",value:"MV"},{label:"Mali",value:"ML"},{label:"Malta",value:"MT"},{label:"Marshall Islands",value:"MH"},{label:"Martinique",value:"MQ"},{label:"Mauritania",value:"MR"},{label:"Mauritius",value:"MU"},{label:"Mayotte",value:"YT"},{label:"Mexico",value:"MX"},{label:"Micronesia, Federated States of",value:"FM"},{label:"Moldova, Republic of",value:"MD"},{label:"Monaco",value:"MC"},{label:"Mongolia",value:"MN"},{label:"Montenegro",value:"ME"},{label:"Montserrat",value:"MS"},{label:"Morocco",value:"MA"},{label:"Mozambique",value:"MZ"},{label:"Myanmar",value:"MM"},{label:"Namibia",value:"NA"},{label:"Nauru",value:"NR"},{label:"Nepal",value:"NP"},{label:"Netherlands",value:"NL"},{label:"Netherlands Antilles",value:"AN"},{label:"New Caledonia",value:"NC"},{label:"New Zealand",value:"NZ"},{label:"Nicaragua",value:"NI"},{label:"Niger",value:"NE"},{label:"Nigeria",value:"NG"},{label:"Niue",value:"NU"},{label:"Norfolk Island",value:"NF"},{label:"Northern Mariana Islands",value:"MP"},{label:"Norway",value:"NO"},{label:"Oman",value:"OM"},{label:"Pakistan",value:"PK"},{label:"Palau",value:"PW"},{label:"Palestinian Territory, Occupied",value:"PS"},{label:"Panama",value:"PA"},{label:"Papua New Guinea",value:"PG"},{label:"Paraguay",value:"PY"},{label:"Peru",value:"PE"},{label:"Philippines",value:"PH"},{label:"Poland",value:"PL"},{label:"Portugal",value:"PT"},{label:"Puerto Rico",value:"PR"},{label:"Qatar",value:"QA"},{label:"Romania",value:"RO"},{label:"Russian Federation",value:"RU"},{label:"RWANDA",value:"RW"},{label:"Saint Helena",value:"SH"},{label:"Saint Kitts and Nevis",value:"KN"},{label:"Saint Lucia",value:"LC"},{label:"Saint Pierre and Miquelon",value:"PM"},{label:"Saint Vincent and the Grenadines",value:"VC"},{label:"Samoa",value:"WS"},{label:"San Marino",value:"SM"},{label:"Sao Tome and Principe",value:"ST"},{label:"Saudi Arabia",value:"SA"},{label:"Senegal",value:"SN"},{label:"Serbia",value:"RS"},{label:"Seychelles",value:"SC"},{label:"Sierra Leone",value:"SL"},{label:"Singapore",value:"SG"},{label:"Slovakia",value:"SK"},{label:"Slovenia",value:"SI"},{label:"Solomon Islands",value:"SB"},{label:"Somalia",value:"SO"},{label:"South Africa",value:"ZA"},{label:"South Georgia and the South Sandwich Islands",value:"GS"},{label:"Spain",value:"ES"},{label:"Sri Lanka",value:"LK"},{label:"Sudan",value:"SD"},{label:"Suriname",value:"SR"},{label:"Svalbard and Jan Mayen",value:"SJ"},{label:"Swaziland",value:"SZ"},{label:"Sweden",value:"SE"},{label:"Switzerland",value:"CH"},{label:"Syrian Arab Republic",value:"SY"},{label:"Taiwan, Province of China",value:"TW"},{label:"Tajikistan",value:"TJ"},{label:"Tanzania, United Republic of",value:"TZ"},{label:"Thailand",value:"TH"},{label:"Timor-Leste",value:"TL"},{label:"Togo",value:"TG"},{label:"Tokelau",value:"TK"},{label:"Tonga",value:"TO"},{label:"Trinidad and Tobago",value:"TT"},{label:"Tunisia",value:"TN"},{label:"Turkey",value:"TR"},{label:"Turkmenistan",value:"TM"},{label:"Turks and Caicos Islands",value:"TC"},{label:"Tuvalu",value:"TV"},{label:"Uganda",value:"UG"},{label:"Ukraine",value:"UA"},{label:"United Arab Emirates",value:"AE"},{label:"United States Minor Outlying Islands",value:"UM"},{label:"Uruguay",value:"UY"},{label:"Uzbekistan",value:"UZ"},{label:"Vanuatu",value:"VU"},{label:"Venezuela",value:"VE"},{label:"Viet Nam",value:"VN"},{label:"Virgin Islands, British",value:"VG"},{label:"Virgin Islands, U.S.",value:"VI"},{label:"Wallis and Futuna",value:"WF"},{label:"Western Sahara",value:"EH"},{label:"Yemen",value:"YE"},{label:"Zambia",value:"ZM"},{label:"Zimbabwe",value:"ZW"}],be=[{key:1,label:"Finland",value:1},{key:2,label:"Other than Finland",value:2},{key:0,label:"Unknown",value:0}],Ee=[{key:0,label:"00:00",value:"00:00:00"},{key:1,label:"01:00",value:"01:00:00"},{key:2,label:"02:00",value:"02:00:00"},{key:3,label:"03:00",value:"03:00:00"},{key:4,label:"04:00",value:"04:00:00"},{key:5,label:"05:00",value:"05:00:00"},{key:6,label:"06:00",value:"06:00:00"},{key:7,label:"07:00",value:"07:00:00"},{key:8,label:"08:00",value:"08:00:00"},{key:9,label:"09:00",value:"09:00:00"},{key:10,label:"10:00",value:"10:00:00"},{key:11,label:"11:00",value:"11:00:00"},{key:12,label:"12:00",value:"12:00:00"},{key:13,label:"13:00",value:"13:00:00"},{key:14,label:"14:00",value:"14:00:00"},{key:15,label:"15:00",value:"15:00:00"},{key:16,label:"16:00",value:"16:00:00"},{key:17,label:"17:00",value:"17:00:00"},{key:18,label:"18:00",value:"18:00:00"},{key:19,label:"19:00",value:"19:00:00"},{key:20,label:"20:00",value:"20:00:00"},{key:21,label:"21:00",value:"21:00:00"},{key:22,label:"22:00",value:"22:00:00"},{key:23,label:"23:00",value:"23:00:00"}],fe=[{key:0,label:"01:00",value:"01:00:00"},{key:1,label:"02:00",value:"02:00:00"},{key:2,label:"03:00",value:"03:00:00"},{key:3,label:"04:00",value:"04:00:00"},{key:4,label:"05:00",value:"05:00:00"},{key:5,label:"06:00",value:"06:00:00"},{key:6,label:"07:00",value:"07:00:00"},{key:7,label:"08:00",value:"08:00:00"},{key:8,label:"09:00",value:"09:00:00"},{key:9,label:"10:00",value:"10:00:00"},{key:10,label:"11:00",value:"11:00:00"},{key:11,label:"12:00",value:"12:00:00"},{key:12,label:"13:00",value:"13:00:00"},{key:13,label:"14:00",value:"14:00:00"},{key:14,label:"15:00",value:"15:00:00"},{key:15,label:"16:00",value:"16:00:00"},{key:16,label:"17:00",value:"17:00:00"},{key:17,label:"18:00",value:"18:00:00"},{key:18,label:"19:00",value:"19:00:00"},{key:19,label:"20:00",value:"20:00:00"},{key:20,label:"21:00",value:"21:00:00"},{key:21,label:"22:00",value:"22:00:00"},{key:22,label:"23:00",value:"23:00:00"},{key:23,label:"24:00",value:"23:59:59"}],ve=[{key:"01",label:"January",value:"01"},{key:"02",label:"February",value:"02"},{key:"03",label:"March",value:"03"},{key:"04",label:"April",value:"04"},{key:"05",label:"May",value:"05"},{key:"06",label:"June",value:"06"},{key:"07",label:"July",value:"07"},{key:"08",label:"August",value:"08"},{key:"09",label:"September",value:"09"},{key:"10",label:"October",value:"10"},{key:"11",label:"November",value:"11"},{key:"12",label:"December",value:"12"}],ge=[{key:0,label:"In progress",value:0},{key:1,label:"Ready",value:1},{key:9,label:"Deleted",value:9}],he=(new Date).getFullYear()+1,_e=[],ye=2001;ye<=he;ye++)_e.push(ye);var ke,Oe=_e.map((function(e){return{key:e.toString(),label:e.toString(),value:e.toString()}})),Te=Oe=Oe.reverse(),Ae=function(e){var a=e.reportDetails,t=e.addToAlbumAndReport,r=e.onSubmit,l=e.onClose;return n.a.createElement(I.d,{initialValues:{track_title:"",disc_no:1,track_no:1,minutes:0,seconds:0,country:1,record_country:"",people:"",comment:"",isrc:""},onSubmit:r},(function(e){var r,c=e.isValid,o=e.dirty;return r=null!==a?n.a.createElement(n.a.Fragment,null,n.a.createElement(x.a.Column,{width:6},n.a.createElement(L.a,{disabled:!c||!o,color:"green",onClick:function(){return t}},"Add track to album and report ".concat(a.program_name," ").concat(a.program_date))),n.a.createElement(x.a.Column,{width:6},n.a.createElement(L.a,{disabled:!c||!o,type:"submit",color:"blue"},"Add track to album"))):n.a.createElement(x.a.Column,{width:6},n.a.createElement(L.a,{disabled:!c||!o,color:"blue",type:"submit"},"Add track to album")),n.a.createElement(I.c,{className:"form ui"},n.a.createElement(I.b,{label:"Track title",placeholder:"Track title...",name:"track_title",component:P}),n.a.createElement(x.a,null,n.a.createElement(x.a.Column,{width:8},n.a.createElement(I.b,{label:"Length - minutes",name:"minutes",component:Y,min:0,max:999})),n.a.createElement(x.a.Column,{width:8},n.a.createElement(I.b,{label:"Length - seconds",name:"seconds",component:Y,min:0,max:59}))),n.a.createElement(x.a,null,n.a.createElement(x.a.Column,{width:8},n.a.createElement(I.b,{label:"Track #",name:"track_no",component:Y,min:0,max:999})),n.a.createElement(x.a.Column,{width:8},n.a.createElement(I.b,{label:"Disc #",name:"disc_no",component:Y,min:0,max:99})),n.a.createElement(x.a.Column,{width:8},n.a.createElement(G,{label:"Country",name:"country",options:be})),n.a.createElement(x.a.Column,{width:8},n.a.createElement(G,{label:"Recorded in",name:"record_country",options:pe}))),n.a.createElement(I.b,{label:"Composers - one per line",placeholder:"LAST NAME FIRST NAME",name:"people",component:V}),n.a.createElement(I.b,{label:"Comment",placeholder:"Any additional information",name:"comment",component:P}),n.a.createElement(x.a,null,r,n.a.createElement(x.a.Column,{floated:"right",width:6},n.a.createElement(L.a,{type:"button",onClick:l,color:"red"},"Cancel"))))}))},Ce=function(e){var a=e.currentAlbum,t=e.report,l=Object(o.b)();console.log("album at album details",a),console.log("report at album details",t);var c=Object(r.useState)(!1),u=Object(J.a)(c,2),i=u[0],s=u[1],m=function(){s(!1)};return n.a.createElement(ne.a,{trigger:n.a.createElement(L.a,{style:{marginBottom:"0.5rem"},onClick:function(){s(!0)},floated:"right",color:"green"},n.a.createElement(q.a,{name:"add"}),"Add a track to the album"),closeIcon:!0,open:i,onClose:m},n.a.createElement(ne.a.Content,null,n.a.createElement(D.a,{content:"Add a track to album ".concat(a.album_name)}),n.a.createElement(Ae,{onClose:m,onSubmit:function(e){var t,r=60*Number(e.minutes)+Number(e.seconds);t=e.people?"| ".concat(e.people.replace(/\n/g," | ")," |"):null,console.log(e);var n={track_title:e.track_title,artist_name:a.artist_name,album_name:a.album_name,album_id:a.album_id,artist_id:a.artist_id,length:r,country:e.country,cat_id:a.cat_id,label:a.label,year:a.year,record_country:e.record_country,people:t,disc_no:Number(e.disc_no),track_no:Number(e.track_no),isrc:e.isrc,comment:e.comment};console.log(n),l(function(e){return function(){var a=Object(g.a)(v.a.mark((function a(t){var r;return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,de.addTrackToAlbum(e);case 3:r=a.sent,t({type:"ADD_TRACK_TO_ALBUM",data:r}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log("trackactions addTrackToAlbum error: ",a.t0);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()}(n)),l(j("".concat(e.track_title," added to ").concat(a.album_name),"success")),m()},reportDetails:t.reportDetails,currentAlbum:a,addToAlbumAndReport:function(e){var r,n,c,o,u=60*Number(e.minutes)+Number(e.seconds);o=e.people?"| ".concat(e.people.replace(/\n/g," | ")," |"):null,console.log(e);var i={track_title:e.track_title,artist_name:a.artist_name,album_name:a.album_name,album_id:a.album_id,artist_id:a.artist_id,length:u,country:e.country,cat_id:a.cat_id,label:a.label,year:a.year,record_country:e.record_country,people:o,disc_no:Number(e.disc_no),track_no:Number(e.track_no),isrc:e.isrc,comment:e.comment,report_id:null===(r=t.reportDetails)||void 0===r?void 0:r.id,sortable_rank:t.report.length+1};console.log("add to album and",i),l(function(e){return function(){var a=Object(g.a)(v.a.mark((function a(t){var r;return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,de.addTrackToAlbum(e);case 3:r=a.sent,{track_id:r.track_id,report_id:e.report_id,length:e.length,sortable_rank:e.sortable_rank},a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log("trackActions addTrackToAlbumAndReport error: ",a.t0);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()}(i)),l(j("".concat(e.track_title," added to ").concat(a.album_name," and to ").concat(null===(n=t.reportDetails)||void 0===n?void 0:n.program_name," ").concat(null===(c=t.reportDetails)||void 0===c?void 0:c.program_date),"success")),m()}})))},we=function(e){var a=e.id,t=Object(o.b)(),l=Object(o.c)((function(e){return e.album})),c=Object(o.c)((function(e){return e.report}));if(Object(r.useEffect)((function(){t(function(e){return function(){var a=Object(g.a)(v.a.mark((function a(t){var r,n;return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t({type:"CLEAR_CURRENT_ALBUM"}),t({type:"SET_LOADING"}),a.next=5,k.getOneAlbum(e);case 5:return r=a.sent,console.log("albumactions getonealbum",r),t({type:"GET_ONE_ALBUM",data:r}),a.next=10,k.getTracklistOfAlbum(e);case 10:n=a.sent,t({type:"GET_TRACKLIST_OF_ALBUM",data:n}),a.next=17;break;case 14:a.prev=14,a.t0=a.catch(0),console.log("albumActions getOneAlbum error:",a.t0);case 17:case"end":return a.stop()}}),a,null,[[0,14]])})));return function(e){return a.apply(this,arguments)}}()}(a))}),[a]),null===l.currentAlbum)return n.a.createElement(d.a,null,n.a.createElement(b.a,null,n.a.createElement(E.a,null,"Ladataan...")));return n.a.createElement(d.a,null,n.a.createElement(Ce,{currentAlbum:l.currentAlbum,report:c}),n.a.createElement(z,{onSubmit:function(e){var a=Object(p.a)({},e,{year:e.year.toString()});t(function(e){return function(){var a=Object(g.a)(v.a.mark((function a(t){var r;return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t({type:"SET_LOADING"}),a.next=4,k.updateAlbum(e);case 4:return a.next=6,k.getOneAlbum(e.id);case 6:r=a.sent,t({type:"GET_ONE_ALBUM",data:r}),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),console.log("albumActions updateAlbum error:",a.t0);case 13:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(e){return a.apply(this,arguments)}}()}(a)),t(j("Artist ".concat(e.name," updated!"),"success"))},currentAlbum:l.currentAlbum}),n.a.createElement(re,{tracklist:l.tracklist}))},Se=null,Re=function(){var e=Object(g.a)(v.a.mark((function e(a){var t,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:Se}},e.next=3,m.a.get("".concat("/api/artists","/details/").concat(a),t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),je=function(){var e=Object(g.a)(v.a.mark((function e(a){var t,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:Se}},e.next=3,m.a.get("".concat("/api/artists","/albumsby/").concat(a),t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),xe={setToken:function(e){Se="bearer ".concat(e)},updateArtist:function(){var e=Object(g.a)(v.a.mark((function e(a){var t,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:Se}},e.next=3,m.a.put("".concat("/api/artists","/details/").concat(a.id),a,t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),getOneArtist:Re,getAlbumsByArtist:je},De=function(e){var a=e.album;return n.a.createElement(H.a.Row,null,n.a.createElement(H.a.Cell,null,"merge albums modal here"),n.a.createElement(H.a.Cell,null,n.a.createElement(u.b,{to:"/album/".concat(a.album_id)},a.name)),n.a.createElement(H.a.Cell,null,a.identifier),n.a.createElement(H.a.Cell,null,a.track_count),n.a.createElement(H.a.Cell,null,a.report_occurrence))},Le=function(e){var a=e.albumList;return null===a?n.a.createElement("span",null,"loading"):n.a.createElement(n.a.Fragment,null,n.a.createElement("h4",null,"Albums"),n.a.createElement(H.a,{striped:!0},n.a.createElement(H.a.Header,null,n.a.createElement(H.a.Row,null,n.a.createElement(H.a.Cell,null,"ID#"),n.a.createElement(H.a.Cell,null,"Album name"),n.a.createElement(H.a.Cell,null,"Catalog ID"),n.a.createElement(H.a.Cell,null,"Tracks"),n.a.createElement(H.a.Cell,null,"Report occurrence"),n.a.createElement(H.a.Cell,null))),n.a.createElement(H.a.Body,null,a.map((function(e){return n.a.createElement(De,{key:e.album_id,album:e})})))))},Ie=function(e){var a=e.currentArtist,t=e.onSubmit;return null===a?n.a.createElement(b.a,null,n.a.createElement(E.a,null,"Loading artist...")):n.a.createElement(x.a,{columns:2},n.a.createElement(x.a.Column,null,n.a.createElement(D.a,null,"Artist info"),n.a.createElement(I.d,{initialValues:{id:a.id,name:a.name,spotify_id:a.spotify_id||""},onSubmit:t,validate:function(e){var a={};return e.name||(a.name="Artist name is required"),a}},(function(e){var a=e.isValid;return n.a.createElement(I.c,{className:"form ui"},n.a.createElement(I.b,{label:"Artist name",placeholder:"Name",name:"name",component:P}),n.a.createElement(I.b,{label:"Spotify id",placeholder:"Spotify id",name:"spotify_id",component:P}),n.a.createElement(L.a,{type:"submit",floated:"left",color:"green",disabled:!a},"Update artist"))}))))},Ne=function(e){var a=e.id,t=Object(o.b)(),l=Object(o.c)((function(e){return e.artist}));Object(r.useEffect)((function(){t(function(e){return function(){var a=Object(g.a)(v.a.mark((function a(t){var r,n;return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t({type:"CLEAR_CURRENT_ARTIST"}),t({type:"SET_LOADING"}),a.next=5,xe.getOneArtist(e);case 5:return r=a.sent,t({type:"GET_ONE_ARTIST",data:r}),a.next=9,xe.getAlbumsByArtist(e);case 9:n=a.sent,t({type:"GET_ALBUM_LIST_BY_ARTIST",data:n}),a.next=16;break;case 13:a.prev=13,a.t0=a.catch(0),console.log(a.t0);case 16:case"end":return a.stop()}}),a,null,[[0,13]])})));return function(e){return a.apply(this,arguments)}}()}(a))}),[a]);return null===l.currentArtist?n.a.createElement(d.a,null,n.a.createElement(b.a,null,n.a.createElement(E.a,null,"Ladataan..."))):n.a.createElement(d.a,null,n.a.createElement(Ie,{currentArtist:l.currentArtist,onSubmit:function(e){var a;t((a=e,function(){var e=Object(g.a)(v.a.mark((function e(t){var r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"SET_LOADING"}),e.next=3,xe.updateArtist(a);case 3:return e.next=5,xe.getOneArtist(a.id);case 5:r=e.sent,t({type:"GET_ONE_ARTIST",data:r});case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}())),t(j("Artist ".concat(e.name," updated!"),"success"))}}),n.a.createElement(Le,{albumList:l.albumList}))},Ge=function(){return n.a.createElement("div",{style:{marginTop:"5rem",marginBottom:"2rem",textAlign:"center"}},n.a.createElement("br",null),n.a.createElement("em",null," ","\xa9 ",(new Date).getFullYear()," ",n.a.createElement("a",{href:"https://www.teemukostamo.com",target:"_blank",rel:"noopener noreferrer"}," ","Teemu Kostamo"," ")," "))},Pe=t(28),Me=t.n(Pe),Ue=t(44),Fe=function(e){var a=e.onSubmit,t=e.currentUser,r=e.programOptions;return n.a.createElement(I.d,{initialValues:{program_name:"",program_no:0,program_dj:"".concat(null===t||void 0===t?void 0:t.first_name," ").concat(null===t||void 0===t?void 0:t.last_name),program_date:Me()(new Date).format("YYYY-MM-DD"),program_start_time:"",program_end_time:"",program_id:0,rerun:null,status:0,user_id:(null===t||void 0===t?void 0:t.id)||0,username:(null===t||void 0===t?void 0:t.username)||"",first_name:(null===t||void 0===t?void 0:t.first_name)||"",last_name:(null===t||void 0===t?void 0:t.last_name)||""},onSubmit:a,validate:function(e){console.log(e);var a={};return e.program_dj||(a.program_dj="Field is required"),""===e.program_start_time&&(a.program_start_time="Field is required"),""===e.program_end_time&&(a.program_end_time="Field is required"),parseInt(e.program_end_time)<=parseInt(e.program_start_time)&&"23:59"!==e.program_end_time&&(a.program_end_time="Check start and end times!"),a}},(function(e){var a=e.isValid,t=e.dirty;return n.a.createElement(I.c,{className:"form ui"},n.a.createElement(G,{label:"Program",name:"program_id",options:r}),n.a.createElement(I.b,{label:"Program number",name:"program_no",component:Y,min:0,max:999}),n.a.createElement(I.b,{label:"DJ",placeholder:"DJ",name:"program_dj",component:P}),n.a.createElement(x.a,null,n.a.createElement(x.a.Column,{width:5,style:{marginTop:"0.3rem"}},n.a.createElement("label",{style:{fontWeight:"bold"}},"Program date"),n.a.createElement(Ue.b,{name:"program_date",dateFormat:"dd.MM.yyyy",placeholder:"dd.mm.yyyy"})," "),n.a.createElement(x.a.Column,{width:5},n.a.createElement(G,{label:"Start time",name:"program_start_time",options:Ee})),n.a.createElement(x.a.Column,{width:5},n.a.createElement(G,{label:"End time",name:"program_end_time",options:fe}))),n.a.createElement(L.a,{style:{marginTop:"1rem"},type:"submit",floated:"left",color:"green",disabled:!a||!t},"Create report"))}))},Be=function(){var e=Object(r.useState)(!1),a=Object(J.a)(e,2),t=a[0],l=a[1],c=Object(o.b)(),u=Object(o.c)((function(e){return e.program})),s=Object(o.c)((function(e){return e.login})),m=Object(o.c)((function(e){return e.report})),b=u.activePrograms.map((function(e){return{key:e.id,label:e.name,value:e.id}}));return t&&null!==m.newReport?n.a.createElement(i.a,{to:"reports/".concat(m.newReport.id)}):n.a.createElement(x.a.Column,null,n.a.createElement(d.a,null,n.a.createElement(D.a,null,"Create a new report"),n.a.createElement(Fe,{onSubmit:function(e){var a;console.log("submit new report values",e);var t,r=Object(p.a)({},e,{program_id:Number(e.program_id),program_name:null===(a=u.activePrograms.find((function(a){return a.id===Number(e.program_id)})))||void 0===a?void 0:a.name});console.log("report to create values",r),c(j("Created new report for the program ".concat(r.program_name," "),"success")),l(!0),c((t=r,function(){var e=Object(g.a)(v.a.mark((function e(a){var r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:"SET_LOADING"}),e.next=4,Q.createReport(t);case 4:r=e.sent,a({type:"CREATE_REPORT",data:r}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(a){return e.apply(this,arguments)}}()))},currentUser:s.currentUser,programOptions:b})))},Ye=t(694),Ve=t(369),ze=t.n(Ve),He=null,Ke=function(){var e=Object(g.a)(v.a.mark((function e(a){var t,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:He}},e.next=3,m.a.get("".concat("/api/reportslist","/date/").concat(a),t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),qe=function(){var e=Object(g.a)(v.a.mark((function e(a,t){var r,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:{Authorization:He}},e.next=3,m.a.get("".concat("/api/reportslist","/all?date=").concat(a,"&user=").concat(t),r);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),Je=function(){var e=Object(g.a)(v.a.mark((function e(a){var t,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:He}},e.next=3,m.a.get("".concat("/api/reportslist","/user/").concat(a),t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),We=function(){var e=Object(g.a)(v.a.mark((function e(){var a,t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:He}},e.next=3,m.a.get("/api/reporttransfer",a);case 3:return t=e.sent,e.abrupt("return",t.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ze=function(){var e=Object(g.a)(v.a.mark((function e(a){var t,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:He}},e.next=3,m.a.put("".concat("/api/reportslist","/").concat(a),{},t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),Qe=function(){var e=Object(g.a)(v.a.mark((function e(a){var t,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={headers:{Authorization:He,responseType:"blob"}},e.next=4,m.a.post("/api/reporttransfer",a,t);case 4:return r=e.sent,e.abrupt("return",r.data);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(a){return e.apply(this,arguments)}}(),Xe=function(){var e=Object(g.a)(v.a.mark((function e(a){var t,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={headers:{Authorization:He,responseType:"blob"}},e.next=4,m.a.get("/api/reporttransfer/".concat(a),t);case 4:r=e.sent,ze()(r.data,a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(a){return e.apply(this,arguments)}}(),$e={setToken:function(e){He="bearer ".concat(e)},deleteReport:Ze,getAllByDate:Ke,getAllByDateByUser:qe,getAllInProgress:Je,getAllTransfers:We,generateReportDownload:Qe,downloadReport:Xe},ea=function(e){return function(){var a=Object(g.a)(v.a.mark((function a(t){var r;return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t({type:"SET_LOADING"}),t({type:"CLEAR_CURRENT_REPORT"}),a.next=5,$e.getAllByDate(e);case 5:r=a.sent,t({type:"GET_ALL_REPORTS_BY_DATE",data:r,date:e}),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),console.log("reportListActions getAllReportsByDate error",a.t0);case 12:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e){return a.apply(this,arguments)}}()},aa=function(e,a){return function(){var t=Object(g.a)(v.a.mark((function t(r){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r({type:"SET_LOADING"}),r({type:"CLEAR_CURRENT_REPORT"}),t.next=5,$e.getAllByDateByUser(e,a);case 5:n=t.sent,r({type:"GET_ALL_REPORTS_BY_DATE",data:n,date:e}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log("reportListActions getAllReportsByDateByUser error",t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},ta=function(e){var a=e.report,t=Object(o.b)(),l=Object(o.c)((function(e){return e.login})),c=Object(r.useState)(!1),i=Object(J.a)(c,2),s=i[0],m=i[1];return n.a.createElement(n.a.Fragment,null,n.a.createElement(H.a.Row,null,n.a.createElement(H.a.Cell,null,n.a.createElement(u.b,{to:"reports/".concat(a.id)},a.name)),n.a.createElement(H.a.Cell,null,Me()(a.program_date).format("DD.MM.YYYY")),n.a.createElement(H.a.Cell,null,a.program_no),n.a.createElement(H.a.Cell,null," ",n.a.createElement(q.a,{color:"red",onClick:function(){return m(!0)},name:"delete"}),n.a.createElement(Ye.a,{content:"Are you sure you wish to delete ".concat(a.name," ").concat(a.program_date),open:s,onCancel:function(){m(!1)},onConfirm:function(){var e;m(!1);var r={report_id:a.id,user_id:null===(e=l.currentUser)||void 0===e?void 0:e.id};t(function(e){return function(){var a=Object(g.a)(v.a.mark((function a(t){var r;return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t({type:"SET_LOADING"}),a.next=4,$e.deleteReport(e.report_id);case 4:return a.next=6,$e.getAllInProgress(e.user_id);case 6:r=a.sent,t({type:"GET_ALL_IN_PROGRESS",data:r}),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),console.log(a.t0);case 13:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(e){return a.apply(this,arguments)}}()}(r)),t(j("".concat(a.name," ").concat(a.program_date," poistettu!"),"success"))},cancelButton:"Nope",confirmButton:"Sure"}))))},ra=function(e){var a=e.inProgress;return console.log(a),null===a?null:0===a.length?n.a.createElement(x.a.Column,null,n.a.createElement(d.a,null,n.a.createElement("h3",null,"Reports in progress"),"no reports in progress")):n.a.createElement(n.a.Fragment,null,n.a.createElement(x.a.Column,null,n.a.createElement(d.a,null,n.a.createElement(D.a,null,"Reports in progress"),n.a.createElement(H.a,{striped:!0},n.a.createElement(H.a.Header,null,n.a.createElement(H.a.Row,null,n.a.createElement(H.a.Cell,null,"Program name"),n.a.createElement(H.a.Cell,null,"Date"),n.a.createElement(H.a.Cell,null,"Number"),n.a.createElement(H.a.Cell,null))),n.a.createElement(H.a.Body,null,a.map((function(e){return n.a.createElement(ta,{key:e.id,report:e})})))))))},na=function(){var e=Object(o.b)(),a=Object(o.c)((function(e){return e.reportList})),t=Object(o.c)((function(e){return e.program})),l=Object(o.c)((function(e){return e.login}));return Object(r.useEffect)((function(){var a,t;e((t=null===(a=l.currentUser)||void 0===a?void 0:a.id,function(){var e=Object(g.a)(v.a.mark((function e(a){var r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:"SET_LOADING"}),a({type:"CLEAR_CURRENT_REPORT"}),e.next=5,$e.getAllInProgress(t);case 5:r=e.sent,a({type:"GET_ALL_IN_PROGRESS",data:r}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("reportListActions getAllInProgressReports error",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(a){return e.apply(this,arguments)}}()))}),[l.currentUser]),null===t.activePrograms?n.a.createElement(d.a,null,n.a.createElement(b.a,{active:!0},n.a.createElement(E.a,null,"Loading active programs..."))," "):n.a.createElement(d.a,null,n.a.createElement(x.a,{divided:"vertically"},n.a.createElement(x.a.Row,{columns:2},n.a.createElement(Be,null),n.a.createElement(ra,{inProgress:a.inProgress}))))},la=t(689),ca={login:function(){var e=Object(g.a)(v.a.mark((function e(a){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.post("/api/login",a);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()},oa=null,ua={getAllActive:function(){var e=Object(g.a)(v.a.mark((function e(){var a,t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:oa}},e.next=3,m.a.get("".concat("/api/programs","/active"),a);case 3:return t=e.sent,e.abrupt("return",t.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getAll:function(){var e=Object(g.a)(v.a.mark((function e(){var a,t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:oa}},e.next=3,m.a.get("".concat("/api/programs","/all"),a);case 3:return t=e.sent,e.abrupt("return",t.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getOne:function(){var e=Object(g.a)(v.a.mark((function e(a){var t,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:oa}},e.next=3,m.a.get("".concat("/api/programs","/getone/").concat(a),t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),createProgram:function(){var e=Object(g.a)(v.a.mark((function e(a){var t,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:oa}},e.next=3,m.a.post("/api/programs",a,t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),updateProgram:function(){var e=Object(g.a)(v.a.mark((function e(a){var t,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:oa}},e.next=3,m.a.put("".concat("/api/programs","/update"),a,t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),mergePrograms:function(){var e=Object(g.a)(v.a.mark((function e(a){var t,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:oa}},e.next=3,m.a.put("".concat("/api/programs","/merge"),a,t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),setToken:function(e){oa="bearer ".concat(e)}},ia=null,sa={getAll:function(){var e=Object(g.a)(v.a.mark((function e(){var a,t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:ia}},e.next=3,m.a.get("/api/users",a);case 3:return t=e.sent,e.abrupt("return",t.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),setToken:function(e){ia="bearer ".concat(e)},createUser:function(){var e=Object(g.a)(v.a.mark((function e(a){var t,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:ia}},e.next=3,m.a.post("/api/users",a,t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),updateUser:function(){var e=Object(g.a)(v.a.mark((function e(a){var t,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:ia}},e.next=3,m.a.put("".concat("/api/users","/").concat(a.id),a,t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),deleteUser:function(){var e=Object(g.a)(v.a.mark((function e(a){var t,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:ia}},e.next=3,m.a.delete("".concat("/api/users","/").concat(a),t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()},ma=function(){return function(){var e=Object(g.a)(v.a.mark((function e(a){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.localStorage.removeItem("loggedUser"),a({type:"LOGOUT"});case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()},da=function(){var e=Object(o.b)(),a=Object(r.useState)(""),t=Object(J.a)(a,2),l=t[0],c=t[1],u=Object(r.useState)(""),i=Object(J.a)(u,2),s=i[0],m=i[1];return n.a.createElement("div",null,n.a.createElement("h1",null,"RADIO TRACKLIST REPORTING"),n.a.createElement("h3",null,"Log in"),n.a.createElement(N.a,{onSubmit:function(a){a.preventDefault(),e(function(e){return function(){var a=Object(g.a)(v.a.mark((function a(t){var r;return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t({type:"SET_LOADING"}),a.next=4,ca.login(e);case 4:r=a.sent,window.localStorage.setItem("loggedUser",JSON.stringify(r)),t({type:"LOGIN",data:r,loading:!1}),a.next=15;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0),t({type:"SET_NOTIFICATION",data:{message:"wrong username or password",type:"fail"}}),setTimeout((function(){t({type:"CLEAR_NOTIFICATION"})}),3e3);case 15:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e){return a.apply(this,arguments)}}()}({username:l,password:s}))}},n.a.createElement(N.a.Field,{id:"login-username",label:"username",control:la.a,type:"text",placeholder:"Username...",onChange:function(e){return c(e.target.value.trim())}}),n.a.createElement(N.a.Field,{id:"login-password",label:"password",control:la.a,type:"password",placeholder:"Password...",onChange:function(e){return m(e.target.value.trim())}}),n.a.createElement(L.a,{id:"login-button",color:"green",type:"submit"},"Log in")))},pa=t(701),ba=t(380),Ea=t(696),fa=t(114),va=t.n(fa),ga=function(e){var a=e.onSubmit,t=e.onCancel,r=e.user;return n.a.createElement(I.d,{initialValues:{password:"",confirm_password:"",first_name:r.first_name,last_name:r.last_name,email:r.email},onSubmit:a,validate:function(e){var a={};return e.password!==e.confirm_password&&(a.password="Passwords do not match",a.confirm_password="Passwords do not match"),e.email||(a.email="Field is required"),e.first_name||(a.first_name="Field is required"),e.last_name||(a.last_name="Field is required"),a}},(function(e){var a=e.isValid;return n.a.createElement(I.c,{className:"form ui"},n.a.createElement(I.b,{label:"Password - fill out field only if you wish to change the password",placeholder:"Password",name:"password",type:"password",component:F}),n.a.createElement(I.b,{label:"Confirm password",placeholder:"Confirm password",name:"confirm_password",type:"password",component:F}),n.a.createElement(I.b,{label:"First name",placeholder:"First name",name:"first_name",component:P,required:!0}),n.a.createElement(I.b,{label:"Last name",placeholder:"Last name",name:"last_name",component:P}),n.a.createElement(I.b,{label:"Email",placeholder:"Email",name:"email",component:P}),n.a.createElement(x.a,null,n.a.createElement(x.a.Column,{floated:"left",width:5},n.a.createElement(L.a,{type:"button",onClick:t,color:"red"},"Cancel")),n.a.createElement(x.a.Column,{floated:"right",width:5},n.a.createElement(L.a,{type:"submit",floated:"right",color:"green",disabled:!a},"Update"))))}))};!function(e){e[e.DJ=1]="DJ",e[e.Staff=2]="Staff",e[e.Admin=3]="Admin"}(ke||(ke={}));var ha=function(e){return function(){var a=Object(g.a)(v.a.mark((function a(t){var r;return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t({type:"SET_LOADING"}),a.next=4,sa.updateUser(e);case 4:return a.next=6,sa.getAll();case 6:r=a.sent,t({type:"UPDATE_USER",data:r}),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),console.log(a.t0);case 13:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(e){return a.apply(this,arguments)}}()},_a=function(e){var a=e.currentUser,t=Object(o.b)(),l=Object(r.useState)(!1),c=Object(J.a)(l,2),u=c[0],i=c[1],s=function(){i(!1)};return n.a.createElement(ne.a,{trigger:n.a.createElement("span",{role:"menuitem",tabIndex:-8,onClick:function(){i(!0)}},"Edit user info"),closeIcon:!0,open:u,onClose:s},n.a.createElement(D.a,{content:"Edit current user info"}),n.a.createElement(ne.a.Content,null,n.a.createElement(ga,{user:a,onCancel:s,onSubmit:function(e){try{var r=Object(p.a)({},e,{id:a.id,status:a.status,level:a.level}),n=Object(p.a)({},e,{token:a.token,username:a.username,id:a.id,level:a.level,status:a.status});t(ha(r)),t((l=n,function(){var e=Object(g.a)(v.a.mark((function e(a){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a({type:"UPDATE_CURRENT_USER",data:l});case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}())),t(j("".concat(r.first_name," ").concat(r.last_name," updated!"),"success")),console.log("updating user",r),s()}catch(c){console.error(c.response.data)}var l}})))},ya=function(e){var a=e.reportDetails;return a?n.a.createElement("div",{style:{display:"inline",color:"white",float:"right",marginTop:"auto",marginRight:"0.6rem",marginBottom:"0.7rem"}},n.a.createElement(u.b,{to:"/reports/".concat(a.id)},a.program_name," ",n.a.createElement("br",null),Me()(a.program_date).format("DD.MM.YYYY")," ",a.program_start_time.slice(0,-3)," -"," ",a.program_end_time.slice(0,-3))):null},ka=function(e){var a=e.currentUser,t=e.reportDetails,r=Object(o.b)(),l=n.a.createElement("span",null,n.a.createElement(q.a,{color:"pink",name:"user",size:"large"})," ",a.first_name," ",a.last_name),c=[{key:"user",text:n.a.createElement(_a,{currentUser:a}),icon:"user",onClick:function(){return n.a.createElement(_a,{currentUser:a})}},{key:"sign-out",text:"Log out",icon:"sign out",onClick:function(){r(ma())}}];return n.a.createElement("div",{style:{marginBottom:"1.5rem"}},n.a.createElement(pa.a,{pointing:!0,stackable:!0,inverted:!0},n.a.createElement(pa.a.Item,{link:!0},n.a.createElement(u.b,{to:"/"},n.a.createElement(ba.a,{alt:"logo",src:va.a,size:"mini"}))),n.a.createElement(pa.a.Item,{link:!0},n.a.createElement(u.b,{to:"/reports"},n.a.createElement("h4",null,"REPORTS"))),n.a.createElement(pa.a.Item,{link:!0},n.a.createElement(u.b,{to:"/top100"},n.a.createElement("h4",null,"TOP 100"))),n.a.createElement(pa.a.Item,{link:!0},n.a.createElement(u.b,{to:"/search"},n.a.createElement("h4",null,"SEARCH"))),n.a.createElement(pa.a.Item,{link:!0},n.a.createElement(u.b,{to:"/transfer"},n.a.createElement("h4",null,"TRANSFER FILES"))),n.a.createElement(pa.a.Item,{link:!0},n.a.createElement(u.b,{to:"/programs"},n.a.createElement("h4",null,"PROGRAMS"))),n.a.createElement(pa.a.Item,{link:!0},n.a.createElement(u.b,{to:"/users"},n.a.createElement("h4",null,"USERS"))),n.a.createElement(pa.a.Item,{position:"right"},n.a.createElement(Ea.a,{trigger:l,options:c,pointing:"top left",icon:null})),n.a.createElement(pa.a.Item,null,n.a.createElement(ya,{reportDetails:t}))))},Oa=function(e){var a=e.currentUser,t=e.reportDetails,r=Object(o.b)(),l=n.a.createElement("span",null,n.a.createElement(q.a,{color:"pink",name:"user",size:"large"})," ",a.first_name," ",a.last_name),c=[{key:"user",text:n.a.createElement(_a,{currentUser:a}),icon:"user",onClick:function(){return n.a.createElement(_a,{currentUser:a})}},{key:"sign-out",text:"Log out",icon:"sign out",onClick:function(){r(ma())}}];return n.a.createElement("div",{style:{marginBottom:"1.5rem"}},n.a.createElement(pa.a,{pointing:!0,stackable:!0,inverted:!0},n.a.createElement(pa.a.Item,{link:!0},n.a.createElement(u.b,{to:"/"},n.a.createElement(ba.a,{alt:"logo",src:va.a,size:"mini"}))),n.a.createElement(pa.a.Item,{link:!0},n.a.createElement(u.b,{to:"/reports"},n.a.createElement("h4",null,"REPORTS"))),n.a.createElement(pa.a.Item,{link:!0},n.a.createElement(u.b,{to:"/top100"},n.a.createElement("h4",null,"TOP 100"))),n.a.createElement(pa.a.Item,{link:!0},n.a.createElement(u.b,{to:"/search"},n.a.createElement("h4",null,"SEARCH"))),n.a.createElement(pa.a.Item,{link:!0},n.a.createElement(u.b,{to:"/transfer"},n.a.createElement("h4",null,"TRANSFER FILES"))),n.a.createElement(pa.a.Item,{link:!0},n.a.createElement(u.b,{to:"/programs"},n.a.createElement("h4",null,"PROGRAMS"))),n.a.createElement(pa.a.Item,{position:"right"},n.a.createElement(Ea.a,{trigger:l,options:c,pointing:"top left",icon:null})),n.a.createElement(pa.a.Item,null,n.a.createElement(ya,{reportDetails:t}))))},Ta=function(e){var a=e.currentUser,t=e.reportDetails,r=Object(o.b)(),l=n.a.createElement("span",null,n.a.createElement(q.a,{color:"pink",name:"user",size:"large"})," ",a.first_name," ",a.last_name),c=[{key:"user",text:n.a.createElement(_a,{currentUser:a}),icon:"user",onClick:function(){return n.a.createElement(_a,{currentUser:a})}},{key:"sign-out",text:"Log out",icon:"sign out",onClick:function(){r(ma())}}];return n.a.createElement("div",{style:{marginBottom:"1.5rem"}},n.a.createElement(pa.a,{pointing:!0,stackable:!0,inverted:!0},n.a.createElement(pa.a.Item,{link:!0},n.a.createElement(u.b,{to:"/"},n.a.createElement(ba.a,{alt:"logo",src:va.a,size:"mini"}))),n.a.createElement(pa.a.Item,{link:!0},n.a.createElement(u.b,{to:"/reports"},n.a.createElement("h4",null,"REPORTS"))),n.a.createElement(pa.a.Item,{link:!0},n.a.createElement(u.b,{to:"/top100"},n.a.createElement("h4",null,"TOP 100"))),n.a.createElement(pa.a.Item,{link:!0},n.a.createElement(u.b,{to:"/search"},n.a.createElement("h4",null,"SEARCH"))),n.a.createElement(pa.a.Item,{position:"right"},n.a.createElement(Ea.a,{trigger:l,options:c,pointing:"top left",icon:null})),n.a.createElement(pa.a.Item,null,n.a.createElement(ya,{reportDetails:t}))))},Aa=function(){var e,a=Object(o.c)((function(e){return e.login})),t=Object(o.c)((function(e){return e.report}));switch(null===(e=a.currentUser)||void 0===e?void 0:e.level){case 1:return n.a.createElement(Ta,{reportDetails:t.reportDetails,currentUser:a.currentUser});case 2:return n.a.createElement(Oa,{reportDetails:t.reportDetails,currentUser:a.currentUser});case 3:return n.a.createElement(ka,{reportDetails:t.reportDetails,currentUser:a.currentUser});default:return null}},Ca=t(699),wa=function(e){var a=e.notification;return"success"===a.type?n.a.createElement("div",{className:"fixedTop"},n.a.createElement(Ca.a,{floating:!0,success:!0,header:a.message})):"fail"===a.type?n.a.createElement("div",{className:"fixedTop"},n.a.createElement(Ca.a,{floating:!0,negative:!0,header:a.message})):null},Sa=function(){return function(){var e=Object(g.a)(v.a.mark((function e(a){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:"SET_LOADING"}),e.next=4,ua.getAll();case 4:t=e.sent,a({type:"GET_ALL_PROGRAMS",data:t}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("error getting all programs programActions.getAllPrograms",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(a){return e.apply(this,arguments)}}()},Ra=t(705),ja=[{value:1,label:"Visible"},{value:0,label:"Invisible"}],xa=[{value:1,label:"Visible"},{value:0,label:"Invisible"}],Da=function(e){var a,t=e.onSubmit,r=e.onCancel,l=e.login,c=e.program;return n.a.createElement(I.d,{initialValues:{id:c.id,name:c.name,identifier:c.identifier,display:c.display||1,site:c.site||1,user_id:null===(a=l.currentUser)||void 0===a?void 0:a.id},onSubmit:t,validate:function(e){var a={};return e.name||(a.name="Field is required"),console.log(e.display),console.log(e.site),a}},(function(e){var a=e.isValid;return n.a.createElement(I.c,{className:"form ui"},n.a.createElement(I.b,{label:"Name",placeholder:"Name",name:"name",component:P}),n.a.createElement(I.b,{label:"Identifier",placeholder:"Identifier",name:"identifier",type:"password",component:P}),n.a.createElement(G,{label:"Display",name:"display",options:ja}),n.a.createElement(G,{label:"Display on site",name:"site",options:xa}),n.a.createElement(x.a,null,n.a.createElement(x.a.Column,{floated:"left",width:5},n.a.createElement(L.a,{type:"button",onClick:r,color:"red"},"Cancel")),n.a.createElement(x.a.Column,{floated:"right",width:5},n.a.createElement(L.a,{type:"submit",floated:"right",color:"green",disabled:!a},"Save changes"))))}))},La=function(e){var a=e.modalOpen,t=e.onClose,r=e.onSubmit,l=e.error,c=e.program,o=e.login;return n.a.createElement(ne.a,{open:a,onClose:t,centered:!1,closeIcon:!0},n.a.createElement(ne.a.Header,null,"Edit info of program ",c.name),n.a.createElement(ne.a.Content,null,l&&n.a.createElement(Ra.a,{inverted:!0,color:"red"},"Error: ".concat(l)),n.a.createElement(Da,{program:c,login:o,onSubmit:r,onCancel:t})))},Ia=function(e){var a=e.onSubmit,t=e.onCancel,r=e.selectOptions;return n.a.createElement(I.d,{initialValues:{programToMerge:r[0].value},onSubmit:a},(function(e){var a=e.dirty;return n.a.createElement(I.c,{className:"form ui"},n.a.createElement("span",{style:{color:"red"}},n.a.createElement(G,{label:"",name:"programToMerge",options:r})),n.a.createElement(x.a,null,n.a.createElement(x.a.Column,{style:{marginTop:"1rem"},floated:"left",width:5},n.a.createElement(L.a,{type:"button",onClick:t,color:"red"},"Cancel")),n.a.createElement(x.a.Column,{floated:"right",width:5},n.a.createElement(L.a,{type:"submit",floated:"right",color:"green",disabled:!a},"Merge"))))}))},Na=function(e){var a=e.program_id,t=e.program_name,l=Object(o.b)(),c=Object(o.c)((function(e){return e.program})),u=Object(r.useState)(!1),i=Object(J.a)(u,2),s=i[0],m=i[1],d=function(){m(!0)},p=function(){m(!1)};if(!s)return n.a.createElement("button",{type:"button",className:"link-btn",onClick:d},a);var b=c.allPrograms.map((function(e){return{key:e.id,label:"".concat(e.id," - ").concat(e.name),value:e.id}}));return n.a.createElement(ne.a,{open:s,closeIcon:!0,onClose:p,trigger:n.a.createElement("button",{type:"button",className:"link-btn",onClick:d},a)},n.a.createElement(D.a,null,"Merge ",a," - ",t," with:"),n.a.createElement(ne.a.Content,null,n.a.createElement(Ia,{onSubmit:function(e){console.log(Number(e.programToMerge));var t={type:"program",merge:Number(e.programToMerge),mergeTo:a};console.log(t),l(function(e){return function(){var a=Object(g.a)(v.a.mark((function a(t){var r;return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t({type:"SET_LOADING"}),a.next=4,ua.mergePrograms(e);case 4:return a.next=6,ua.getAll();case 6:r=a.sent,t({type:"GET_ALL_PROGRAMS",data:r}),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),console.log("error merging two programs programActions.mergePrograms",a.t0);case 13:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(e){return a.apply(this,arguments)}}()}(t)),l(j("Ohjelma #".concat(t.merge," yhdistetty!"),"success")),p()},onCancel:p,selectOptions:b})))},Ga=function(e){var a,t=e.program,l=Object(o.c)((function(e){return e.login})),c=Object(o.b)(),u=Object(r.useState)(!1),i=Object(J.a)(u,2),s=i[0],m=i[1],d=Object(r.useState)(),p=Object(J.a)(d,2),b=p[0],E=p[1];1===t.display&&(a="active-program");var f=function(){m(!1),E(void 0)};return n.a.createElement(H.a.Row,{className:a},n.a.createElement(H.a.Cell,null,n.a.createElement(Na,{program_id:t.id,program_name:t.name})),n.a.createElement(H.a.Cell,null,n.a.createElement(La,{program:t,login:l,modalOpen:s,onSubmit:function(e){try{console.log(e),c((a=e,function(){var e=Object(g.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"SET_LOADING"}),e.next=4,ua.updateProgram(a);case 4:t({type:"UPDATE_PROGRAM",data:a}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("error updating program",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(a){return e.apply(this,arguments)}}())),c(j("".concat(e.name," updated!"),"success")),f()}catch(t){console.error(t.response.data),E(t.response.data.error)}var a},error:b,onClose:f}),n.a.createElement("button",{style:{border:"none",cursor:"pointer",color:"blue"},onClick:function(){return m(!0)}},t.name)),n.a.createElement(H.a.Cell,null,t.identifier))},Pa=function(e){var a,t,r=e.login,l=e.program;return null===l.allPrograms||!0===l.loading?n.a.createElement(d.a,null,n.a.createElement(b.a,{active:!0,inverted:!0},n.a.createElement(E.a,{size:"medium"},"Loading programs..."))):2===(null===(a=r.currentUser)||void 0===a?void 0:a.level)||3===(null===(t=r.currentUser)||void 0===t?void 0:t.level)?n.a.createElement(d.a,null,n.a.createElement("div",{style:{marginTop:"1rem",marginBottom:"1rem"}},n.a.createElement("h3",{style:{display:"inline"}},"Programs")),n.a.createElement(H.a,{striped:!0},n.a.createElement(H.a.Header,null,n.a.createElement(H.a.Row,null,n.a.createElement(H.a.Cell,null,"ID"),n.a.createElement(H.a.Cell,null,"Program name"),n.a.createElement(H.a.Cell,null,"Additional info"))),n.a.createElement(H.a.Body,null,l.allPrograms.map((function(e){return n.a.createElement(Ga,{program:e,key:e.id})}))))):null},Ma=[{value:1,label:"Visible"},{value:0,label:"Invisible"}],Ua=[{value:1,label:"Visible"},{value:0,label:"Invisible"}],Fa=function(e){var a,t=e.onSubmit,r=e.onCancel,l=e.login;return n.a.createElement(I.d,{initialValues:{name:"",identifier:"",display:1,site:1,user_id:null===(a=l.currentUser)||void 0===a?void 0:a.id},onSubmit:t,validate:function(e){var a={};return e.name||(a.name="Field is required"),console.log(e.display),console.log(e.site),a}},(function(e){var a=e.isValid,t=e.dirty;return n.a.createElement(I.c,{className:"form ui"},n.a.createElement(I.b,{label:"Name",placeholder:"Name",name:"name",component:M}),n.a.createElement(I.b,{label:"Identifier",placeholder:"Identifier",name:"identifier",type:"password",component:P}),n.a.createElement(G,{label:"Display",name:"display",options:Ma}),n.a.createElement(G,{label:"Display on site",name:"site",options:Ua}),n.a.createElement(x.a,null,n.a.createElement(x.a.Column,{floated:"left",width:5},n.a.createElement(L.a,{type:"button",onClick:r,color:"red"},"Cancel")),n.a.createElement(x.a.Column,{floated:"right",width:5},n.a.createElement(L.a,{type:"submit",floated:"right",color:"green",disabled:!t||!a},"Add"))))}))},Ba=function(e){var a=e.modalOpen,t=e.onClose,r=e.onSubmit,l=e.error,c=e.login;return n.a.createElement(ne.a,{open:a,onClose:t,centered:!1,closeIcon:!0},n.a.createElement(ne.a.Header,null,"Add a new program"),n.a.createElement(ne.a.Content,null,l&&n.a.createElement(Ra.a,{inverted:!0,color:"red"},"Error: ".concat(l)),n.a.createElement(Fa,{onSubmit:r,onCancel:t,login:c})))},Ya=function(){var e=Object(o.c)((function(e){return e.program})),a=Object(o.c)((function(e){return e.login})),t=Object(o.b)();Object(r.useEffect)((function(){t(Sa())}),[]);var l=n.a.useState(!1),c=Object(J.a)(l,2),u=c[0],i=c[1],s=n.a.useState(),m=Object(J.a)(s,2),b=m[0],E=m[1],f=function(){i(!1),E(void 0)};return n.a.createElement(d.a,null,n.a.createElement(L.a,{floated:"right",color:"green",style:{marginBottom:"0.5rem"},onClick:function(){return i(!0)}},n.a.createElement(q.a,{name:"add"}),"Create a new program"),n.a.createElement(Ba,{modalOpen:u,onSubmit:function(e){try{var a=Object(p.a)({},e,{display:Number(e.display),site:Number(e.site)});console.log(a),t(function(e){return function(){var a=Object(g.a)(v.a.mark((function a(t){var r;return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t({type:"SET_LOADING"}),a.next=4,ua.createProgram(e);case 4:r=a.sent,t({type:"CREATE_NEW_PROGRAM",data:r}),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log("error creating new program",a.t0);case 11:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(e){return a.apply(this,arguments)}}()}(a)),console.log("adding program",a),f()}catch(r){console.error(r.response.data),E(r.response.data.error)}},error:b,onClose:f,login:a}),n.a.createElement(Pa,{program:e,login:a}))},Va=t(707),za=function(e){var a=e.onSubmit;return n.a.createElement(I.d,{initialValues:{reportYear:"2020",reportMonth:"01"},onSubmit:a},(function(){return n.a.createElement(I.c,{className:"form ui"},n.a.createElement(x.a,null,n.a.createElement(x.a.Column,{width:4},n.a.createElement(G,{label:"Select month",name:"reportMonth",options:ve})),n.a.createElement(x.a.Column,{width:4},n.a.createElement(G,{label:"Select year",name:"reportYear",options:Te})),n.a.createElement(x.a.Column,{width:4},n.a.createElement(L.a,{type:"submit",color:"green",style:{marginTop:"1.6rem"}},"Get reports"))))}))},Ha=function(e){var a,t,l=e.loginLevel,c=e.report,i=Object(o.b)(),s=Object(r.useState)(!1),m=Object(J.a)(s,2),d=m[0],p=m[1];if(1===c.status)a="Ready";else if(0===c.status)a="In progress";else if(9===c.status)return a="Deleted",null;return 1===c.rerun&&(t="rerun"),1===l&&1===c.rerun?null:n.a.createElement(n.a.Fragment,null,n.a.createElement(H.a.Row,{className:t},n.a.createElement(Va.a,{as:H.a.Cell,minWidth:768},c.program_no),n.a.createElement(H.a.Cell,null,n.a.createElement(u.b,{className:t,to:"reports/".concat(c.id)},c.name)),n.a.createElement(H.a.Cell,null,Me()(c.program_date).format("DD.MM.YYYY")),n.a.createElement(H.a.Cell,null,c.program_start_time.slice(0,-3)," -"," ",c.program_end_time.slice(0,-3)),n.a.createElement(H.a.Cell,null,a),n.a.createElement(H.a.Cell,null,n.a.createElement(q.a,{style:{color:"red"},name:"delete",onClick:function(){return p(!0)}}),n.a.createElement(Ye.a,{content:"Haluatko varmasti poistaa raportin ".concat(c.name," ").concat(c.program_date),open:d,onCancel:function(){p(!1)},onConfirm:function(){var e;p(!1),i((e=c.id,function(){var a=Object(g.a)(v.a.mark((function a(t){return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t({type:"SET_LOADING"}),a.next=4,$e.deleteReport(e);case 4:t({type:"DELETE_REPORT",data:e}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log(a.t0);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}())),i(j("".concat(c.name," ").concat(c.program_date," poistettu!"),"success"))}}))))},Ka=t(35),qa=function(e){var a=e.user,t=(e.login,Object(o.b)()),l=Object(r.useState)(null),c=Object(J.a)(l,2),u=c[0],i=c[1],s=Object(r.useState)(null),m=Object(J.a)(s,2),d=m[0],p=(m[1],Object(r.useState)("")),b=Object(J.a)(p,2),E=b[0],f=b[1];Object(r.useEffect)((function(){var e,a;t((e=u,function(a){a({type:"FILTER_BY_USER_ID",data:e})})),t(function(e){return function(a){a({type:"FILTER_BY_STATUS",data:e})}}(d)),t((a=E,function(){var e=Object(g.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"FILTER_BY_TEXT",data:a});case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()))}),[u,d,E]);var h=a.users.map((function(e){return{key:e.id,label:"".concat(e.first_name," ").concat(e.last_name),value:e.id}})),_=[{key:0,label:"All users",value:0}].concat(Object(Ka.a)(h));return n.a.createElement(x.a,null,n.a.createElement(x.a.Column,{width:4},n.a.createElement(I.d,{initialValues:{userId:null},onSubmit:function(e){console.log(e.userId),i(Number(e.userId))},validate:function(e){console.log(e),i(Number(e.userId))}},(function(){return n.a.createElement(I.c,{className:"form ui"},n.a.createElement(G,{label:"Filter by user",name:"userId",options:_}))}))),n.a.createElement(x.a.Column,{width:4},n.a.createElement(I.d,{initialValues:{filterText:""},onSubmit:function(e){console.log(e.filterText),f(e.filterText)},validate:function(e){f(e.filterText)}},(function(){return n.a.createElement(I.c,{className:"form ui"},n.a.createElement(I.b,{label:"Filter text",placeholder:"Program name...",name:"filterText",component:P}))}))))},Ja=function(){var e=Object(o.b)(),a=Object(o.c)((function(e){return e.login})),t=Object(o.c)((function(e){return e.user})),l=Object(o.c)((function(e){return e.reportList}));Object(r.useEffect)((function(){var t;1===(null===(t=a.currentUser)||void 0===t?void 0:t.level)?null===l.reportListDate?e(aa(Me()().format("YYYY-MM"),a.currentUser.id)):e(aa(l.reportListDate,a.currentUser.id)):null===l.reportListDate?e(ea(Me()().format("YYYY-MM"))):e(ea(l.reportListDate))}),[]);var c,u=function(t){var r;console.log(t);var n="".concat(t.reportYear,"-").concat(t.reportMonth);1===(null===(r=a.currentUser)||void 0===r?void 0:r.level)?e(aa(n,a.currentUser.id)):e(ea(n))};if(null===l.reportList||l.loading)return n.a.createElement(b.a,{active:!0},n.a.createElement(E.a,{content:"Ladataan..."}));if(0===l.reportList.length)return n.a.createElement(d.a,null,n.a.createElement("h2",null,"No reports in the selected time period"),n.a.createElement(za,{onSubmit:u}));c=null===l.reportListDate?Me()().format("MMMM YYYY"):Me()(l.reportListDate).format("MMMM YYYY");var i=l.reportList;return i=0===Number(l.filterByText)?i:i=i.filter((function(e){return e.name.toLowerCase().includes(l.filterByText.toLowerCase())})),i=null===l.filterUserValue?i:i=i.filter((function(e){return e.user_id===l.filterUserValue})),i=null===l.filterStatusValue?i:i=i.filter((function(e){return e.status===l.filterStatusValue})),n.a.createElement(d.a,null,n.a.createElement("h3",null,"Reports ",c),n.a.createElement(za,{onSubmit:u}),n.a.createElement(qa,{user:t,login:a}),n.a.createElement(H.a,{striped:!0},n.a.createElement(H.a.Header,null,n.a.createElement(H.a.Row,null,n.a.createElement(Va.a,{as:H.a.Cell,minWidth:768},"Program number"),n.a.createElement(H.a.Cell,null,"Program name"),n.a.createElement(H.a.Cell,null,"Date"),n.a.createElement(H.a.Cell,null,"Time"),n.a.createElement(H.a.Cell,null,"Status"),n.a.createElement(H.a.Cell,null))),n.a.createElement(H.a.Body,null,i.map((function(e){var t;return n.a.createElement(Ha,{key:e.id,report:e,loginLevel:null===(t=a.currentUser)||void 0===t?void 0:t.level})})))))},Wa=t(378),Za=t(688),Qa=function(e){var a,t,l=e.track,c=e.report,u=Object(r.useState)(!1),i=Object(J.a)(u,2),s=i[0],m=i[1],d=Object(o.b)();a=(a=Math.floor(l.length/60)).toString(),1===(t=l.length-60*a).toString().length&&(t="0".concat(t.toString())),t=t.toString();return n.a.createElement(H.a.Row,null,n.a.createElement(H.a.Cell,null,n.a.createElement(Za.a,{onChange:function(){var e;m(!s),d(!0===s?(e=l.report_track_id,function(){var a=Object(g.a)(v.a.mark((function a(t){return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:try{t({type:"UNCHECK_FOR_DELETE",data:e})}catch(r){console.log("reportActions unCheckForDelete error",r)}case 1:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()):function(e){return function(){var a=Object(g.a)(v.a.mark((function a(t){return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:try{t({type:"CHECK_FOR_DELETE",data:e})}catch(r){console.log("reportActions checkFordelete error",r)}case 1:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(l.report_track_id))},checked:s}),n.a.createElement(q.a,{style:{marginLeft:"1.5rem",cursor:"pointer"},name:"arrows alternate"})),n.a.createElement(H.a.Cell,null,l.sortable_rank),n.a.createElement(H.a.Cell,null,l.artist_name),n.a.createElement(H.a.Cell,null,l.track_title),n.a.createElement(H.a.Cell,null,a,":",t),n.a.createElement(H.a.Cell,null,n.a.createElement(q.a,{style:{cursor:"pointer"},color:"red",onClick:function(){var e,a=c.report.filter((function(e){return e.report_track_id!==l.report_track_id})),t={report_track_id:l.report_track_id,report_id:(null===(e=c.reportDetails)||void 0===e?void 0:e.id)||0,remainingTracks:a};d(function(e){return function(){var a=Object(g.a)(v.a.mark((function a(t){var r;return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t({type:"SET_LOADING"}),a.next=4,Q.deleteTrackFromReport(e.report_track_id);case 4:return a.next=6,Q.getOne(e.report_id);case 6:r=a.sent,t({type:"GET_ONE_REPORT",data:r}),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),console.log("reportActions deleteTrackFromReport error: ",a.t0);case 13:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(e){return a.apply(this,arguments)}}()}(t))},name:"delete"})),n.a.createElement(H.a.Cell,null))},Xa=function(e){var a=e.report;return n.a.createElement(H.a,{striped:!0},n.a.createElement(H.a.Header,null,n.a.createElement(H.a.Row,null,n.a.createElement(H.a.Cell,null),n.a.createElement(H.a.Cell,null,"#"),n.a.createElement(H.a.Cell,null,"Artist"),n.a.createElement(H.a.Cell,null,"Track Title"),n.a.createElement(H.a.Cell,null,"Length"),n.a.createElement(H.a.Cell,null),n.a.createElement(H.a.Cell,null))),n.a.createElement(H.a.Body,null,a.report.map((function(e){return n.a.createElement(Qa,{key:e.report_track_id,track:e,report:a})}))),n.a.createElement(H.a.Footer,null,n.a.createElement(H.a.Row,null)))},$a=t(700),et=t(379),at=t(373),tt=t(374),rt=function(){var e,a=Object(r.useState)(null),t=Object(J.a)(a,2),l=t[0],c=t[1],u=Object(r.useState)(!1),s=Object(J.a)(u,2),m=s[0],d=s[1],p=function(){var e=Object(r.useState)(""),a=Object(J.a)(e,2),t=a[0],n=a[1],l=Object(at.a)((function(){return Object(et.a)(R.getTracksForAutocompleteSearch,400)})),c=Object(tt.useAsync)(Object(g.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=4;break}return e.abrupt("return",[]);case 4:return e.abrupt("return",l(t));case 5:case"end":return e.stop()}}),e)}))),[t]);return{inputText:t,setInputText:n,search:c}}(),b=p.setInputText,E=p.search,f=Object(o.c)((function(e){return e.report})),h=Object(o.b)(),_=function(e,a){var t,r=a.result;console.log(" selected result",r);var n={track_id:r.value,report_id:null===(t=f.reportDetails)||void 0===t?void 0:t.id,length:r.length,sortable_rank:f.report.length+1};c(n)};e=void 0===E.result?[]:E.result.map((function(e){return{key:e.track_id,title:e.track_title,description:"".concat(e.artist,":\n                    ").concat(e.album),length:e.length,value:e.track_id}}));return m?n.a.createElement(i.a,{to:"/search"}):n.a.createElement("div",{style:{marginLeft:"1rem",marginBottom:"1rem"}},n.a.createElement(N.a,null,n.a.createElement(D.a,null,"Search"),n.a.createElement(N.a.Group,null,n.a.createElement(N.a.Field,{width:8},n.a.createElement($a.a,{loading:E.loading,onResultSelect:_,onSearchChange:function(e){return b(e.target.value)},onSelectionChange:_,results:e,style:{cursor:"pointer"}})),n.a.createElement(N.a.Field,{width:8},n.a.createElement(L.a,{color:"green",onClick:function(){l?(console.log(l),h($(l)),c(null)):h(j("Valitse biisi!","fail"))}},"Add the track to the report"))),n.a.createElement(N.a.Group,null,n.a.createElement(N.a.Field,{width:8}," ",n.a.createElement(L.a,{onClick:function(){d(!0)},color:"blue"},"Advanced search")),n.a.createElement(N.a.Field,{width:6}," "))))},nt=function(e){var a=e.reportDetails,t=e.onSubmit,r=e.sortable_rank_start,l=[{key:"928",label:"Studio 1",value:"928"},{key:"1047",label:"Studio 2",value:"1047"}];return n.a.createElement(I.d,{initialValues:{studioId:"928",date:Me()(null===a||void 0===a?void 0:a.program_date).format("YYYY-MM-DD"),startTime:(null===a||void 0===a?void 0:a.program_start_time.slice(0,2))||"",endTime:(null===a||void 0===a?void 0:a.program_end_time.slice(0,2))||"",report_id:(null===a||void 0===a?void 0:a.id)||0,sortable_rank_start:r},onSubmit:t},(function(){return n.a.createElement(I.c,{className:"form ui"},n.a.createElement(x.a,null,n.a.createElement(x.a.Column,{width:8},n.a.createElement("label",null,"Select date"),n.a.createElement(Ue.b,{name:"date",dateFormat:"dd.MM.yyyy",placeholder:"dd.mm.yyyy"})," "),n.a.createElement(x.a.Column,{width:8},n.a.createElement(G,{label:"Studio",name:"studioId",options:l})),n.a.createElement(x.a.Column,{width:8},n.a.createElement(G,{label:"Starting",name:"startTime",options:Ee})),n.a.createElement(x.a.Column,{width:8},n.a.createElement(G,{label:"Ending",name:"endTime",options:fe}))),n.a.createElement(L.a,{style:{marginTop:"1rem"},type:"submit",color:"green"},"Get Tracks"))}))},lt=function(){var e=Object(o.b)(),a=Object(o.c)((function(e){return e.report}));return n.a.createElement(n.a.Fragment,null,n.a.createElement(D.a,null,"Get tracks from playlog"),n.a.createElement("div",{style:{color:"red",marginBottom:"2rem"}},"In the demo app playlog data is only available on dates between 2020-03-01 - 2020-03-31"),n.a.createElement(nt,{onSubmit:function(t){var r,n={studioId:t.studioId,date:Me()(t.date).format("YYYY-MM-DD"),startTime:t.startTime,endTime:t.endTime,report_id:(null===(r=a.reportDetails)||void 0===r?void 0:r.id)||0,sortable_rank_start:a.report.length};console.log("get playlog params",n),e(function(e){return function(){var a=Object(g.a)(v.a.mark((function a(t){var r;return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t({type:"SET_LOADING"}),a.next=4,Q.checkPlaylogTracks(e);case 4:r=a.sent,console.log("returnArray at report action",r),t({type:"GET_PLAYLOG_TRACKS",data:r}),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0);case 12:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e){return a.apply(this,arguments)}}()}(n))},reportDetails:a.reportDetails,sortable_rank_start:a.report.length}))},ct=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(D.a,null,"Add a track to the report:"),n.a.createElement(Ra.a.Group,{horizontal:!0},n.a.createElement(Ra.a,null,n.a.createElement(rt,null)),n.a.createElement(Ra.a,null,n.a.createElement(lt,null))))},ot=function(e){var a=e.onSubmit,t=e.onRerunChange,r=e.programOptions,l=e.userOptions,c=e.reportDetails,o=e.rerun;return n.a.createElement(x.a,{divided:"vertically"},n.a.createElement(x.a.Row,{columns:2},n.a.createElement(x.a.Column,null,n.a.createElement(D.a,null,"Report details:"),n.a.createElement(I.d,{initialValues:{id:c.id,program_name:c.program_name,program_no:c.program_no,program_dj:c.program_dj,program_date:Me()(c.program_date).format("YYYY-MM-DD"),program_start_time:c.program_start_time,program_end_time:c.program_end_time,program_id:c.program_id,rerun:c.rerun,status:c.status,user_id:c.user_id,username:c.username,first_name:c.first_name,last_name:c.last_name},onSubmit:a,validate:function(e){console.log(e);var a={};return e.program_dj||(a.name="Field is required"),void 0===e.program_start_time&&(a.name="Field is required"),void 0===e.program_end_time&&(a.name="Field is required"),parseInt(e.program_end_time)<=parseInt(e.program_start_time)&&"23:59"!==e.program_end_time&&(a.program_end_time="Check start and end times!"),a}},(function(e){var a=e.isValid;return n.a.createElement(Ue.c,{className:"form ui"},n.a.createElement(G,{label:"Program",name:"program_id",options:r}),n.a.createElement(I.b,{label:"Program number",name:"program_no",component:Y,min:0,max:999}),n.a.createElement(I.b,{label:"DJ",placeholder:"DJ",name:"program_dj",component:P}),n.a.createElement(x.a,{style:{marginBottom:"0.5rem"}},n.a.createElement(x.a.Column,{width:5,style:{marginTop:"0.3rem"}},n.a.createElement("label",null,"Program date"),n.a.createElement(Ue.b,{name:"program_date",dateFormat:"dd.MM.yyyy",placeholder:"dd.mm.yyyy"})," "),n.a.createElement(x.a.Column,{width:5},n.a.createElement(G,{label:"Start time",name:"program_start_time",options:Ee})),n.a.createElement(x.a.Column,{width:5},n.a.createElement(G,{label:"End time",name:"program_end_time",options:fe}))),n.a.createElement(G,{label:"Report status",name:"status",options:ge}),n.a.createElement(G,{label:"User",name:"user_id",options:l}),n.a.createElement(Ue.a,{name:"rerun",label:"Rerun",onChange:t,checked:!!o}),n.a.createElement(L.a,{style:{marginTop:"1rem"},type:"submit",floated:"left",color:"green",disabled:!a},"Save changes"))})))))},ut=function(){var e,a=Object(o.b)(),t=Object(o.c)((function(e){return e.report})),l=Object(o.c)((function(e){return e.user})),c=Object(o.c)((function(e){return e.program})),u=Object(r.useState)(null===(e=t.reportDetails)||void 0===e?void 0:e.rerun),i=Object(J.a)(u,2),s=i[0],m=i[1];console.log(s);if(null===t.reportDetails||null===l.users||null===c.allPrograms)return n.a.createElement(Ra.a,null,n.a.createElement("div",null,"loading..."));var d=c.allPrograms.map((function(e){return{key:e.id,label:e.name,value:e.id}})),b=l.users.map((function(e){return{key:e.id,label:"".concat(e.first_name," ").concat(e.last_name),value:e.id}}));return n.a.createElement("div",null,n.a.createElement(ot,{reportDetails:t.reportDetails,onSubmit:function(e){var t,r=Object(p.a)({},e,{rerun:s});console.log("report to update",r),a((t=r,function(){var e=Object(g.a)(v.a.mark((function e(a){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:"SET_LOADING"}),e.next=4,Q.updateReport(t);case 4:a({type:"UPDATE_REPORT",data:t}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("reportActions updateReport error:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(a){return e.apply(this,arguments)}}())),a(j("Report details updated","success"))},programOptions:d,userOptions:b,onRerunChange:function(){m(s?null:1)},rerun:s}))},it=function(e){var a,t,l=e.id,c=Object(o.b)(),u=Object(o.c)((function(e){return e.report})),i=Object(o.c)((function(e){return e.login})),s=Object(r.useState)(u.report),m=Object(J.a)(s,2),b=m[0],E=m[1];Object(r.useEffect)((function(){c(function(e){return function(){var a=Object(g.a)(v.a.mark((function a(t){var r,n;return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t({type:"SET_LOADING"}),a.next=4,Q.getReportDetails(e);case 4:r=a.sent,n=r[0],t({type:"GET_REPORT_DETAILS",data:n,id:e}),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),console.log("reportActions getReportDetails error",a.t0);case 12:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e){return a.apply(this,arguments)}}()}(l)),c(X(l))}),[]),Object(r.useEffect)((function(){var e=setTimeout((function(){c(X(l))}),1e3);return function(){clearTimeout(e)}}),[u.playlog]),Object(r.useEffect)((function(){var e;c((e=b,function(){var a=Object(g.a)(v.a.mark((function a(t){var r;return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t({type:"SET_LOADING"}),a.next=4,Q.updateSortableRank(e);case 4:r=[],e.forEach((function(e,a){var t=Object(p.a)({},e,{sortable_rank:a+1});r.push(t)})),t({type:"GET_ONE_REPORT",data:r}),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0);case 12:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e){return a.apply(this,arguments)}}()))}),[b]);var f=n.a.createElement(L.a,{color:"red",onClick:function(){var e=u.report.filter((function(e){return!u.checkedForDelete.includes(e.report_track_id)}));c(function(e,a,t){return function(){var r=Object(g.a)(v.a.mark((function r(n){var l;return v.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,n({type:"SET_LOADING"}),console.log("function fired"),e.forEach(function(){var e=Object(g.a)(v.a.mark((function e(a){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q.deleteTrackFromReport(a);case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()),r.next=6,Q.updateSortableRank(t);case 6:return r.next=8,Q.getOne(Number(a));case 8:l=r.sent,console.log(l),n({type:"GET_ONE_REPORT",data:t}),n({type:"CLEAR_CHECKED_FOR_DELETE"}),r.next=17;break;case 14:r.prev=14,r.t0=r.catch(0),console.log("reportActions deleteChecked error:",r.t0);case 17:case"end":return r.stop()}}),r,null,[[0,14]])})));return function(e){return r.apply(this,arguments)}}()}(u.checkedForDelete,l,e))},style:{marginLeft:"1rem",marginBottom:"1rem",marginTop:"1rem"}},"Delete Selected"),h=u.report,_={onDragEnd:function(e,a){var t=h.splice(e,1)[0];h.splice(a,0,t),E(h)},nodeSelector:"tr",handleSelector:"i.arrows"};return 1===(null===(a=i.currentUser)||void 0===a?void 0:a.level)&&i.currentUser.id!==(null===(t=u.reportDetails)||void 0===t?void 0:t.user_id)?null:0===u.report.length?n.a.createElement(d.a,null,n.a.createElement(D.a,null,"Report"),n.a.createElement("div",null,"No tracks added. Please add tracks from below"),n.a.createElement(ct,null),n.a.createElement(ut,null)):n.a.createElement(d.a,null,n.a.createElement(D.a,null,"Report"),n.a.createElement(Wa.a,_,n.a.createElement(Xa,{report:u})),f,n.a.createElement(ct,null),n.a.createElement(ut,null))},st=function(e){var a=e.item;return n.a.createElement(H.a.Row,null,n.a.createElement(H.a.Cell,null,a.created_at),n.a.createElement(H.a.Cell,null,a.first_name," ",a.last_name),n.a.createElement(H.a.Cell,null,Me()(a.period).format("MM/YYYY")),n.a.createElement(H.a.Cell,null,n.a.createElement("button",{type:"button",className:"link-btn",onClick:function(){return e=a.filename,void Xe(e);var e}},a.filename)))},mt=function(e){var a=e.reportTransferList,t=e.currentUser;return null===a?n.a.createElement(d.a,null,n.a.createElement(b.a,{active:!0,inverted:!0},n.a.createElement(E.a,{size:"medium"},"Loading..."))):3===t.level?n.a.createElement(H.a,null,n.a.createElement(H.a.Header,null,n.a.createElement(H.a.Row,null,n.a.createElement(H.a.Cell,null,"Date created"),n.a.createElement(H.a.Cell,null,"User"),n.a.createElement(H.a.Cell,null,"Transfer file period"),n.a.createElement(H.a.Cell,null,"Transfer file"))),n.a.createElement(H.a.Body,null,a.map((function(e){return n.a.createElement(st,{key:e.id,item:e})})))):null},dt=function(e){var a=e.reportList,t=e.currentUser,l=Object(o.b)(),c=Object(r.useState)(""),u=Object(J.a)(c,2),i=u[0],s=u[1];return null===a.reportList||!0===a.loading?n.a.createElement(d.a,null,n.a.createElement(b.a,{active:!0,inverted:!0},n.a.createElement(E.a,{size:"medium"},"Loading..."))):n.a.createElement(I.d,{initialValues:{pickerDate:i},onSubmit:function(){var e={user_id:t.id,status:1,period:Me()(i).format("YYYY-MM"),filename:"".concat(Me()(new Date).format("YYYYMMDDhhmmss"),".txt")};l(function(e){return function(){var a=Object(g.a)(v.a.mark((function a(t){var r,n;return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t({type:"SET_LOADING"}),a.next=4,$e.generateReportDownload(e);case 4:return r=a.sent,a.next=7,$e.getAllTransfers();case 7:n=a.sent,t({type:"GET_ALL_REPORT_TRANSFERS",data:n}),t({type:"GENERATE_REPORT_TRANSFER",data:r}),a.next=15;break;case 12:a.prev=12,a.t0=a.catch(0),console.log("reportListActions generateReportTransferError",a.t0);case 15:case"end":return a.stop()}}),a,null,[[0,12]])})));return function(e){return a.apply(this,arguments)}}()}(e))},validate:function(e){s(Me()(e.pickerDate).format("YYYY-MM"))}},(function(){return n.a.createElement(I.c,{className:"form ui"},n.a.createElement("label",null,"starting"),n.a.createElement(Ue.b,{name:"pickerDate",dateFormat:"dd.MM.yyyy",placeholder:"dd.mm.yyyy"}),n.a.createElement(L.a,{type:"submit",color:"green"},"Submit"))}))},pt=function(){var e,a=Object(o.b)(),t=Object(o.c)((function(e){return e.reportList})),l=Object(o.c)((function(e){return e.login}));return Object(r.useEffect)((function(){a(function(){var e=Object(g.a)(v.a.mark((function e(a){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:"SET_LOADING"}),e.next=4,$e.getAllTransfers();case 4:t=e.sent,a({type:"GET_ALL_REPORT_TRANSFERS",data:t}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("reportListActions getAllTransfers error",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(a){return e.apply(this,arguments)}}())}),[t.lastTransfer]),3===(null===(e=l.currentUser)||void 0===e?void 0:e.level)?n.a.createElement(d.a,null,n.a.createElement(D.a,null,"Transfer files"),n.a.createElement(dt,{reportList:t,currentUser:l.currentUser}),n.a.createElement(mt,{reportTransferList:t.reportTransferList,currentUser:l.currentUser})):null},bt=function(){var e=Object(o.b)(),a=[{key:1,label:"Tracks",value:"tr"},{key:2,label:"Artists",value:"ar"},{key:3,label:"Albums",value:"al"}];return n.a.createElement(x.a,{columns:2},n.a.createElement(x.a.Column,null,n.a.createElement(I.d,{initialValues:{query:"",kind:"ar"},onSubmit:function(a){var t;e((t=a,function(){var e=Object(g.a)(v.a.mark((function e(a){var r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:"SET_SEARCH_LOADING"}),e.next=4,R.advancedSearch(t);case 4:r=e.sent,a({type:"ADVANCED_RESULTS",data:r}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("searchActions error getting advanced results",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(a){return e.apply(this,arguments)}}()))}},(function(){return n.a.createElement(I.c,{className:"form ui"},n.a.createElement(x.a,null,n.a.createElement(x.a.Column,{width:8},n.a.createElement(I.b,{label:"Search query",placeholder:"Artist, album, track...",name:"query",component:P})),n.a.createElement(x.a.Column,{width:8},n.a.createElement(G,{label:"Search for",name:"kind",options:a})),n.a.createElement(x.a.Column,{width:8},n.a.createElement(L.a,{type:"submit"},"Search"))))}))))},Et=function(e){var a=e.result;return null===a?null:n.a.createElement(H.a.Row,null,n.a.createElement(H.a.Cell,null,n.a.createElement(u.b,{to:"../artist/".concat(a.artist_id)},a.artist_name)),n.a.createElement(H.a.Cell,null,n.a.createElement(u.b,{to:"../album/".concat(a.album_id)},a.album_name)),n.a.createElement(H.a.Cell,null,n.a.createElement(u.b,{to:"../track/".concat(a.track_id)},a.track_title)),n.a.createElement(H.a.Cell,null,n.a.createElement(u.b,{to:"../reports/".concat(a.report_id)},a.program_date)),n.a.createElement(H.a.Cell,null,n.a.createElement(ae,{track_title:a.track_title,track_id:a.track_id,length:a.length})))},ft=function(){var e=Object(o.b)(),a=Object(r.useState)(1),t=Object(J.a)(a,2),l=t[0],c=t[1];Object(r.useEffect)((function(){e(function(e){return function(){var a=Object(g.a)(v.a.mark((function a(t){return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:try{t({type:"SORT_ADVANCED_RESULTS",data:e})}catch(r){console.log("searchActions error sorting advanced results",r)}case 1:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(l))}),[l]);var u=[{key:1,label:"Track title",value:1},{key:2,label:"Artist name",value:2}];return n.a.createElement(x.a,{columns:4},n.a.createElement(x.a.Column,null,n.a.createElement(I.d,{initialValues:{sortBy:1},onSubmit:function(e){c(e.sortBy)},validate:function(e){c(Number(e.sortBy))}},(function(){return n.a.createElement(I.c,{className:"form ui"},n.a.createElement(G,{label:"Sort by",name:"sortBy",options:u}))}))))},vt=function(e){var a=e.search;if(0===a.advancedResults.length)return n.a.createElement("div",null,"no results. please enter a query");if(!0===a.loading)return n.a.createElement(b.a,{active:!0},n.a.createElement(E.a,null,"Loading results..."));var t=a.advancedResults;return t=2===a.sortAdvancedResults?t:t.sort((function(e,a){return e.track_title>a.track_title?1:a.track_title>e.track_title?-1:0})),t=1===a.sortAdvancedResults?t:t.sort((function(e,a){return e.artist_name>a.artist_name?1:a.artist_name>e.artist_name?-1:0})),n.a.createElement("div",{style:{marginTop:"2rem"}},n.a.createElement(ft,null),n.a.createElement(H.a,{striped:!0},n.a.createElement(H.a.Header,null,n.a.createElement(H.a.Row,null,n.a.createElement(H.a.Cell,null,"Artist"),n.a.createElement(H.a.Cell,null,"Album"),n.a.createElement(H.a.Cell,null,"Track"),n.a.createElement(H.a.Cell,null,"Latest play on"),n.a.createElement(H.a.Cell,null))),n.a.createElement(H.a.Body,null,t.map((function(e){return n.a.createElement(Et,{key:e.track_id,result:e})})))))},gt=function(e){var a=e.onSubmit,t=e.onCancel;e.error;return n.a.createElement(I.d,{initialValues:{track_title:"",artist_name:"",album_name:"",label:"",cat_id:"",year:"",disc_no:1,track_no:1,minutes:0,seconds:0,country:0,record_country:"",people:"",comment:"",isrc:""},onSubmit:a,validate:function(e){console.log(e);var a={};return e.track_title&&""!==e.track_title||(a.track_title="Field is required"),e.album_name&&""!==e.album_name||(a.album_name="Field is required"),e.artist_name&&""!==e.artist_name||(a.artist_name="Field is required"),a}},(function(e){var a=e.isValid,r=e.dirty;return n.a.createElement(I.c,{className:"form ui"},n.a.createElement(I.b,{label:"Artist",placeholder:"Artist",name:"artist_name",component:M}),n.a.createElement(I.b,{label:"Album",placeholder:"Album",name:"album_name",component:M}),n.a.createElement(I.b,{label:"Track title",placeholder:"Track title...",name:"track_title",component:M}),n.a.createElement(x.a,null,n.a.createElement(x.a.Column,{width:8},n.a.createElement(I.b,{label:"Length - minutes",name:"minutes",component:Y,min:0,max:999})),n.a.createElement(x.a.Column,{width:8},n.a.createElement(I.b,{label:"Length - seconds",name:"seconds",component:Y,min:0,max:59}))),n.a.createElement(x.a,null,n.a.createElement(x.a.Column,{width:8},n.a.createElement(I.b,{label:"Track #",name:"track_no",component:Y,min:0,max:999})),n.a.createElement(x.a.Column,{width:8},n.a.createElement(I.b,{label:"Disc #",name:"disc_no",component:Y,min:0,max:99})),n.a.createElement(x.a.Column,{width:8},n.a.createElement(G,{label:"Country",name:"country",options:be})),n.a.createElement(x.a.Column,{width:8},n.a.createElement(G,{label:"Recorded in",name:"record_country",options:pe}))),n.a.createElement(I.b,{label:"Composers - one per line",placeholder:"LAST NAME FIRST NAME",name:"people",component:V}),n.a.createElement(I.b,{label:"Year",name:"year",component:Y,min:1900,max:2900}),n.a.createElement(I.b,{label:"Spotify id",placeholder:"Spotify id",name:"spotify_id",component:P}),n.a.createElement(I.b,{label:"Comment",placeholder:"Any additional information",name:"comment",component:P}),n.a.createElement(L.a,{type:"submit",floated:"left",color:"green",disabled:!a||!r},"Add"),n.a.createElement(L.a,{floated:"right",style:{marginBottom:"1rem"},type:"button",onClick:t,color:"red"},"Cancel"))}))},ht=function(){var e=Object(r.useState)(!1),a=Object(J.a)(e,2),t=a[0],l=a[1],c=Object(r.useState)(),o=Object(J.a)(c,2),u=o[0],i=o[1],s=function(){l(!1),i(void 0)};return n.a.createElement(n.a.Fragment,null,n.a.createElement(L.a,{floated:"right",color:"green",style:{marginBottom:"0.5rem"},onClick:function(){return l(!0)}},n.a.createElement(q.a,{name:"add"}),"Add a new track"),n.a.createElement(ne.a,{open:t,onClose:s,centered:!1,closeIcon:!0},n.a.createElement(ne.a.Header,null,"Add a new program"),n.a.createElement(ne.a.Content,null,u&&n.a.createElement(Ra.a,{inverted:!0,color:"red"},"Error: ".concat(u)),n.a.createElement(gt,{onSubmit:function(e){console.log(e)},onCancel:s}))))},_t=function(){var e=Object(o.c)((function(e){return e.search}));return n.a.createElement(d.a,null,n.a.createElement(D.a,null,"Search"),n.a.createElement(ht,null),n.a.createElement(bt,null),n.a.createElement(vt,{search:e}))},yt=[{key:1,value:"artist_id",label:"Artists"},{key:2,value:"track_id",label:"Tracks"},{key:3,value:"album_id",label:"Albums"}],kt=function(e){var a=e.onSubmit;return n.a.createElement(I.d,{initialValues:{list:"artist_id",start_date:Me()(Date.now()-6048e5).format("YYYY-MM-DD"),end_date:Me()(new Date).format("YYYY-MM-DD")},onSubmit:a},(function(){return n.a.createElement(I.c,{className:"form ui"},n.a.createElement(x.a,null,n.a.createElement(x.a.Column,{width:2},n.a.createElement(G,{label:"Get",name:"list",options:yt})),n.a.createElement(x.a.Column,{width:4},n.a.createElement("label",null,"starting"),n.a.createElement(Ue.b,{name:"start_date",dateFormat:"dd.MM.yyyy",placeholder:"dd.mm.yyyy"})),n.a.createElement(x.a.Column,{width:4},n.a.createElement("label",null,"ending"),n.a.createElement(Ue.b,{name:"end_date",dateFormat:"dd.MM.yyyy",placeholder:"dd.mm.yyyy"})," ")),n.a.createElement(L.a,{type:"submit",color:"green"},"Submit"))}))},Ot=function(e){var a=e.top100;return n.a.createElement(H.a,{striped:!0},n.a.createElement(H.a.Header,null,n.a.createElement(H.a.Row,null,n.a.createElement(H.a.Cell,null,"Artist"),n.a.createElement(H.a.Cell,null,"Play count"))),n.a.createElement(H.a.Body,null,a.map((function(e){return n.a.createElement(H.a.Row,{key:e.track_id},n.a.createElement(H.a.Cell,null,n.a.createElement(u.b,{to:"/artist/".concat(e.artist_id)},e.artist)),n.a.createElement(H.a.Cell,null,e.count))}))))},Tt=function(e){var a=e.top100;return n.a.createElement(H.a,{striped:!0},n.a.createElement(H.a.Header,null,n.a.createElement(H.a.Row,null,n.a.createElement(H.a.Cell,null,"Artist"),n.a.createElement(H.a.Cell,null,"Album"),n.a.createElement(H.a.Cell,null,"Play count"))),n.a.createElement(H.a.Body,null,a.map((function(e){return n.a.createElement(H.a.Row,{key:e.track_id},n.a.createElement(H.a.Cell,null,n.a.createElement(u.b,{to:"/artist/".concat(e.artist_id)},e.artist)),n.a.createElement(H.a.Cell,null,n.a.createElement(u.b,{to:"/album/".concat(e.album_id)},e.album)),n.a.createElement(H.a.Cell,null,e.count))}))))},At=function(e){var a=e.top100;return n.a.createElement(H.a,{striped:!0},n.a.createElement(H.a.Header,null,n.a.createElement(H.a.Row,null,n.a.createElement(H.a.Cell,null,"Artist"),n.a.createElement(H.a.Cell,null,"Album"),n.a.createElement(H.a.Cell,null,"Track"),n.a.createElement(H.a.Cell,null,"Play count"),n.a.createElement(H.a.Cell,null))),n.a.createElement(H.a.Body,null,a.map((function(e){return n.a.createElement(H.a.Row,{key:e.track_id},n.a.createElement(H.a.Cell,null,n.a.createElement(u.b,{to:"/artist/".concat(e.artist_id)},e.artist)),n.a.createElement(H.a.Cell,null,n.a.createElement(u.b,{to:"/album/".concat(e.album_id)},e.album)),n.a.createElement(H.a.Cell,null,n.a.createElement(u.b,{to:"/track/".concat(e.track_id)},e.track_title)),n.a.createElement(H.a.Cell,null,e.count),n.a.createElement(H.a.Cell,null,n.a.createElement(ae,{track_title:e.track_title,track_id:e.track_id,length:e.length})))}))))},Ct=function(){var e=Object(o.c)((function(e){return e.search})),a=Object(o.b)(),t=function(e){console.log(e);var t,r=Object(p.a)({},e,{end_date:Me()(new Date).format("YYYY-MM-DD")});console.log(r),a((t=r,function(){var e=Object(g.a)(v.a.mark((function e(a){var r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:"SET_SEARCH_LOADING"}),e.next=4,R.getTop100(t);case 4:r=e.sent,a({type:"TOP_100",data:r,query:t}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("searchActions error getting top100 results",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(a){return e.apply(this,arguments)}}()))};return console.log(e),null===e.top100Query?n.a.createElement(d.a,null,n.a.createElement("h3",{style:{display:"inline"}},"Top 100"),n.a.createElement("p",null,"Get the top 100 most played tracks, albums or artists within a time period."),n.a.createElement(kt,{onSubmit:t})):e.loading?n.a.createElement(d.a,null,n.a.createElement("h1",null,"Top 100"),n.a.createElement(kt,{onSubmit:t}),n.a.createElement("div",null,"Loading")):"artist_id"===e.top100Query.list?n.a.createElement(d.a,null,n.a.createElement("h3",{style:{display:"inline"}},"Top 100"),n.a.createElement("p",null,"Get the top 100 most played tracks, albums or artists within a time period."),n.a.createElement(kt,{onSubmit:t}),n.a.createElement(Ot,{top100:e.top100})):"album_id"===e.top100Query.list?n.a.createElement(d.a,null,n.a.createElement("h3",{style:{display:"inline"}},"Top 100"),n.a.createElement("p",null,"Get the top 100 most played tracks, albums or artists within a time period."),n.a.createElement(kt,{onSubmit:t}),n.a.createElement(Tt,{top100:e.top100})):"track_id"===e.top100Query.list?n.a.createElement(d.a,null,n.a.createElement("h3",{style:{display:"inline"}},"Top 100"),n.a.createElement("p",null,"Get the top 100 most played tracks, albums or artists within a time period."),n.a.createElement(kt,{onSubmit:t}),n.a.createElement(At,{top100:e.top100})):null},wt=function(e){var a,t=e.currentTrack,r=e.onSubmit;if(null===t)return n.a.createElement(b.a,null,n.a.createElement(E.a,null,"Loading track details..."));var l="";return t.people&&(l=t.people.replace(/\| /,"").replace(/\| /g,"\n").replace(/ \|/,"")),console.log("current track at track details form",t),n.a.createElement(x.a,{columns:2},n.a.createElement(x.a.Column,null,n.a.createElement(D.a,null,"Track details"),n.a.createElement(I.d,{initialValues:{artist:t.artist,album:t.album,track_title:t.track_title,track_id:t.track_id,length:t.length,minutes:Math.floor(t.length/60),seconds:t.length%60,country:t.country||0,record_country:t.record_country,people:l||"",disc_no:t.disc_no||1,track_no:t.track_no,year:Number(null===(a=t.year)||void 0===a?void 0:a.substring(0,4))||"",label:t.label,cat_id:t.cat_id,isrc:t.isrc,comment:t.comment||"",user_id:null,artist_id:t.artist_id,album_id:t.album_id,sortable_rank:null,report_track_id:null},onSubmit:r,validate:function(e){console.log(e);var a={};return e.track_title||(a.name="Album name is required"),a}},(function(e){var a=e.isValid;return n.a.createElement(I.c,{className:"form ui"},n.a.createElement(I.b,{label:"Artist",placeholder:"Artist",name:"artist",component:U}),n.a.createElement(I.b,{label:"Album",placeholder:"Album",name:"album",component:U}),n.a.createElement(I.b,{label:"Track title",placeholder:"Track title...",name:"track_title",component:P}),n.a.createElement(x.a,null,n.a.createElement(x.a.Column,{width:8},n.a.createElement(I.b,{label:"Length - minutes",name:"minutes",component:Y,min:0,max:999})),n.a.createElement(x.a.Column,{width:8},n.a.createElement(I.b,{label:"Length - seconds",name:"seconds",component:Y,min:0,max:59}))),n.a.createElement(x.a,null,n.a.createElement(x.a.Column,{width:8},n.a.createElement(I.b,{label:"Track #",name:"track_no",component:Y,min:0,max:999})),n.a.createElement(x.a.Column,{width:8},n.a.createElement(I.b,{label:"Disc #",name:"disc_no",component:Y,min:0,max:99})),n.a.createElement(x.a.Column,{width:8},n.a.createElement(G,{label:"Country",name:"country",options:be})),n.a.createElement(x.a.Column,{width:8},n.a.createElement(G,{label:"Recorded in",name:"record_country",options:pe}))),n.a.createElement(I.b,{label:"Composers - one per line",placeholder:"LAST NAME FIRST NAME",name:"people",component:V}),n.a.createElement(I.b,{label:"Year",name:"year",component:Y,min:1900,max:2900}),n.a.createElement(I.b,{label:"Spotify id",placeholder:"Spotify id",name:"spotify_id",component:P}),n.a.createElement(I.b,{label:"Comment",placeholder:"Any additional information",name:"comment",component:P}),n.a.createElement(L.a,{type:"submit",floated:"left",color:"green",disabled:!a},"Update track"))}))))},St=function(e){var a=e.pgm;return n.a.createElement(H.a.Row,null,n.a.createElement(H.a.Cell,null,a.program_date),n.a.createElement(H.a.Cell,null,n.a.createElement(u.b,{to:"/reports/".concat(a.report_id)},a.program_name)))},Rt=function(e){var a=e.playHistory;return 0===a.length?n.a.createElement(b.a,null,n.a.createElement(E.a,null,"Ladataan...")):"No plays yet"===a[0].result?n.a.createElement(n.a.Fragment,null,n.a.createElement("h4",null,"Soittohistoria"),n.a.createElement("p",null,"Ei soittoja")):n.a.createElement(n.a.Fragment,null,n.a.createElement("h4",null,"Play history"),n.a.createElement(H.a,{striped:!0},n.a.createElement(H.a.Header,null,n.a.createElement(H.a.Row,null,n.a.createElement(H.a.Cell,null,"Date"),n.a.createElement(H.a.Cell,null,"Program"))),n.a.createElement(H.a.Body,null,a.map((function(e){return n.a.createElement(St,{key:e.report_id,pgm:e})})))))},jt=function(e){var a=e.id,t=Object(o.b)(),l=Object(o.c)((function(e){return e.track})),c=Object(o.c)((function(e){return e.login}));if(Object(r.useEffect)((function(){t(function(e){return function(){var a=Object(g.a)(v.a.mark((function a(t){var r;return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t({type:"SET_LOADING"}),a.next=4,de.getOneTrack(e);case 4:r=a.sent,t({type:"GET_ONE_TRACK",data:r}),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log("trackActions getoneTrack error: ",a.t0);case 11:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(e){return a.apply(this,arguments)}}()}(a)),t(function(e){return function(){var a=Object(g.a)(v.a.mark((function a(t){var r;return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t({type:"CLEAR_CURRENT_TRACK"}),t({type:"SET_LOADING"}),a.next=5,de.getOneTrackHistory(e);case 5:r=a.sent,t({type:"GET_ONE_TRACK_HISTORY",data:r}),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),console.log("trackActions getOneTrackHistory error: ",a.t0);case 12:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e){return a.apply(this,arguments)}}()}(a))}),[]),null===l.currentTrack||0===l.playHistory.length)return n.a.createElement(d.a,null,n.a.createElement(b.a,null,n.a.createElement(E.a,null,"Ladataan...")));return n.a.createElement(d.a,null,n.a.createElement(wt,{onSubmit:function(e){var a,r,n;n=e.people?"| ".concat(e.people.replace(/\n/g," | ")," |"):null;var l={artist_name:e.artist,album_name:e.album,track_title:e.track_title,track_id:e.track_id,length:60*e.minutes+e.seconds,country:e.country,record_country:e.record_country,people:n,disc_no:e.disc_no,track_no:e.track_no,year:null===(a=e.year)||void 0===a?void 0:a.toString(),label:e.label,cat_id:e.cat_id,isrc:e.isrc,comment:e.comment,user_id:null===(r=c.currentUser)||void 0===r?void 0:r.id,artist_id:e.artist_id,album_id:e.album_id,sortable_rank:null,report_track_id:null};console.log("track to update",l),t(function(e){return function(){var a=Object(g.a)(v.a.mark((function a(t){return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t({type:"SET_LOADING"}),console.log("track to update at action",e),a.next=5,de.updateTrack(e);case 5:t({type:"UPDATE_TRACK",data:e}),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log("trackActions updateTrack error: ",a.t0);case 11:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(e){return a.apply(this,arguments)}}()}(l)),t(j("Track ".concat(e.track_title," updated!"),"success"))},currentTrack:l.currentTrack}),n.a.createElement(Rt,{playHistory:l.playHistory}))},xt=[{value:ke.DJ,label:"DJ"},{value:ke.Staff,label:"Staff"},{value:ke.Admin,label:"Admin"}],Dt=[{value:1,label:"Active"},{value:0,label:"Inactive"}],Lt=function(e){var a=e.onSubmit,t=e.onCancel,r=e.user;return n.a.createElement(I.d,{initialValues:{password:"",confirm_password:"",first_name:r.first_name,last_name:r.last_name,email:r.email,level:r.level,status:r.status},onSubmit:a,validate:function(e){var a={};return e.password!==e.confirm_password&&(a.password="Passwords do not match",a.confirm_password="Passwords do not match"),e.email||(a.email="Field is required"),e.first_name||(a.first_name="Field is required"),e.last_name||(a.last_name="Field is required"),a}},(function(e){var a=e.isValid;return n.a.createElement(I.c,{className:"form ui"},n.a.createElement(I.b,{label:"Password - fill out field only if you wish to change the password",placeholder:"Password",name:"password",type:"password",component:F}),n.a.createElement(I.b,{label:"Confirm password",placeholder:"Confirm password",name:"confirm_password",type:"password",component:F}),n.a.createElement(I.b,{label:"First name",placeholder:"First name",name:"first_name",component:P,required:!0}),n.a.createElement(I.b,{label:"Last name",placeholder:"Last name",name:"last_name",component:P}),n.a.createElement(I.b,{label:"Email",placeholder:"Email",name:"email",component:P}),n.a.createElement(G,{label:"Level",name:"level",options:xt}),n.a.createElement(G,{label:"Status",name:"status",options:Dt}),n.a.createElement(x.a,null,n.a.createElement(x.a.Column,{floated:"left",width:5},n.a.createElement(L.a,{type:"button",onClick:t,color:"red"},"Cancel")),n.a.createElement(x.a.Column,{floated:"right",width:5},n.a.createElement(L.a,{type:"submit",floated:"right",color:"green",disabled:!a},"Update"))))}))},It=function(e){var a=e.modalOpen,t=e.onClose,r=e.onSubmit,l=e.error,c=e.user;return n.a.createElement(ne.a,{open:a,onClose:t,centered:!1,closeIcon:!0},n.a.createElement(ne.a.Header,null,"Edit info of user ",c.username),n.a.createElement(ne.a.Content,null,l&&n.a.createElement(Ra.a,{inverted:!0,color:"red"},"Error: ".concat(l)),n.a.createElement(Lt,{user:c,onSubmit:r,onCancel:t})))},Nt=function(e){var a,t,l,c=e.user,u=Object(o.b)(),i=Object(r.useState)(!1),s=Object(J.a)(i,2),m=s[0],d=s[1],b=Object(r.useState)(!1),E=Object(J.a)(b,2),f=E[0],h=E[1],_=Object(r.useState)(),y=Object(J.a)(_,2),k=y[0],O=y[1],T=function(){h(!1),O(void 0)};return a=1===c.level?"DJ":2===c.level?"Staff":"Admin",null===c.status||0===c.status?(l="Inactive",t="inactive-user"):1===c.status&&(l="Active",t="active-user"),n.a.createElement(H.a.Row,null,n.a.createElement(H.a.Cell,null,n.a.createElement(It,{user:c,modalOpen:f,onSubmit:function(e){try{var a=Object(p.a)({},e,{id:c.id});u(ha(a)),u(j("".concat(a.first_name," ").concat(a.last_name," updated!"),"success")),console.log("updating user",a),T()}catch(t){console.error(t.response.data),O(t.response.data.error)}},error:k,onClose:T}),n.a.createElement("button",{style:{border:"none",cursor:"pointer",color:"blue"},onClick:function(){return h(!0)}},c.username)),n.a.createElement(H.a.Cell,null,c.first_name," ",c.last_name),n.a.createElement(H.a.Cell,null,c.last_seen),n.a.createElement(H.a.Cell,{className:t},l),n.a.createElement(H.a.Cell,null,a),n.a.createElement(H.a.Cell,null,n.a.createElement(q.a,{color:"red",onClick:function(){return d(!0)},name:"delete"}),n.a.createElement(Ye.a,{content:"Are you sure you wish to delete user ".concat(c.username,"?"),open:m,onCancel:function(){d(!1)},onConfirm:function(){var e;d(!1),u((e=c.id,function(){var a=Object(g.a)(v.a.mark((function a(t){return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t({type:"SET_LOADING"}),t({type:"DELETE_USER",data:e}),a.next=5,sa.deleteUser(e);case 5:a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log(a.t0);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()))},cancelButton:"Cancel delete",confirmButton:"Confirm delete"})))},Gt=function(e){var a=e.users;return n.a.createElement(d.a,null,n.a.createElement("div",{style:{marginTop:"1rem",marginBottom:"1rem"}},n.a.createElement("h3",{style:{display:"inline"}},"Users")),n.a.createElement(H.a,{striped:!0},n.a.createElement(H.a.Header,null,n.a.createElement(H.a.Row,null,n.a.createElement(H.a.Cell,null,"Username"),n.a.createElement(H.a.Cell,null,"Name"),n.a.createElement(H.a.Cell,null,"Latest login"),n.a.createElement(H.a.Cell,null,"Status"),n.a.createElement(H.a.Cell,null,"Level"))),n.a.createElement(H.a.Body,null,a.map((function(e){return n.a.createElement(Nt,{user:e,key:e.id})})))))},Pt=[{value:ke.DJ,label:"DJ"},{value:ke.Staff,label:"Staff"},{value:ke.Admin,label:"Admin"}],Mt=function(e){var a=e.onSubmit,t=e.onCancel;return n.a.createElement(I.d,{initialValues:{username:"",password:"",confirm_password:"",first_name:"",last_name:"",email:"",level:ke.DJ},onSubmit:a,validate:function(e){var a="Field is required",t={};return e.username||(t.username=a),e.password||(t.password=a),e.confirm_password||(t.confirm_password=a),e.password!==e.confirm_password&&(t.password="Passwords do not match",t.confirm_password="Passwords do not match"),e.email||(t.email=a),e.first_name||(t.first_name=a),e.last_name||(t.last_name=a),t}},(function(e){var a=e.isValid,r=e.dirty;return n.a.createElement(I.c,{className:"form ui"},n.a.createElement(I.b,{label:"Username",placeholder:"Username",name:"username",component:M}),n.a.createElement(I.b,{label:"Password",placeholder:"Password",name:"password",type:"password",component:B}),n.a.createElement(I.b,{label:"Confirm password",placeholder:"Confirm password",name:"confirm_password",type:"password",component:B}),n.a.createElement(I.b,{label:"First name",placeholder:"First name",name:"first_name",component:M}),n.a.createElement(I.b,{label:"Last name",placeholder:"Last name",name:"last_name",component:M}),n.a.createElement(I.b,{label:"Email",placeholder:"Email",name:"email",component:M}),n.a.createElement(G,{label:"Level",name:"level",options:Pt}),n.a.createElement(x.a,null,n.a.createElement(x.a.Column,{floated:"left",width:5},n.a.createElement(L.a,{type:"button",onClick:t,color:"red"},"Cancel")),n.a.createElement(x.a.Column,{floated:"right",width:5},n.a.createElement(L.a,{type:"submit",floated:"right",color:"green",disabled:!r||!a},"Add"))))}))},Ut=function(e){var a=e.modalOpen,t=e.onClose,r=e.onSubmit,l=e.error;return n.a.createElement(ne.a,{open:a,onClose:t,centered:!1,closeIcon:!0},n.a.createElement(ne.a.Header,null,"Add a new user"),n.a.createElement(ne.a.Content,null,l&&n.a.createElement(Ra.a,{inverted:!0,color:"red"},"Error: ".concat(l)),n.a.createElement(Mt,{onSubmit:r,onCancel:t})))},Ft=function(){var e,a=Object(o.c)((function(e){return e.user})),t=Object(o.c)((function(e){return e.login})),r=Object(o.b)(),l=n.a.useState(!1),c=Object(J.a)(l,2),u=c[0],i=c[1],s=n.a.useState(),m=Object(J.a)(s,2),p=m[0],b=m[1],E=function(){i(!1),b(void 0)};return 3===(null===(e=t.currentUser)||void 0===e?void 0:e.level)?n.a.createElement(d.a,null,n.a.createElement(L.a,{floated:"right",color:"green",style:{marginBottom:"0.5rem"},onClick:function(){return i(!0)}},n.a.createElement(q.a,{name:"add"}),"Add a new user"),n.a.createElement(Ut,{modalOpen:u,onSubmit:function(e){try{r((a=e,function(){var e=Object(g.a)(v.a.mark((function e(t){var r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"SET_LOADING"}),e.next=4,sa.createUser(a);case 4:r=e.sent,t({type:"CREATE_USER",data:r}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(a){return e.apply(this,arguments)}}())),r(j("User ".concat(e.username," created!"),"success")),E()}catch(t){r(j("Failed to create user!","fail")),console.error(t.response.data),b(t.response.data.error)}var a},error:p,onClose:E}),n.a.createElement(Gt,{users:a.users})):null},Bt=function(){var e,a,t,l=Object(o.b)(),c=Object(o.c)((function(e){return e.login})),s=Object(o.c)((function(e){return e.notification}));return Object(r.useEffect)((function(){l(function(){var e=Object(g.a)(v.a.mark((function e(a){var t,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{a({type:"SET_LOADING"}),(t=window.localStorage.getItem("loggedUser"))&&(r=JSON.parse(t),sa.setToken(r.token),Q.setToken(r.token),$e.setToken(r.token),ua.setToken(r.token),R.setToken(r.token),de.setToken(r.token),xe.setToken(r.token),k.setToken(r.token),a({type:"INIT_USER",data:r}))}catch(n){console.log("error initializing user",n)}case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()),l(function(){var e=Object(g.a)(v.a.mark((function e(a){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:"SET_LOADING"}),e.next=4,sa.getAll();case 4:t=e.sent,a({type:"INIT_USER_LIST",data:t}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(a){return e.apply(this,arguments)}}()),l(function(){var e=Object(g.a)(v.a.mark((function e(a){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:"SET_LOADING"}),e.next=4,ua.getAllActive();case 4:t=e.sent,a({type:"GET_ALL_ACTIVE_PROGRAMS",data:t}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("error getting all active programs programActions.initializePrograms",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(a){return e.apply(this,arguments)}}()),l(Sa()),m.a.get("/ping")}),[null===(e=c.currentUser)||void 0===e?void 0:e.token]),null===c.currentUser?n.a.createElement(d.a,null,n.a.createElement(da,null),n.a.createElement(Ge,null)):null===(null===(a=c.currentUser)||void 0===a?void 0:a.status)||0===(null===(t=c.currentUser)||void 0===t?void 0:t.status)?n.a.createElement(d.a,null,n.a.createElement(da,null),n.a.createElement("div",null,"Credentials deactivated. Please contact the administrator."),n.a.createElement(Ge,null)):n.a.createElement(u.a,null,n.a.createElement("div",{className:"App"},n.a.createElement(Aa,null),n.a.createElement(wa,{notification:s})),n.a.createElement(i.d,null,n.a.createElement(i.b,{exact:!0,path:"/",component:na}),n.a.createElement(i.b,{path:"/album/:id",render:function(e){var a=e.match;return n.a.createElement(we,{id:a.params.id})}}),n.a.createElement(i.b,{path:"/artist/:id",render:function(e){var a=e.match;return n.a.createElement(Ne,{id:a.params.id})}}),n.a.createElement(i.b,{path:"/track/:id",render:function(e){var a=e.match;return n.a.createElement(jt,{id:a.params.id})}}),n.a.createElement(i.b,{path:"/reports/:id",render:function(e){var a=e.match;return n.a.createElement(it,{id:a.params.id})}}),n.a.createElement(i.b,{exact:!0,path:"/reports",component:Ja}),n.a.createElement(i.b,{exact:!0,path:"/transfer",component:pt}),n.a.createElement(i.b,{exact:!0,path:"/top100",component:Ct}),n.a.createElement(i.b,{exact:!0,path:"/search",component:_t}),n.a.createElement(i.b,{exact:!0,path:"/programs",component:Ya}),n.a.createElement(i.b,{exact:!0,path:"/users",component:Ft})),n.a.createElement(Ge,null))},Yt=t(93),Vt=t(376),zt=t(377),Ht={currentAlbum:null,tracklist:[],loading:!1},Kt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ht,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"GET_ONE_ALBUM":return Object(p.a)({},e,{currentAlbum:a.data,loading:!1});case"GET_TRACKLIST_OF_ALBUM":return Object(p.a)({},e,{tracklist:a.data,loading:!1});case"CLEAR_CURRENT_ALBUM":return Object(p.a)({},e,{currentAlbum:null,tracklist:[],loading:!1});case"ADD_TRACK_TO_ALBUM":return Object(p.a)({},e,{tracklist:[].concat(Object(Ka.a)(e.tracklist),[a.data])});case"SET_LOADING":return Object(p.a)({},e,{loading:!0});default:return e}},qt={currentArtist:null,albumList:[],loading:!1},Jt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qt,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"GET_ONE_ARTIST":return Object(p.a)({},e,{currentArtist:a.data,loading:!1});case"GET_ALBUM_LIST_BY_ARTIST":return Object(p.a)({},e,{albumList:a.data,loading:!1});case"CLEAR_CURRENT_ARTIST":return Object(p.a)({},e,{currentArtist:null});case"SET_LOADING":return Object(p.a)({},e,{loading:!0});default:return e}},Wt={loading:!1,currentUser:null},Zt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"INIT_USER":case"LOGIN":case"UPDATE_CURRENT_USER":return Object(p.a)({},e,{currentUser:a.data,loading:!1});case"LOGOUT":return Wt;case"SET_LOADING":return Object(p.a)({},e,{loading:!0});default:return e}},Qt={message:null,type:null},Xt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qt,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_NOTIFICATION":return a.data;case"CLEAR_NOTIFICATION":return Qt;default:return e}},$t={allPrograms:[],activePrograms:[],program:null,loading:!1},er=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$t,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"GET_ALL_PROGRAMS":return Object(p.a)({},e,{allPrograms:a.data,loading:!1});case"GET_ALL_ACTIVE_PROGRAMS":return Object(p.a)({},e,{activePrograms:a.data,loading:!1});case"GET_ONE_PROGRAM":return Object(p.a)({},e,{program:a.data,loading:!1});case"CREATE_NEW_PROGRAM":return Object(p.a)({},e,{allPrograms:[].concat(Object(Ka.a)(e.allPrograms),[a.data]),loading:!1});case"CREATE_NEW_PROGRAM_ON_NEW_REPORT":return Object(p.a)({},e,{activePrograms:[].concat(Object(Ka.a)(e.activePrograms),[a.data]),loading:!1});case"UPDATE_PROGRAM":return Object(p.a)({},e,{allPrograms:e.allPrograms.map((function(e){return e.id===a.data.id?a.data:e})),loading:!1});default:return e}},ar={report:[],playlog:[],editTrackId:null,reportDetails:null,newReport:null,loading:!1,checkedForDelete:[],currentTrack:null},tr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ar,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"GET_ONE_REPORT":return Object(p.a)({},e,{report:a.data,loading:!1});case"GET_PLAYLOG_TRACKS":return Object(p.a)({},e,{report:[].concat(Object(Ka.a)(e.report),Object(Ka.a)(a.data)),playlog:a.data,loading:!1});case"GET_REPORT_DETAILS":return Object(p.a)({},e,{reportDetails:a.data,newReport:null,loading:!1});case"ADD_NEW_TRACK":return Object(p.a)({},e,{report:[].concat(Object(Ka.a)(e.report),[a.data]),loading:!1});case"ADD_TRACK_TO_REPORT":return Object(p.a)({},e,{report:[].concat(Object(Ka.a)(e.report),[a.data])});case"SET_EDIT_TRACK_ID":return Object(p.a)({},e,{editTrackId:a.data});case"GET_ONE_TRACK":return Object(p.a)({},e,{currentTrack:a.data,loading:!1});case"REMOVE_CURRENT_TRACK":return Object(p.a)({},e,{currentTrack:null});case"CLEAR_CURRENT_REPORT":return Object(p.a)({},e,{report:[]});case"CREATE_REPORT":return Object(p.a)({},e,{newReport:a.data,reportDetails:a.data,loading:!1});case"UPDATE_REPORT":return Object(p.a)({},e,{reportDetails:a.data,newReport:null,loading:!1});case"DELETE_TRACK_FROM_REPORT":return Object(p.a)({},e,{report:e.report.filter((function(e){return e.report_track_id!==a.data}))});case"CHECK_FOR_DELETE":return Object(p.a)({},e,{checkedForDelete:[a.data].concat(Object(Ka.a)(e.checkedForDelete))});case"UNCHECK_FOR_DELETE":return Object(p.a)({},e,{checkedForDelete:e.checkedForDelete.filter((function(e){return e!==a.data}))});case"CLEAR_CHECKED_FOR_DELETE":return Object(p.a)({},e,{checkedForDelete:[]});case"SET_LOADING":return Object(p.a)({},e,{loading:!0});default:return e}},rr={reportList:[],inProgress:[],reportListDate:null,reportTransferList:[],lastTransfer:null,loading:!1,filterStatusValue:null,filterUserValue:null,filterByText:"",error:null},nr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rr,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"GET_ALL_REPORTS_BY_DATE":return Object(p.a)({},e,{reportList:a.data,reportListDate:a.date,loading:!1});case"GET_ALL_IN_PROGRESS":return Object(p.a)({},e,{inProgress:a.data,loading:!1});case"GET_ALL_REPORT_TRANSFERS":return Object(p.a)({},e,{reportTransferList:a.data,loading:!1});case"GENERATE_REPORT_TRANSFER":return Object(p.a)({},e,{lastTransfer:a.data,loading:!1});case"DELETE_REPORT":return Object(p.a)({},e,{reportList:e.reportList.filter((function(e){return e.id!==a.data})),loading:!1});case"FILTER_BY_USER_ID":return Object(p.a)({},e,{filterUserValue:a.data});case"FILTER_BY_STATUS":return Object(p.a)({},e,{filterStatusValue:a.data});case"FILTER_BY_TEXT":return Object(p.a)({},e,{filterByText:a.data});case"SET_LOADING":return Object(p.a)({},e,{loading:!0});default:return e}},lr={top100:[],top100Query:null,advancedResults:[],sortAdvancedResults:null,loading:!1,discogsData:null},cr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lr,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"ADVANCED_RESULTS":return Object(p.a)({},e,{advancedResults:a.data,loading:!1});case"SORT_ADVANCED_RESULTS":return Object(p.a)({},e,{sortAdvancedResults:a.data});case"TOP_100":return Object(p.a)({},e,{top100:a.data,top100Query:a.query,loading:!1});case"GET_DISCOGS_DATA":return Object(p.a)({},e,{discogsData:a.data});case"CLEAR_DISCOGS_DATA":return Object(p.a)({},e,{discogsData:null});case"SET_SEARCH_LOADING":return Object(p.a)({},e,{loading:!0});case"MERGE_TRACKS":return Object(p.a)({},e,{advancedResults:e.advancedResults.filter((function(e){return e.track_id!==a.data.merge}))});case"MERGE_ARTISTS":var t=a.data.merge,r=a.data.mergeTo,n=a.data.newName,l=e.advancedResults.filter((function(e){return e.artist_id===t})),c=l.map((function(e){return Object(p.a)({},e,{artist_id:r,artist_name:n})})),o=e.advancedResults.filter((function(e){return e.artist_id!==t})),u=[].concat(Object(Ka.a)(c),Object(Ka.a)(o));return Object(p.a)({},e,{advancedResults:u});default:return e}},or={currentTrack:null,playHistory:[],loading:!1},ur=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:or,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"GET_ONE_TRACK":case"UPDATE_TRACK":return Object(p.a)({},e,{currentTrack:a.data,loading:!1});case"GET_ONE_TRACK_HISTORY":return Object(p.a)({},e,{playHistory:a.data,loading:!1});case"CLEAR_CURRENT_TRACK":return Object(p.a)({},e,{playhistory:null,currentTrack:null});case"SET_LOADING":return Object(p.a)({},e,{loading:!0});default:return e}},ir={users:[],loading:!1},sr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ir,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"INIT_USER_LIST":return Object(p.a)({},e,{users:a.data,loading:!1});case"CREATE_USER":return Object(p.a)({},e,{users:[].concat(Object(Ka.a)(e.users),[a.data]),loading:!1});case"UPDATE_USER":return Object(p.a)({},e,{users:a.data,loading:!1});case"DELETE_USER":return Object(p.a)({},e,{users:e.users.filter((function(e){return e.id!==a.data})),loading:!1});case"SET_LOADING":return Object(p.a)({},e,{loading:!0});default:return e}},mr=Object(Yt.combineReducers)({album:Kt,artist:Jt,login:Zt,notification:Xt,program:er,report:tr,reportList:nr,search:cr,track:ur,user:sr}),dr=Object(Yt.createStore)(mr,Object(Vt.composeWithDevTools)(Object(Yt.applyMiddleware)(zt.a)));c.a.render(n.a.createElement(o.a,{store:dr},n.a.createElement(Bt,null)),document.getElementById("root"))}},[[392,1,2]]]);
//# sourceMappingURL=main.ff5b3000.chunk.js.map