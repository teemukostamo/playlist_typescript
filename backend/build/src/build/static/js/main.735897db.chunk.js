(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{114:function(e,t,a){e.exports=a.p+"static/media/logo.ca9e42db.png"},392:function(e,t,a){e.exports=a(677)},418:function(e,t,a){},677:function(e,t,a){"use strict";a.r(t);for(var r=a(0),n=a.n(r),l=a(52),c=a.n(l),o=a(12),u=(a(400),a(25)),i=a(82),s=a(17),m=a.n(s),d=a(693),p=(a(418),a(14)),b=a(702),E=a(690),f=a(2),v=a.n(f),g=a(8),_=null,h=function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:_}},e.next=3,m.a.get("".concat("/api/albums","/albumdetails/").concat(t),a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:_}},e.next=3,m.a.get("".concat("/api/albums","/tracklist/").concat(t),a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k={setToken:function(e){_="bearer ".concat(e)},updateAlbum:function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:_}},e.next=3,m.a.put("".concat("/api/albums","/albumdetails/").concat(t.id),t,a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getOneAlbum:h,getTracklistOfAlbum:y,changeArtistId:function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:_}},e.next=3,m.a.put("/api/albums/updateartist",t,a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},O=null,T=function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:O}},e.next=3,m.a.get("".concat("/api/search","/autocomplete/").concat(t),a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(g.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get("https://api.discogs.com/database/search?artist=".concat(t.artist,"&release_title=").concat(t.album,"&token=").concat("THjssRPqbcSFrfIYgsZWCAPmWPDpKIypkMXQWGHZ"));case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:O}},e.next=3,m.a.get("/api/top100?list=".concat(t.list,"&start_date=").concat(t.start_date,"&end_date=").concat(t.end_date),a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:O}},e.next=3,m.a.get("".concat("/api/search","/advanced?kind=").concat(t.kind,"&query=").concat(t.query),a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:O}},e.next=3,m.a.put("".concat("/api/search","/advanced"),t,a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R={advancedSearch:w,getTop100:C,getDiscogsData:A,getTracksForAutocompleteSearch:T,setToken:function(e){O="bearer ".concat(e)},changeArtistOptions:function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:O}},e.next=3,m.a.get("".concat("/api/search","/changeartist/").concat(t),a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),changeAlbumOptions:function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:O}},e.next=3,m.a.get("".concat("/api/search","/changealbum/").concat(t),a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),merge:S},j=function(e,t){var a={message:e,type:t};return function(){var e=Object(g.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"SET_NOTIFICATION",data:a}),setTimeout((function(){t({type:"CLEAR_NOTIFICATION"})}),3e3);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},x=a(703),D=a(704),L=a(251),N=a(4),I=a(695),G=function(e){var t=e.name,a=e.label,r=e.options;return n.a.createElement(I.a.Field,null,n.a.createElement("label",null,a),n.a.createElement(N.b,{as:"select",name:t,className:"ui dropdown"},r.map((function(e){return n.a.createElement("option",{key:e.value,value:e.value},e.label||e.value)}))))},M=function(e){var t=e.field,a=e.label,r=e.placeholder;return n.a.createElement(I.a.Field,null,n.a.createElement("label",null,a),n.a.createElement(N.b,Object.assign({placeholder:r},t,{type:"text"})),n.a.createElement("div",{style:{color:"red"}},n.a.createElement(N.a,{name:t.name})))},P=function(e){var t=e.field,a=e.label,r=e.placeholder;return n.a.createElement(I.a.Field,{required:!0},n.a.createElement("label",null,a),n.a.createElement(N.b,Object.assign({placeholder:r},t,{type:"text"})),n.a.createElement("div",{style:{color:"red"}},n.a.createElement(N.a,{name:t.name})))},U=function(e){var t=e.field,a=e.label,r=e.placeholder;return n.a.createElement(I.a.Field,{disabled:!0},n.a.createElement("label",null,a),n.a.createElement(N.b,Object.assign({placeholder:r},t,{type:"text"})),n.a.createElement("div",{style:{color:"red"}},n.a.createElement(N.a,{name:t.name})))},F=function(e){var t=e.field,a=e.label,r=e.placeholder;return n.a.createElement(I.a.Field,null,n.a.createElement("label",null,a),n.a.createElement(N.b,Object.assign({placeholder:r},t,{type:"password"})),n.a.createElement("div",{style:{color:"red"}},n.a.createElement(N.a,{name:t.name})))},B=function(e){var t=e.field,a=e.label,r=e.placeholder;return n.a.createElement(I.a.Field,{required:!0},n.a.createElement("label",null,a),n.a.createElement(N.b,Object.assign({placeholder:r},t,{type:"password"})),n.a.createElement("div",{style:{color:"red"}},n.a.createElement(N.a,{name:t.name})))},Y=function(e){var t=e.field,a=e.label,r=e.min,l=e.max;return n.a.createElement(I.a.Field,null,n.a.createElement("label",null,a),n.a.createElement(N.b,Object.assign({},t,{type:"number",min:r,max:l})),n.a.createElement("div",{style:{color:"red"}},n.a.createElement(N.a,{name:t.name})))},V=function(e){var t=e.field,a=e.label,r=e.placeholder;return n.a.createElement(I.a.Field,{style:{marginTop:"1rem"}},n.a.createElement("label",null,a),n.a.createElement(N.b,Object.assign({placeholder:r},t,{component:"textarea"})),n.a.createElement("div",{style:{color:"red"}},n.a.createElement(N.a,{name:t.name})))},z=function(e){var t,a=e.currentAlbum,r=e.onSubmit;return null===a?n.a.createElement(b.a,null,n.a.createElement(E.a,null,"Loading album...")):n.a.createElement(x.a,{columns:2},n.a.createElement(x.a.Column,null,n.a.createElement(D.a,null,"Album info"),n.a.createElement(N.d,{initialValues:{id:a.album_id,artist:a.artist_name,name:a.album_name,label:a.label||"",cat_id:a.cat_id||"",year:Number(null===(t=a.year)||void 0===t?void 0:t.substring(0,4))||"",spotify_id:a.spotify_id||""},onSubmit:r,validate:function(e){console.log(e);var t={};return e.name||(t.name="Album name is required"),t}},(function(e){var t=e.isValid;return n.a.createElement(N.c,{className:"form ui"},n.a.createElement(N.b,{label:"Artist",placeholder:"Artist",name:"artist",component:U}),n.a.createElement("span",null,n.a.createElement(u.b,{style:{cursor:"pointer",fontSize:"0.8rem",color:"teal",marginRight:"1rem",marginLeft:"0.3rem",marginBottom:"10rem"},to:"../artist/".concat(a.artist_id)},"Edit artist info")),n.a.createElement(N.b,{label:"Album name",placeholder:"Name",name:"name",component:M}),n.a.createElement(N.b,{label:"Label",placeholder:"Label...",name:"label",component:M}),n.a.createElement(N.b,{label:"Catalog ID",placeholder:"Catalog ID...",name:"cat_id",component:M}),n.a.createElement(N.b,{label:"Year",name:"year",component:Y,min:1900,max:2900}),n.a.createElement(N.b,{label:"Spotify id",placeholder:"Spotify id",name:"spotify_id",component:M}),n.a.createElement(L.a,{type:"submit",floated:"left",color:"green",disabled:!t},"Update album"))}))))},H=a(697),K=a(698),q=a(96),J=a(18),W=null,Z=function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:W}},e.next=3,m.a.get("".concat("/api/reports","/").concat(t),a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q={setToken:function(e){W="bearer ".concat(e)},addTrackToReport:function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:W}},e.next=3,m.a.post("".concat("/api/reports"),t,a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),deleteTrackFromReport:function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:W}},e.next=3,m.a.delete("".concat("/api/reports","/").concat(t),a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),deleteReport:function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:W}},e.next=3,m.a.put("/api/reportslist/".concat(t),{},a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateSortableRank:function(){var e=Object(g.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a={headers:{Authorization:W}},null!==t){e.next=3;break}return e.abrupt("return");case 3:t.forEach(function(){var e=Object(g.a)(v.a.mark((function e(t,r){var n,l;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={sortable_rank:r+1},e.next=3,m.a.put("".concat("/api/reports","/").concat(t.report_track_id),n,a);case 3:return l=e.sent,e.abrupt("return",l.data);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getOne:Z,getReportDetails:function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:W}},e.next=3,m.a.get("/api/reportdetails/details/".concat(t),a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),createReport:function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:W}},e.next=3,m.a.post("/api/reportdetails",t,a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateReport:function(){var e=Object(g.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:W}},e.next=3,m.a.put("/api/reportdetails/update/".concat(t.id),t,a);case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),checkPlaylogTracks:function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r,n,l,c,o;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:W}},e.next=3,m.a.get("/api/playlog?date=".concat(t.date));case 3:return r=e.sent,n=[],Object.entries(r.data).forEach((function(e){var t=Object(J.a)(e,2),a=(t[0],t[1]);n.push(a)})),n=n.reverse(),l=[],n.forEach((function(e){var a=e.date.charAt(11)+e.date.charAt(12);a=parseInt(a);var r=e.length.split(":"),n=60*parseInt(r[0])+parseInt(r[1]);a<parseInt(t.startTime)||a>=parseInt(t.endTime)||l.push({album_name:e.album,artist_name:e.artist,cat_id:e.matrix,disc_no:Number(e.side),track_no:Number(e.tracknumber),isrc:e.isrc,record_country:e.recording_country,country:null,play_time:e.date,djonline_id:e.id,label:e.label,length:n,track_title:e.song,year:e.year,report_id:t.report_id})})),c=[],l.forEach((function(e,a){c.push(Object(p.a)({},e,{sortable_rank:t.sortable_rank_start+a+1}))})),o=[],c.forEach(function(){var e=Object(g.a)(v.a.mark((function e(t){var r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.post("/api/tracks/playlog",t,a);case 2:r=e.sent,o.push(r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),console.log("return array at reportservice",o),e.abrupt("return",o);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},X=function(e){return function(){var t=Object(g.a)(v.a.mark((function t(a){var r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"SET_LOADING"}),t.next=4,Q.getOne(e);case 4:r=t.sent,a({type:"GET_ONE_REPORT",data:r,id:e}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("reportActions getOneReport error:",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},$=function(e){return function(){var t=Object(g.a)(v.a.mark((function t(a){var r,n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"SET_LOADING"}),t.next=4,Q.addTrackToReport(e);case 4:return r=t.sent,t.next=7,Q.getOne(r.report_id);case 7:n=t.sent,a({type:"GET_ONE_REPORT",data:n}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log("reportActions addTrackToReport error",t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()},ee={borderRadius:0,display:"block",opacity:.9,padding:"2em"},te=function(e){var t=e.track_id,a=e.track_title,r=e.length,l=Object(o.b)(),c=Object(o.c)((function(e){return e.report}));if(!c.reportDetails)return null;return n.a.createElement(n.a.Fragment,null,n.a.createElement(K.a,{trigger:n.a.createElement(q.a,{style:{cursor:"pointer"},color:"green",onClick:function(){var e,n,o={track_id:t,report_id:null===(e=c.reportDetails)||void 0===e?void 0:e.id,length:r,sortable_rank:c.report.length+1};l($(o)),l(j("".concat(a," added to ").concat(null===(n=c.reportDetails)||void 0===n?void 0:n.program_name,"!"),"success"))},name:"add"}),style:ee,inverted:!0,basic:!0,content:"Add ".concat(a," to ").concat(c.reportDetails.program_name)}))},ae=function(e){var t=e.track;return n.a.createElement(H.a.Row,null,n.a.createElement(H.a.Cell,null,"merge album tracks modal here"),n.a.createElement(H.a.Cell,null,n.a.createElement(u.b,{to:"/track/".concat(t.track_id)},t.artist_name," - ",t.track_title," ")),n.a.createElement(H.a.Cell,null,t.track_no," / ",t.disc_no),n.a.createElement(H.a.Cell,null,t.isrc),n.a.createElement(H.a.Cell,null,t.report_occurrence),n.a.createElement(H.a.Cell,null,n.a.createElement(te,{track_title:t.track_title,track_id:t.track_id,length:t.length})))},re=function(e){var t=e.tracklist;return null===t?n.a.createElement("span",null,"loading"):n.a.createElement(n.a.Fragment,null,n.a.createElement("h4",null,"Tracks"),n.a.createElement(H.a,{striped:!0},n.a.createElement(H.a.Header,null,n.a.createElement(H.a.Row,null,n.a.createElement(H.a.Cell,null,"Track ID#"),n.a.createElement(H.a.Cell,null,"ARTIST - Track"),n.a.createElement(H.a.Cell,null,"Track# / Disc#"),n.a.createElement(H.a.Cell,null,"ISRC"),n.a.createElement(H.a.Cell,null,"Report occurrence"))),n.a.createElement(H.a.Body,null,t.map((function(e){return n.a.createElement(ae,{key:e.track_id,track:e})})))))},ne=a(187),le=null,ce=function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:le}},e.next=3,m.a.post("".concat("/api/tracks","/addandreport"),t,a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),oe=function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:le}},e.next=3,m.a.post("".concat("/api/tracks","/addtodb"),t,a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ue=function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:le}},e.next=3,m.a.post("".concat("/api/tracks","/addtracktoalbum"),t,a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ie=function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("track to update at service",t),a={headers:{Authorization:le}},e.next=4,m.a.put("/api/tracks",t,a);case 4:return r=e.sent,e.abrupt("return",r.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),se=function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:le}},e.next=3,m.a.put("/api/tracks/updatealbum",t,a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),me=function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:le}},e.next=3,m.a.put("/api/tracks/updateartist",t,a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),de={setToken:function(e){le="bearer ".concat(e)},addNewTrack:ce,addTrackToAlbum:ue,updateTrack:ie,getOneTrack:function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:le}},e.next=3,m.a.get("".concat("/api/tracks","/details/").concat(t),a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getOneTrackHistory:function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:le}},e.next=3,m.a.get("".concat("/api/tracks","/history/").concat(t),a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateAlbumId:se,updateArtistId:me,addTrackToDb:oe},pe=function(e){return function(){var t=Object(g.a)(v.a.mark((function t(a){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"SET_LOADING"}),console.log("track to update at action",e),t.next=5,de.updateTrack(e);case 5:a({type:"UPDATE_TRACK",data:e}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("trackActions updateTrack error: ",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},be=[{label:"Finland",value:"FI"},{label:"United Kingdom",value:"GB"},{label:"United States",value:"US"},{label:"Afghanistan",value:"AF"},{label:"\xc5land Islands",value:"AX"},{label:"Albania",value:"AL"},{label:"Algeria",value:"DZ"},{label:"American Samoa",value:"AS"},{label:"AndorrA",value:"AD"},{label:"Angola",value:"AO"},{label:"Anguilla",value:"AI"},{label:"Antarctica",value:"AQ"},{label:"Antigua and Barbuda",value:"AG"},{label:"Argentina",value:"AR"},{label:"Armenia",value:"AM"},{label:"Aruba",value:"AW"},{label:"Australia",value:"AU"},{label:"Austria",value:"AT"},{label:"Azerbaijan",value:"AZ"},{label:"Bahamas",value:"BS"},{label:"Bahrain",value:"BH"},{label:"Bangladesh",value:"BD"},{label:"Barbados",value:"BB"},{label:"Belarus",value:"BY"},{label:"Belgium",value:"BE"},{label:"Belize",value:"BZ"},{label:"Benin",value:"BJ"},{label:"Bermuda",value:"BM"},{label:"Bhutan",value:"BT"},{label:"Bolivia",value:"BO"},{label:"Bosnia and Herzegovina",value:"BA"},{label:"Botswana",value:"BW"},{label:"Bouvet Island",value:"BV"},{label:"Brazil",value:"BR"},{label:"British Indian Ocean Territory",value:"IO"},{label:"Brunei Darussalam",value:"BN"},{label:"Bulgaria",value:"BG"},{label:"Burkina Faso",value:"BF"},{label:"Burundi",value:"BI"},{label:"Cambodia",value:"KH"},{label:"Cameroon",value:"CM"},{label:"Canada",value:"CA"},{label:"Cape Verde",value:"CV"},{label:"Cayman Islands",value:"KY"},{label:"Central African Republic",value:"CF"},{label:"Chad",value:"TD"},{label:"Chile",value:"CL"},{label:"China",value:"CN"},{label:"Christmas Island",value:"CX"},{label:"Cocos (Keeling) Islands",value:"CC"},{label:"Colombia",value:"CO"},{label:"Comoros",value:"KM"},{label:"Congo",value:"CG"},{label:"Congo, The Democratic Republic of the",value:"CD"},{label:"Cook Islands",value:"CK"},{label:"Costa Rica",value:"CR"},{label:"Cote D'Ivoire",value:"CI"},{label:"Croatia",value:"HR"},{label:"Cuba",value:"CU"},{label:"Cyprus",value:"CY"},{label:"Czech Republic",value:"CZ"},{label:"Denmark",value:"DK"},{label:"Djibouti",value:"DJ"},{label:"Dominica",value:"DM"},{label:"Dominican Republic",value:"DO"},{label:"Ecuador",value:"EC"},{label:"Egypt",value:"EG"},{label:"El Salvador",value:"SV"},{label:"Equatorial Guinea",value:"GQ"},{label:"Eritrea",value:"ER"},{label:"Estonia",value:"EE"},{label:"Ethiopia",value:"ET"},{label:"Falkland Islands (Malvinas)",value:"FK"},{label:"Faroe Islands",value:"FO"},{label:"Fiji",value:"FJ"},{label:"France",value:"FR"},{label:"French Guiana",value:"GF"},{label:"French Polynesia",value:"PF"},{label:"French Southern Territories",value:"TF"},{label:"Gabon",value:"GA"},{label:"Gambia",value:"GM"},{label:"Georgia",value:"GE"},{label:"Germany",value:"DE"},{label:"Ghana",value:"GH"},{label:"Gibraltar",value:"GI"},{label:"Greece",value:"GR"},{label:"Greenland",value:"GL"},{label:"Grenada",value:"GD"},{label:"Guadeloupe",value:"GP"},{label:"Guam",value:"GU"},{label:"Guatemala",value:"GT"},{label:"Guernsey",value:"GG"},{label:"Guinea",value:"GN"},{label:"Guinea-Bissau",value:"GW"},{label:"Guyana",value:"GY"},{label:"Haiti",value:"HT"},{label:"Heard Island and Mcdonald Islands",value:"HM"},{label:"Holy See (Vatican City State)",value:"VA"},{label:"Honduras",value:"HN"},{label:"Hong Kong",value:"HK"},{label:"Hungary",value:"HU"},{label:"Iceland",value:"IS"},{label:"India",value:"IN"},{label:"Indonesia",value:"ID"},{label:"Iran, Islamic Republic Of",value:"IR"},{label:"Iraq",value:"IQ"},{label:"Ireland",value:"IE"},{label:"Isle of Man",value:"IM"},{label:"Israel",value:"IL"},{label:"Italy",value:"IT"},{label:"Jamaica",value:"JM"},{label:"Japan",value:"JP"},{label:"Jersey",value:"JE"},{label:"Jordan",value:"JO"},{label:"Kazakhstan",value:"KZ"},{label:"Kenya",value:"KE"},{label:"Kiribati",value:"KI"},{label:"Korea, Democratic People's Republic of",value:"KP"},{label:"Korea, Republic of",value:"KR"},{label:"Kuwait",value:"KW"},{label:"Kyrgyzstan",value:"KG"},{label:"Lao People's Democratic Republic",value:"LA"},{label:"Latvia",value:"LV"},{label:"Lebanon",value:"LB"},{label:"Lesotho",value:"LS"},{label:"Liberia",value:"LR"},{label:"Libyan Arab Jamahiriya",value:"LY"},{label:"Liechtenstein",value:"LI"},{label:"Lithuania",value:"LT"},{label:"Luxembourg",value:"LU"},{label:"Macao",value:"MO"},{label:"Macedonia, The Former Yugoslav Republic of",value:"MK"},{label:"Madagascar",value:"MG"},{label:"Malawi",value:"MW"},{label:"Malaysia",value:"MY"},{label:"Maldives",value:"MV"},{label:"Mali",value:"ML"},{label:"Malta",value:"MT"},{label:"Marshall Islands",value:"MH"},{label:"Martinique",value:"MQ"},{label:"Mauritania",value:"MR"},{label:"Mauritius",value:"MU"},{label:"Mayotte",value:"YT"},{label:"Mexico",value:"MX"},{label:"Micronesia, Federated States of",value:"FM"},{label:"Moldova, Republic of",value:"MD"},{label:"Monaco",value:"MC"},{label:"Mongolia",value:"MN"},{label:"Montenegro",value:"ME"},{label:"Montserrat",value:"MS"},{label:"Morocco",value:"MA"},{label:"Mozambique",value:"MZ"},{label:"Myanmar",value:"MM"},{label:"Namibia",value:"NA"},{label:"Nauru",value:"NR"},{label:"Nepal",value:"NP"},{label:"Netherlands",value:"NL"},{label:"Netherlands Antilles",value:"AN"},{label:"New Caledonia",value:"NC"},{label:"New Zealand",value:"NZ"},{label:"Nicaragua",value:"NI"},{label:"Niger",value:"NE"},{label:"Nigeria",value:"NG"},{label:"Niue",value:"NU"},{label:"Norfolk Island",value:"NF"},{label:"Northern Mariana Islands",value:"MP"},{label:"Norway",value:"NO"},{label:"Oman",value:"OM"},{label:"Pakistan",value:"PK"},{label:"Palau",value:"PW"},{label:"Palestinian Territory, Occupied",value:"PS"},{label:"Panama",value:"PA"},{label:"Papua New Guinea",value:"PG"},{label:"Paraguay",value:"PY"},{label:"Peru",value:"PE"},{label:"Philippines",value:"PH"},{label:"Poland",value:"PL"},{label:"Portugal",value:"PT"},{label:"Puerto Rico",value:"PR"},{label:"Qatar",value:"QA"},{label:"Romania",value:"RO"},{label:"Russian Federation",value:"RU"},{label:"RWANDA",value:"RW"},{label:"Saint Helena",value:"SH"},{label:"Saint Kitts and Nevis",value:"KN"},{label:"Saint Lucia",value:"LC"},{label:"Saint Pierre and Miquelon",value:"PM"},{label:"Saint Vincent and the Grenadines",value:"VC"},{label:"Samoa",value:"WS"},{label:"San Marino",value:"SM"},{label:"Sao Tome and Principe",value:"ST"},{label:"Saudi Arabia",value:"SA"},{label:"Senegal",value:"SN"},{label:"Serbia",value:"RS"},{label:"Seychelles",value:"SC"},{label:"Sierra Leone",value:"SL"},{label:"Singapore",value:"SG"},{label:"Slovakia",value:"SK"},{label:"Slovenia",value:"SI"},{label:"Solomon Islands",value:"SB"},{label:"Somalia",value:"SO"},{label:"South Africa",value:"ZA"},{label:"South Georgia and the South Sandwich Islands",value:"GS"},{label:"Spain",value:"ES"},{label:"Sri Lanka",value:"LK"},{label:"Sudan",value:"SD"},{label:"Suriname",value:"SR"},{label:"Svalbard and Jan Mayen",value:"SJ"},{label:"Swaziland",value:"SZ"},{label:"Sweden",value:"SE"},{label:"Switzerland",value:"CH"},{label:"Syrian Arab Republic",value:"SY"},{label:"Taiwan, Province of China",value:"TW"},{label:"Tajikistan",value:"TJ"},{label:"Tanzania, United Republic of",value:"TZ"},{label:"Thailand",value:"TH"},{label:"Timor-Leste",value:"TL"},{label:"Togo",value:"TG"},{label:"Tokelau",value:"TK"},{label:"Tonga",value:"TO"},{label:"Trinidad and Tobago",value:"TT"},{label:"Tunisia",value:"TN"},{label:"Turkey",value:"TR"},{label:"Turkmenistan",value:"TM"},{label:"Turks and Caicos Islands",value:"TC"},{label:"Tuvalu",value:"TV"},{label:"Uganda",value:"UG"},{label:"Ukraine",value:"UA"},{label:"United Arab Emirates",value:"AE"},{label:"United States Minor Outlying Islands",value:"UM"},{label:"Uruguay",value:"UY"},{label:"Uzbekistan",value:"UZ"},{label:"Vanuatu",value:"VU"},{label:"Venezuela",value:"VE"},{label:"Viet Nam",value:"VN"},{label:"Virgin Islands, British",value:"VG"},{label:"Virgin Islands, U.S.",value:"VI"},{label:"Wallis and Futuna",value:"WF"},{label:"Western Sahara",value:"EH"},{label:"Yemen",value:"YE"},{label:"Zambia",value:"ZM"},{label:"Zimbabwe",value:"ZW"}],Ee=[{key:1,label:"Finland",value:1},{key:2,label:"Other than Finland",value:2},{key:0,label:"Unknown",value:0}],fe=[{key:0,label:"00:00",value:"00:00:00"},{key:1,label:"01:00",value:"01:00:00"},{key:2,label:"02:00",value:"02:00:00"},{key:3,label:"03:00",value:"03:00:00"},{key:4,label:"04:00",value:"04:00:00"},{key:5,label:"05:00",value:"05:00:00"},{key:6,label:"06:00",value:"06:00:00"},{key:7,label:"07:00",value:"07:00:00"},{key:8,label:"08:00",value:"08:00:00"},{key:9,label:"09:00",value:"09:00:00"},{key:10,label:"10:00",value:"10:00:00"},{key:11,label:"11:00",value:"11:00:00"},{key:12,label:"12:00",value:"12:00:00"},{key:13,label:"13:00",value:"13:00:00"},{key:14,label:"14:00",value:"14:00:00"},{key:15,label:"15:00",value:"15:00:00"},{key:16,label:"16:00",value:"16:00:00"},{key:17,label:"17:00",value:"17:00:00"},{key:18,label:"18:00",value:"18:00:00"},{key:19,label:"19:00",value:"19:00:00"},{key:20,label:"20:00",value:"20:00:00"},{key:21,label:"21:00",value:"21:00:00"},{key:22,label:"22:00",value:"22:00:00"},{key:23,label:"23:00",value:"23:00:00"}],ve=[{key:0,label:"01:00",value:"01:00:00"},{key:1,label:"02:00",value:"02:00:00"},{key:2,label:"03:00",value:"03:00:00"},{key:3,label:"04:00",value:"04:00:00"},{key:4,label:"05:00",value:"05:00:00"},{key:5,label:"06:00",value:"06:00:00"},{key:6,label:"07:00",value:"07:00:00"},{key:7,label:"08:00",value:"08:00:00"},{key:8,label:"09:00",value:"09:00:00"},{key:9,label:"10:00",value:"10:00:00"},{key:10,label:"11:00",value:"11:00:00"},{key:11,label:"12:00",value:"12:00:00"},{key:12,label:"13:00",value:"13:00:00"},{key:13,label:"14:00",value:"14:00:00"},{key:14,label:"15:00",value:"15:00:00"},{key:15,label:"16:00",value:"16:00:00"},{key:16,label:"17:00",value:"17:00:00"},{key:17,label:"18:00",value:"18:00:00"},{key:18,label:"19:00",value:"19:00:00"},{key:19,label:"20:00",value:"20:00:00"},{key:20,label:"21:00",value:"21:00:00"},{key:21,label:"22:00",value:"22:00:00"},{key:22,label:"23:00",value:"23:00:00"},{key:23,label:"24:00",value:"23:59:59"}],ge=[{key:"01",label:"January",value:"01"},{key:"02",label:"February",value:"02"},{key:"03",label:"March",value:"03"},{key:"04",label:"April",value:"04"},{key:"05",label:"May",value:"05"},{key:"06",label:"June",value:"06"},{key:"07",label:"July",value:"07"},{key:"08",label:"August",value:"08"},{key:"09",label:"September",value:"09"},{key:"10",label:"October",value:"10"},{key:"11",label:"November",value:"11"},{key:"12",label:"December",value:"12"}],_e=[{key:0,label:"In progress",value:0},{key:1,label:"Ready",value:1},{key:9,label:"Deleted",value:9}],he=(new Date).getFullYear()+1,ye=[],ke=2001;ke<=he;ke++)ye.push(ke);var Oe,Te=ye.map((function(e){return{key:e.toString(),label:e.toString(),value:e.toString()}})),Ae=Te=Te.reverse(),Ce=function(e){var t=e.reportDetails,a=e.addToAlbumAndReport,r=e.onSubmit,l=e.onClose;return n.a.createElement(N.d,{initialValues:{track_title:"",disc_no:1,track_no:1,minutes:0,seconds:0,country:1,record_country:"",people:"",comment:"",isrc:""},onSubmit:r},(function(e){var r,c=e.isValid,o=e.dirty;return r=null!==t?n.a.createElement(n.a.Fragment,null,n.a.createElement(x.a.Column,{width:6},n.a.createElement(L.a,{disabled:!c||!o,color:"green",onClick:function(){return a}},"Add track to album and report ".concat(t.program_name," ").concat(t.program_date))),n.a.createElement(x.a.Column,{width:6},n.a.createElement(L.a,{disabled:!c||!o,type:"submit",color:"blue"},"Add track to album"))):n.a.createElement(x.a.Column,{width:6},n.a.createElement(L.a,{disabled:!c||!o,color:"blue",type:"submit"},"Add track to album")),n.a.createElement(N.c,{className:"form ui"},n.a.createElement(N.b,{label:"Track title",placeholder:"Track title...",name:"track_title",component:M}),n.a.createElement(x.a,null,n.a.createElement(x.a.Column,{width:8},n.a.createElement(N.b,{label:"Length - minutes",name:"minutes",component:Y,min:0,max:999})),n.a.createElement(x.a.Column,{width:8},n.a.createElement(N.b,{label:"Length - seconds",name:"seconds",component:Y,min:0,max:59}))),n.a.createElement(x.a,null,n.a.createElement(x.a.Column,{width:8},n.a.createElement(N.b,{label:"Track #",name:"track_no",component:Y,min:0,max:999})),n.a.createElement(x.a.Column,{width:8},n.a.createElement(N.b,{label:"Disc #",name:"disc_no",component:Y,min:0,max:99})),n.a.createElement(x.a.Column,{width:8},n.a.createElement(G,{label:"Country",name:"country",options:Ee})),n.a.createElement(x.a.Column,{width:8},n.a.createElement(G,{label:"Recorded in",name:"record_country",options:be}))),n.a.createElement(N.b,{label:"Composers - one per line",placeholder:"LAST NAME FIRST NAME",name:"people",component:V}),n.a.createElement(N.b,{label:"Comment",placeholder:"Any additional information",name:"comment",component:M}),n.a.createElement(x.a,null,r,n.a.createElement(x.a.Column,{floated:"right",width:6},n.a.createElement(L.a,{floated:"right",type:"button",onClick:l,color:"red"},"Cancel"))))}))},we=function(e){var t=e.currentAlbum,a=e.report,l=Object(o.b)();console.log("album at album details",t),console.log("report at album details",a);var c=Object(r.useState)(!1),u=Object(J.a)(c,2),i=u[0],s=u[1],m=function(){s(!1)};return n.a.createElement(ne.a,{trigger:n.a.createElement(L.a,{style:{marginBottom:"0.5rem"},onClick:function(){s(!0)},floated:"right",color:"green"},n.a.createElement(q.a,{name:"add"}),"Add a track to the album"),closeIcon:!0,open:i,onClose:m},n.a.createElement(ne.a.Content,null,n.a.createElement(D.a,{content:"Add a track to album ".concat(t.album_name)}),n.a.createElement(Ce,{onClose:m,onSubmit:function(e){var a,r=60*Number(e.minutes)+Number(e.seconds);a=e.people?"| ".concat(e.people.replace(/\n/g," | ")," |"):null,console.log(e);var n={track_title:e.track_title,artist_name:t.artist_name,album_name:t.album_name,album_id:t.album_id,artist_id:t.artist_id,length:r,country:e.country,cat_id:t.cat_id,label:t.label,year:t.year,record_country:e.record_country,people:a,disc_no:Number(e.disc_no),track_no:Number(e.track_no),isrc:e.isrc,comment:e.comment};console.log(n),l(function(e){return function(){var t=Object(g.a)(v.a.mark((function t(a){var r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,de.addTrackToAlbum(e);case 3:r=t.sent,a({type:"ADD_TRACK_TO_ALBUM",data:r}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("trackactions addTrackToAlbum error: ",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}(n)),l(j("".concat(e.track_title," added to ").concat(t.album_name),"success")),m()},reportDetails:a.reportDetails,currentAlbum:t,addToAlbumAndReport:function(e){var r,n,c,o,u=60*Number(e.minutes)+Number(e.seconds);o=e.people?"| ".concat(e.people.replace(/\n/g," | ")," |"):null,console.log(e);var i={track_title:e.track_title,artist_name:t.artist_name,album_name:t.album_name,album_id:t.album_id,artist_id:t.artist_id,length:u,country:e.country,cat_id:t.cat_id,label:t.label,year:t.year,record_country:e.record_country,people:o,disc_no:Number(e.disc_no),track_no:Number(e.track_no),isrc:e.isrc,comment:e.comment,report_id:null===(r=a.reportDetails)||void 0===r?void 0:r.id,sortable_rank:a.report.length+1};console.log("add to album and",i),l(function(e){return function(){var t=Object(g.a)(v.a.mark((function t(a){var r,n,l,c;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,de.addTrackToAlbum(e);case 3:return r=t.sent,n={track_id:r.track_id,report_id:e.report_id,length:e.length,sortable_rank:e.sortable_rank},t.next=7,Q.addTrackToReport(n);case 7:l=t.sent,c=Object(p.a)({},l,{},r),a({type:"ADD_TRACK_TO_ALBUM",data:r}),a({type:"ADD_TRACK_TO_REPORT",data:c}),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),console.log("trackActions addTrackToAlbumAndReport error: ",t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}()}(i)),l(j("".concat(e.track_title," added to ").concat(t.album_name," and to ").concat(null===(n=a.reportDetails)||void 0===n?void 0:n.program_name," ").concat(null===(c=a.reportDetails)||void 0===c?void 0:c.program_date),"success")),m()}})))},Se=function(e){var t=e.id,a=Object(o.b)(),l=Object(o.c)((function(e){return e.album})),c=Object(o.c)((function(e){return e.report}));if(Object(r.useEffect)((function(){a(function(e){return function(){var t=Object(g.a)(v.a.mark((function t(a){var r,n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"CLEAR_CURRENT_ALBUM"}),a({type:"SET_LOADING"}),t.next=5,k.getOneAlbum(e);case 5:return r=t.sent,console.log("albumactions getonealbum",r),a({type:"GET_ONE_ALBUM",data:r}),t.next=10,k.getTracklistOfAlbum(e);case 10:n=t.sent,a({type:"GET_TRACKLIST_OF_ALBUM",data:n}),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),console.log("albumActions getOneAlbum error:",t.t0);case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e){return t.apply(this,arguments)}}()}(t))}),[t]),null===l.currentAlbum)return n.a.createElement(d.a,null,n.a.createElement(b.a,null,n.a.createElement(E.a,null,"Ladataan...")));return n.a.createElement(d.a,null,n.a.createElement(we,{currentAlbum:l.currentAlbum,report:c}),n.a.createElement(z,{onSubmit:function(e){var t=Object(p.a)({},e,{year:e.year.toString()});a(function(e){return function(){var t=Object(g.a)(v.a.mark((function t(a){var r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"SET_LOADING"}),t.next=4,k.updateAlbum(e);case 4:return t.next=6,k.getOneAlbum(e.id);case 6:r=t.sent,a({type:"GET_ONE_ALBUM",data:r}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log("albumActions updateAlbum error:",t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}(t)),a(j("Artist ".concat(e.name," updated!"),"success"))},currentAlbum:l.currentAlbum}),n.a.createElement(re,{tracklist:l.tracklist}))},Re=null,je=function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:Re}},e.next=3,m.a.get("".concat("/api/artists","/details/").concat(t),a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xe=function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:Re}},e.next=3,m.a.get("".concat("/api/artists","/albumsby/").concat(t),a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),De={setToken:function(e){Re="bearer ".concat(e)},updateArtist:function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:Re}},e.next=3,m.a.put("".concat("/api/artists","/details/").concat(t.id),t,a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getOneArtist:je,getAlbumsByArtist:xe},Le=function(e){var t=e.album;return n.a.createElement(H.a.Row,null,n.a.createElement(H.a.Cell,null,"merge albums modal here"),n.a.createElement(H.a.Cell,null,n.a.createElement(u.b,{to:"/album/".concat(t.album_id)},t.name)),n.a.createElement(H.a.Cell,null,t.identifier),n.a.createElement(H.a.Cell,null,t.track_count),n.a.createElement(H.a.Cell,null,t.report_occurrence))},Ne=function(e){var t=e.albumList;return null===t?n.a.createElement("span",null,"loading"):n.a.createElement(n.a.Fragment,null,n.a.createElement("h4",null,"Albums"),n.a.createElement(H.a,{striped:!0},n.a.createElement(H.a.Header,null,n.a.createElement(H.a.Row,null,n.a.createElement(H.a.Cell,null,"ID#"),n.a.createElement(H.a.Cell,null,"Album name"),n.a.createElement(H.a.Cell,null,"Catalog ID"),n.a.createElement(H.a.Cell,null,"Tracks"),n.a.createElement(H.a.Cell,null,"Report occurrence"),n.a.createElement(H.a.Cell,null))),n.a.createElement(H.a.Body,null,t.map((function(e){return n.a.createElement(Le,{key:e.album_id,album:e})})))))},Ie=function(e){var t=e.currentArtist,a=e.onSubmit;return null===t?n.a.createElement(b.a,null,n.a.createElement(E.a,null,"Loading artist...")):n.a.createElement(x.a,{columns:2},n.a.createElement(x.a.Column,null,n.a.createElement(D.a,null,"Artist info"),n.a.createElement(N.d,{initialValues:{id:t.id,name:t.name,spotify_id:t.spotify_id||""},onSubmit:a,validate:function(e){var t={};return e.name||(t.name="Artist name is required"),t}},(function(e){var t=e.isValid;return n.a.createElement(N.c,{className:"form ui"},n.a.createElement(N.b,{label:"Artist name",placeholder:"Name",name:"name",component:M}),n.a.createElement(N.b,{label:"Spotify id",placeholder:"Spotify id",name:"spotify_id",component:M}),n.a.createElement(L.a,{type:"submit",floated:"left",color:"green",disabled:!t},"Update artist"))}))))},Ge=function(e){var t=e.id,a=Object(o.b)(),l=Object(o.c)((function(e){return e.artist}));Object(r.useEffect)((function(){a(function(e){return function(){var t=Object(g.a)(v.a.mark((function t(a){var r,n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"CLEAR_CURRENT_ARTIST"}),a({type:"SET_LOADING"}),t.next=5,De.getOneArtist(e);case 5:return r=t.sent,a({type:"GET_ONE_ARTIST",data:r}),t.next=9,De.getAlbumsByArtist(e);case 9:n=t.sent,a({type:"GET_ALBUM_LIST_BY_ARTIST",data:n}),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),console.log(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}()}(t))}),[t]);return null===l.currentArtist?n.a.createElement(d.a,null,n.a.createElement(b.a,null,n.a.createElement(E.a,null,"Ladataan..."))):n.a.createElement(d.a,null,n.a.createElement(Ie,{currentArtist:l.currentArtist,onSubmit:function(e){var t;a((t=e,function(){var e=Object(g.a)(v.a.mark((function e(a){var r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:"SET_LOADING"}),e.next=3,De.updateArtist(t);case 3:return e.next=5,De.getOneArtist(t.id);case 5:r=e.sent,a({type:"GET_ONE_ARTIST",data:r});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),a(j("Artist ".concat(e.name," updated!"),"success"))}}),n.a.createElement(Ne,{albumList:l.albumList}))},Me=function(){return n.a.createElement("div",{style:{marginTop:"5rem",marginBottom:"2rem",textAlign:"center"}},n.a.createElement("br",null),n.a.createElement("em",null," ","\xa9 ",(new Date).getFullYear()," ",n.a.createElement("a",{href:"https://www.teemukostamo.com",target:"_blank",rel:"noopener noreferrer"}," ","Teemu Kostamo"," ")," "))},Pe=a(28),Ue=a.n(Pe),Fe=a(44),Be={borderRadius:0,display:"block",opacity:.9,padding:"2em"},Ye=function(e){var t=e.onSubmit,a=e.currentUser,r=e.programOptions;return n.a.createElement(N.d,{initialValues:{program_name:"",program_no:0,program_dj:"".concat(null===a||void 0===a?void 0:a.first_name," ").concat(null===a||void 0===a?void 0:a.last_name),program_date:Ue()(new Date).format("YYYY-MM-DD"),program_start_time:"00:00",program_end_time:"01:00",program_id:0,rerun:null,status:0,user_id:(null===a||void 0===a?void 0:a.id)||0,username:(null===a||void 0===a?void 0:a.username)||"",first_name:(null===a||void 0===a?void 0:a.first_name)||"",last_name:(null===a||void 0===a?void 0:a.last_name)||""},onSubmit:t,validate:function(e){var t={};return e.program_dj||(t.program_dj="Field is required"),""===e.program_start_time&&(t.program_start_time="Field is required"),""===e.program_end_time&&(t.program_end_time="Field is required"),0===Number(e.program_id)&&(t.program_dj="Please select a program"),parseInt(e.program_end_time)<=parseInt(e.program_start_time)&&"23:59"!==e.program_end_time&&(t.program_end_time="Check start and end times!"),t}},(function(e){var t=e.isValid,a=e.dirty;return n.a.createElement(N.c,{className:"form ui"},n.a.createElement("label",{style:{fontWeight:"bold"}},"Program"," ",n.a.createElement(K.a,{trigger:n.a.createElement(q.a,{style:{display:"inline"},name:"question circle"}),content:"Select your program from the list. Contact staff if your program is not on the list",style:Be,inverted:!0})),n.a.createElement(G,{placeholder:"Select program...",label:"",name:"program_id",options:r}),n.a.createElement("label",{style:{fontWeight:"bold"}},"Program number"," ",n.a.createElement(K.a,{trigger:n.a.createElement(q.a,{style:{display:"inline"},name:"question circle"}),content:"Three digit number can be found on the weekly programming schedule. Insert zero if you do not know the number  ",style:Be,inverted:!0})),n.a.createElement(N.b,{label:"",name:"program_no",component:Y,min:0,max:999}),n.a.createElement(N.b,{label:"DJ",placeholder:"DJ",name:"program_dj",component:M}),n.a.createElement(x.a,null,n.a.createElement(x.a.Column,{width:5,style:{marginTop:"0.3rem"}},n.a.createElement("label",{style:{fontWeight:"bold"}},"Program date"),n.a.createElement(Fe.b,{name:"program_date",dateFormat:"dd.MM.yyyy",placeholder:"dd.mm.yyyy"})," "),n.a.createElement(x.a.Column,{width:5},n.a.createElement(G,{label:"Start time",name:"program_start_time",options:fe})),n.a.createElement(x.a.Column,{width:5},n.a.createElement(G,{label:"End time",name:"program_end_time",options:ve}))),n.a.createElement(L.a,{style:{marginTop:"1rem"},type:"submit",floated:"left",color:"green",disabled:!t||!a},"Create report"))}))},Ve=function(){var e=Object(r.useState)(!1),t=Object(J.a)(e,2),a=t[0],l=t[1],c=Object(o.b)(),u=Object(o.c)((function(e){return e.program})),s=Object(o.c)((function(e){return e.login})),m=Object(o.c)((function(e){return e.report})),b=u.activePrograms.map((function(e){return{key:e.id,label:e.name,value:e.id}}));return a&&null!==m.newReport?n.a.createElement(i.a,{to:"reports/".concat(m.newReport.id)}):n.a.createElement(x.a.Column,null,n.a.createElement(d.a,null,n.a.createElement(D.a,null,"Create a new report"),n.a.createElement(Ye,{onSubmit:function(e){var t;console.log("submit new report values",e);var a,r=Object(p.a)({},e,{program_id:Number(e.program_id),program_name:null===(t=u.activePrograms.find((function(t){return t.id===Number(e.program_id)})))||void 0===t?void 0:t.name});console.log("report to create values",r),c(j("Created new report for the program ".concat(r.program_name," "),"success")),l(!0),c((a=r,function(){var e=Object(g.a)(v.a.mark((function e(t){var r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"SET_LOADING"}),e.next=4,Q.createReport(a);case 4:r=e.sent,t({type:"CREATE_REPORT",data:r}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()))},currentUser:s.currentUser,programOptions:b})))},ze=a(694),He=a(369),Ke=a.n(He),qe=null,Je=function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:qe}},e.next=3,m.a.get("".concat("/api/reportslist","/date/").concat(t),a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),We=function(){var e=Object(g.a)(v.a.mark((function e(t,a){var r,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:{Authorization:qe}},e.next=3,m.a.get("".concat("/api/reportslist","/all?date=").concat(t,"&user=").concat(a),r);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Ze=function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:qe}},e.next=3,m.a.get("".concat("/api/reportslist","/user/").concat(t),a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Qe=function(){var e=Object(g.a)(v.a.mark((function e(){var t,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:qe}},e.next=3,m.a.get("/api/reporttransfer",t);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Xe=function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:qe}},e.next=3,m.a.put("".concat("/api/reportslist","/").concat(t),{},a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$e=function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={headers:{Authorization:qe,responseType:"blob"}},e.next=4,m.a.post("/api/reporttransfer",t,a);case 4:return r=e.sent,e.abrupt("return",r.data);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),et=function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={headers:{Authorization:qe,responseType:"blob"}},e.next=4,m.a.get("/api/reporttransfer/".concat(t),a);case 4:r=e.sent,Ke()(r.data,t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),tt={setToken:function(e){qe="bearer ".concat(e)},deleteReport:Xe,getAllByDate:Je,getAllByDateByUser:We,getAllInProgress:Ze,getAllTransfers:Qe,generateReportDownload:$e,downloadReport:et},at=function(e){return function(){var t=Object(g.a)(v.a.mark((function t(a){var r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"SET_LOADING"}),a({type:"CLEAR_CURRENT_REPORT"}),t.next=5,tt.getAllByDate(e);case 5:r=t.sent,a({type:"GET_ALL_REPORTS_BY_DATE",data:r,date:e}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log("reportListActions getAllReportsByDate error",t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},rt=function(e,t){return function(){var a=Object(g.a)(v.a.mark((function a(r){var n;return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,r({type:"SET_LOADING"}),r({type:"CLEAR_CURRENT_REPORT"}),a.next=5,tt.getAllByDateByUser(e,t);case 5:n=a.sent,r({type:"GET_ALL_REPORTS_BY_DATE",data:n,date:e}),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),console.log("reportListActions getAllReportsByDateByUser error",a.t0);case 12:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e){return a.apply(this,arguments)}}()},nt=function(e){var t=e.report,a=Object(o.b)(),l=Object(o.c)((function(e){return e.login})),c=Object(r.useState)(!1),i=Object(J.a)(c,2),s=i[0],m=i[1];return n.a.createElement(n.a.Fragment,null,n.a.createElement(H.a.Row,null,n.a.createElement(H.a.Cell,null,n.a.createElement(u.b,{to:"reports/".concat(t.id)},t.name)),n.a.createElement(H.a.Cell,null,Ue()(t.program_date).format("DD.MM.YYYY")),n.a.createElement(H.a.Cell,null,t.program_no),n.a.createElement(H.a.Cell,null," ",n.a.createElement(q.a,{color:"red",onClick:function(){return m(!0)},name:"delete"}),n.a.createElement(ze.a,{content:"Are you sure you wish to delete ".concat(t.name," ").concat(t.program_date),open:s,onCancel:function(){m(!1)},onConfirm:function(){var e;m(!1);var r={report_id:t.id,user_id:null===(e=l.currentUser)||void 0===e?void 0:e.id};a(function(e){return function(){var t=Object(g.a)(v.a.mark((function t(a){var r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"SET_LOADING"}),t.next=4,tt.deleteReport(e.report_id);case 4:return t.next=6,tt.getAllInProgress(e.user_id);case 6:r=t.sent,a({type:"GET_ALL_IN_PROGRESS",data:r}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}(r)),a(j("".concat(t.name," ").concat(t.program_date," poistettu!"),"success"))},cancelButton:"Nope",confirmButton:"Sure"}))))},lt=function(e){var t=e.inProgress;return null===t?null:0===t.length?n.a.createElement(x.a.Column,null,n.a.createElement(d.a,null,n.a.createElement("h3",null,"Reports in progress"),"no reports in progress")):n.a.createElement(n.a.Fragment,null,n.a.createElement(x.a.Column,null,n.a.createElement(d.a,null,n.a.createElement(D.a,null,"Reports in progress"),n.a.createElement(H.a,{striped:!0},n.a.createElement(H.a.Header,null,n.a.createElement(H.a.Row,null,n.a.createElement(H.a.Cell,null,"Program name"),n.a.createElement(H.a.Cell,null,"Date"),n.a.createElement(H.a.Cell,null,"Number"),n.a.createElement(H.a.Cell,null))),n.a.createElement(H.a.Body,null,t.map((function(e){return n.a.createElement(nt,{key:e.id,report:e})})))))))},ct=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.reportList})),a=Object(o.c)((function(e){return e.program})),l=Object(o.c)((function(e){return e.login}));return Object(r.useEffect)((function(){var t,a;e((a=null===(t=l.currentUser)||void 0===t?void 0:t.id,function(){var e=Object(g.a)(v.a.mark((function e(t){var r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"SET_LOADING"}),t({type:"CLEAR_CURRENT_REPORT"}),e.next=5,tt.getAllInProgress(a);case 5:r=e.sent,t({type:"GET_ALL_IN_PROGRESS",data:r}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("reportListActions getAllInProgressReports error",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()))}),[l.currentUser]),null===a.activePrograms?n.a.createElement(d.a,null,n.a.createElement(b.a,{active:!0},n.a.createElement(E.a,null,"Loading active programs..."))," "):n.a.createElement(d.a,null,n.a.createElement(x.a,{divided:"vertically"},n.a.createElement(x.a.Row,{columns:2},n.a.createElement(Ve,null),n.a.createElement(lt,{inProgress:t.inProgress}))))},ot=a(689),ut={login:function(){var e=Object(g.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.post("/api/login",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},it=null,st={getAllActive:function(){var e=Object(g.a)(v.a.mark((function e(){var t,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:it}},e.next=3,m.a.get("".concat("/api/programs","/active"),t);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getAll:function(){var e=Object(g.a)(v.a.mark((function e(){var t,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:it}},e.next=3,m.a.get("".concat("/api/programs","/all"),t);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getOne:function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:it}},e.next=3,m.a.get("".concat("/api/programs","/getone/").concat(t),a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),createProgram:function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:it}},e.next=3,m.a.post("/api/programs",t,a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateProgram:function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:it}},e.next=3,m.a.put("".concat("/api/programs","/update"),t,a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),mergePrograms:function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:it}},e.next=3,m.a.put("".concat("/api/programs","/merge"),t,a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){it="bearer ".concat(e)}},mt=null,dt={getAll:function(){var e=Object(g.a)(v.a.mark((function e(){var t,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:mt}},e.next=3,m.a.get("/api/users",t);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),setToken:function(e){mt="bearer ".concat(e)},createUser:function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:mt}},e.next=3,m.a.post("/api/users",t,a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateUser:function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:mt}},e.next=3,m.a.put("".concat("/api/users","/").concat(t.id),t,a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),deleteUser:function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:mt}},e.next=3,m.a.delete("".concat("/api/users","/").concat(t),a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},pt=function(){return function(){var e=Object(g.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.localStorage.removeItem("loggedUser"),t({type:"LOGOUT"});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},bt=function(){var e=Object(o.b)(),t=Object(r.useState)(""),a=Object(J.a)(t,2),l=a[0],c=a[1],u=Object(r.useState)(""),i=Object(J.a)(u,2),s=i[0],m=i[1];return n.a.createElement("div",null,n.a.createElement("h1",null,"RADIO TRACKLIST REPORTING"),n.a.createElement("h3",null,"Log in"),n.a.createElement(I.a,{onSubmit:function(t){t.preventDefault(),e(function(e){return function(){var t=Object(g.a)(v.a.mark((function t(a){var r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"SET_LOADING"}),t.next=4,ut.login(e);case 4:r=t.sent,window.localStorage.setItem("loggedUser",JSON.stringify(r)),a({type:"LOGIN",data:r,loading:!1}),t.next=15;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0),a({type:"SET_NOTIFICATION",data:{message:"wrong username or password",type:"fail"}}),setTimeout((function(){a({type:"CLEAR_NOTIFICATION"})}),3e3);case 15:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}({username:l,password:s}))}},n.a.createElement(I.a.Field,{id:"login-username",label:"username",control:ot.a,type:"text",placeholder:"Username...",onChange:function(e){return c(e.target.value.trim())}}),n.a.createElement(I.a.Field,{id:"login-password",label:"password",control:ot.a,type:"password",placeholder:"Password...",onChange:function(e){return m(e.target.value.trim())}}),n.a.createElement(L.a,{id:"login-button",color:"green",type:"submit"},"Log in")))},Et=a(701),ft=a(380),vt=a(696),gt=a(114),_t=a.n(gt),ht=function(e){var t=e.onSubmit,a=e.onCancel,r=e.user;return n.a.createElement(N.d,{initialValues:{password:"",confirm_password:"",first_name:r.first_name,last_name:r.last_name,email:r.email},onSubmit:t,validate:function(e){var t={};return e.password!==e.confirm_password&&(t.password="Passwords do not match",t.confirm_password="Passwords do not match"),e.email||(t.email="Field is required"),e.first_name||(t.first_name="Field is required"),e.last_name||(t.last_name="Field is required"),t}},(function(e){var t=e.isValid;return n.a.createElement(N.c,{className:"form ui"},n.a.createElement(N.b,{label:"Password - fill out field only if you wish to change the password",placeholder:"Password",name:"password",type:"password",component:F}),n.a.createElement(N.b,{label:"Confirm password",placeholder:"Confirm password",name:"confirm_password",type:"password",component:F}),n.a.createElement(N.b,{label:"First name",placeholder:"First name",name:"first_name",component:M,required:!0}),n.a.createElement(N.b,{label:"Last name",placeholder:"Last name",name:"last_name",component:M}),n.a.createElement(N.b,{label:"Email",placeholder:"Email",name:"email",component:M}),n.a.createElement(x.a,null,n.a.createElement(x.a.Column,{floated:"left",width:5},n.a.createElement(L.a,{type:"button",onClick:a,color:"red"},"Cancel")),n.a.createElement(x.a.Column,{floated:"right",width:5},n.a.createElement(L.a,{type:"submit",floated:"right",color:"green",disabled:!t},"Update"))))}))};!function(e){e[e.DJ=1]="DJ",e[e.Staff=2]="Staff",e[e.Admin=3]="Admin"}(Oe||(Oe={}));var yt=function(e){return function(){var t=Object(g.a)(v.a.mark((function t(a){var r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"SET_LOADING"}),t.next=4,dt.updateUser(e);case 4:return t.next=6,dt.getAll();case 6:r=t.sent,a({type:"UPDATE_USER",data:r}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()},kt=function(e){var t=e.currentUser,a=Object(o.b)(),l=Object(r.useState)(!1),c=Object(J.a)(l,2),u=c[0],i=c[1],s=function(){i(!1)};return n.a.createElement(ne.a,{trigger:n.a.createElement("span",{role:"menuitem",tabIndex:-8,onClick:function(){i(!0)}},"Edit user info"),closeIcon:!0,open:u,onClose:s},n.a.createElement(D.a,{content:"Edit current user info"}),n.a.createElement(ne.a.Content,null,n.a.createElement(ht,{user:t,onCancel:s,onSubmit:function(e){try{var r=Object(p.a)({},e,{id:t.id,status:t.status,level:t.level}),n=Object(p.a)({},e,{token:t.token,username:t.username,id:t.id,level:t.level,status:t.status});a(yt(r)),a((l=n,function(){var e=Object(g.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"UPDATE_CURRENT_USER",data:l});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),a(j("".concat(r.first_name," ").concat(r.last_name," updated!"),"success")),console.log("updating user",r),s()}catch(c){console.error(c.response.data)}var l}})))},Ot=function(e){var t=e.reportDetails;return t?n.a.createElement("div",{style:{display:"inline",color:"white",float:"right",marginTop:"auto",marginRight:"0.6rem",marginBottom:"0.7rem"}},n.a.createElement(u.b,{to:"/reports/".concat(t.id)},t.program_name," ",n.a.createElement("br",null),Ue()(t.program_date).format("DD.MM.YYYY")," ",t.program_start_time.slice(0,-3)," -"," ",t.program_end_time.slice(0,-3))):null},Tt=function(e){var t=e.currentUser,a=e.reportDetails,r=Object(o.b)(),l=n.a.createElement("span",null,n.a.createElement(q.a,{color:"pink",name:"user",size:"large"})," ",t.first_name," ",t.last_name),c=[{key:"user",text:n.a.createElement(kt,{currentUser:t}),icon:"user",onClick:function(){return n.a.createElement(kt,{currentUser:t})}},{key:"sign-out",text:"Log out",icon:"sign out",onClick:function(){r(pt())}}];return n.a.createElement("div",{style:{marginBottom:"1.5rem"}},n.a.createElement(Et.a,{pointing:!0,stackable:!0,inverted:!0},n.a.createElement(Et.a.Item,{link:!0},n.a.createElement(u.b,{to:"/"},n.a.createElement(ft.a,{alt:"logo",src:_t.a,size:"mini"}))),n.a.createElement(Et.a.Item,{link:!0},n.a.createElement(u.b,{to:"/reports"},n.a.createElement("h4",null,"REPORTS"))),n.a.createElement(Et.a.Item,{link:!0},n.a.createElement(u.b,{to:"/top100"},n.a.createElement("h4",null,"TOP 100"))),n.a.createElement(Et.a.Item,{link:!0},n.a.createElement(u.b,{to:"/search"},n.a.createElement("h4",null,"SEARCH"))),n.a.createElement(Et.a.Item,{link:!0},n.a.createElement(u.b,{to:"/transfer"},n.a.createElement("h4",null,"TRANSFER FILES"))),n.a.createElement(Et.a.Item,{link:!0},n.a.createElement(u.b,{to:"/programs"},n.a.createElement("h4",null,"PROGRAMS"))),n.a.createElement(Et.a.Item,{link:!0},n.a.createElement(u.b,{to:"/users"},n.a.createElement("h4",null,"USERS"))),n.a.createElement(Et.a.Item,{position:"right"},n.a.createElement(vt.a,{trigger:l,options:c,pointing:"top left",icon:null})),n.a.createElement(Et.a.Item,null,n.a.createElement(Ot,{reportDetails:a}))))},At=function(e){var t=e.currentUser,a=e.reportDetails,r=Object(o.b)(),l=n.a.createElement("span",null,n.a.createElement(q.a,{color:"pink",name:"user",size:"large"})," ",t.first_name," ",t.last_name),c=[{key:"user",text:n.a.createElement(kt,{currentUser:t}),icon:"user",onClick:function(){return n.a.createElement(kt,{currentUser:t})}},{key:"sign-out",text:"Log out",icon:"sign out",onClick:function(){r(pt())}}];return n.a.createElement("div",{style:{marginBottom:"1.5rem"}},n.a.createElement(Et.a,{pointing:!0,stackable:!0,inverted:!0},n.a.createElement(Et.a.Item,{link:!0},n.a.createElement(u.b,{to:"/"},n.a.createElement(ft.a,{alt:"logo",src:_t.a,size:"mini"}))),n.a.createElement(Et.a.Item,{link:!0},n.a.createElement(u.b,{to:"/reports"},n.a.createElement("h4",null,"REPORTS"))),n.a.createElement(Et.a.Item,{link:!0},n.a.createElement(u.b,{to:"/top100"},n.a.createElement("h4",null,"TOP 100"))),n.a.createElement(Et.a.Item,{link:!0},n.a.createElement(u.b,{to:"/search"},n.a.createElement("h4",null,"SEARCH"))),n.a.createElement(Et.a.Item,{link:!0},n.a.createElement(u.b,{to:"/transfer"},n.a.createElement("h4",null,"TRANSFER FILES"))),n.a.createElement(Et.a.Item,{link:!0},n.a.createElement(u.b,{to:"/programs"},n.a.createElement("h4",null,"PROGRAMS"))),n.a.createElement(Et.a.Item,{position:"right"},n.a.createElement(vt.a,{trigger:l,options:c,pointing:"top left",icon:null})),n.a.createElement(Et.a.Item,null,n.a.createElement(Ot,{reportDetails:a}))))},Ct=function(e){var t=e.currentUser,a=e.reportDetails,r=Object(o.b)(),l=n.a.createElement("span",null,n.a.createElement(q.a,{color:"pink",name:"user",size:"large"})," ",t.first_name," ",t.last_name),c=[{key:"user",text:n.a.createElement(kt,{currentUser:t}),icon:"user",onClick:function(){return n.a.createElement(kt,{currentUser:t})}},{key:"sign-out",text:"Log out",icon:"sign out",onClick:function(){r(pt())}}];return n.a.createElement("div",{style:{marginBottom:"1.5rem"}},n.a.createElement(Et.a,{pointing:!0,stackable:!0,inverted:!0},n.a.createElement(Et.a.Item,{link:!0},n.a.createElement(u.b,{to:"/"},n.a.createElement(ft.a,{alt:"logo",src:_t.a,size:"mini"}))),n.a.createElement(Et.a.Item,{link:!0},n.a.createElement(u.b,{to:"/reports"},n.a.createElement("h4",null,"REPORTS"))),n.a.createElement(Et.a.Item,{link:!0},n.a.createElement(u.b,{to:"/top100"},n.a.createElement("h4",null,"TOP 100"))),n.a.createElement(Et.a.Item,{link:!0},n.a.createElement(u.b,{to:"/search"},n.a.createElement("h4",null,"SEARCH"))),n.a.createElement(Et.a.Item,{position:"right"},n.a.createElement(vt.a,{trigger:l,options:c,pointing:"top left",icon:null})),n.a.createElement(Et.a.Item,null,n.a.createElement(Ot,{reportDetails:a}))))},wt=function(){var e,t=Object(o.c)((function(e){return e.login})),a=Object(o.c)((function(e){return e.report}));switch(null===(e=t.currentUser)||void 0===e?void 0:e.level){case 1:return n.a.createElement(Ct,{reportDetails:a.reportDetails,currentUser:t.currentUser});case 2:return n.a.createElement(At,{reportDetails:a.reportDetails,currentUser:t.currentUser});case 3:return n.a.createElement(Tt,{reportDetails:a.reportDetails,currentUser:t.currentUser});default:return null}},St=a(699),Rt=function(e){var t=e.notification;return"success"===t.type?n.a.createElement("div",{className:"fixedTop"},n.a.createElement(St.a,{floating:!0,success:!0,header:t.message})):"fail"===t.type?n.a.createElement("div",{className:"fixedTop"},n.a.createElement(St.a,{floating:!0,negative:!0,header:t.message})):null},jt=function(){return function(){var e=Object(g.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"SET_LOADING"}),e.next=4,st.getAll();case 4:a=e.sent,t({type:"GET_ALL_PROGRAMS",data:a}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("error getting all programs programActions.getAllPrograms",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},xt=a(705),Dt=[{value:1,label:"Visible"},{value:0,label:"Invisible"}],Lt=[{value:1,label:"Visible"},{value:0,label:"Invisible"}],Nt=function(e){var t,a=e.onSubmit,r=e.onCancel,l=e.login,c=e.program;return n.a.createElement(N.d,{initialValues:{id:c.id,name:c.name,identifier:c.identifier,display:c.display||1,site:c.site||1,user_id:null===(t=l.currentUser)||void 0===t?void 0:t.id},onSubmit:a,validate:function(e){var t={};return e.name||(t.name="Field is required"),console.log(e.display),console.log(e.site),t}},(function(e){var t=e.isValid;return n.a.createElement(N.c,{className:"form ui"},n.a.createElement(N.b,{label:"Name",placeholder:"Name",name:"name",component:M}),n.a.createElement(N.b,{label:"Identifier",placeholder:"Identifier",name:"identifier",type:"password",component:M}),n.a.createElement(G,{label:"Display",name:"display",options:Dt}),n.a.createElement(G,{label:"Display on site",name:"site",options:Lt}),n.a.createElement(x.a,null,n.a.createElement(x.a.Column,{floated:"left",width:5},n.a.createElement(L.a,{type:"button",onClick:r,color:"red"},"Cancel")),n.a.createElement(x.a.Column,{floated:"right",width:5},n.a.createElement(L.a,{type:"submit",floated:"right",color:"green",disabled:!t},"Save changes"))))}))},It=function(e){var t=e.modalOpen,a=e.onClose,r=e.onSubmit,l=e.error,c=e.program,o=e.login;return n.a.createElement(ne.a,{open:t,onClose:a,centered:!1,closeIcon:!0},n.a.createElement(ne.a.Header,null,"Edit info of program ",c.name),n.a.createElement(ne.a.Content,null,l&&n.a.createElement(xt.a,{inverted:!0,color:"red"},"Error: ".concat(l)),n.a.createElement(Nt,{program:c,login:o,onSubmit:r,onCancel:a})))},Gt=function(e){var t=e.onSubmit,a=e.onCancel,r=e.selectOptions;return n.a.createElement(N.d,{initialValues:{programToMerge:r[0].value},onSubmit:t},(function(e){var t=e.dirty;return n.a.createElement(N.c,{className:"form ui"},n.a.createElement("span",{style:{color:"red"}},n.a.createElement(G,{label:"",name:"programToMerge",options:r})),n.a.createElement(x.a,null,n.a.createElement(x.a.Column,{style:{marginTop:"1rem"},floated:"left",width:5},n.a.createElement(L.a,{type:"button",onClick:a,color:"red"},"Cancel")),n.a.createElement(x.a.Column,{floated:"right",width:5},n.a.createElement(L.a,{type:"submit",floated:"right",color:"green",disabled:!t},"Merge"))))}))},Mt=function(e){var t=e.program_id,a=e.program_name,l=Object(o.b)(),c=Object(o.c)((function(e){return e.program})),u=Object(r.useState)(!1),i=Object(J.a)(u,2),s=i[0],m=i[1],d=function(){m(!0)},p=function(){m(!1)};if(!s)return n.a.createElement("button",{type:"button",className:"link-btn",onClick:d},t);var b=c.allPrograms.map((function(e){return{key:e.id,label:"".concat(e.id," - ").concat(e.name),value:e.id}}));return n.a.createElement(ne.a,{open:s,closeIcon:!0,onClose:p,trigger:n.a.createElement("button",{type:"button",className:"link-btn",onClick:d},t)},n.a.createElement(D.a,null,"Merge ",t," - ",a," with:"),n.a.createElement(ne.a.Content,null,n.a.createElement(Gt,{onSubmit:function(e){console.log(Number(e.programToMerge));var a={type:"program",merge:Number(e.programToMerge),mergeTo:t};console.log(a),l(function(e){return function(){var t=Object(g.a)(v.a.mark((function t(a){var r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"SET_LOADING"}),t.next=4,st.mergePrograms(e);case 4:return t.next=6,st.getAll();case 6:r=t.sent,a({type:"GET_ALL_PROGRAMS",data:r}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log("error merging two programs programActions.mergePrograms",t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}(a)),l(j("Ohjelma #".concat(a.merge," yhdistetty!"),"success")),p()},onCancel:p,selectOptions:b})))},Pt=function(e){var t,a=e.program,l=Object(o.c)((function(e){return e.login})),c=Object(o.b)(),u=Object(r.useState)(!1),i=Object(J.a)(u,2),s=i[0],m=i[1],d=Object(r.useState)(),p=Object(J.a)(d,2),b=p[0],E=p[1];1===a.display&&(t="active-program");var f=function(){m(!1),E(void 0)};return n.a.createElement(H.a.Row,{className:t},n.a.createElement(H.a.Cell,null,n.a.createElement(Mt,{program_id:a.id,program_name:a.name})),n.a.createElement(H.a.Cell,null,n.a.createElement(It,{program:a,login:l,modalOpen:s,onSubmit:function(e){try{c((t=e,function(){var e=Object(g.a)(v.a.mark((function e(a){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:"SET_LOADING"}),e.next=4,st.updateProgram(t);case 4:a({type:"UPDATE_PROGRAM",data:t}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("error updating program",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}())),c(j("".concat(e.name," updated!"),"success")),f()}catch(a){E(a.response.data.error)}var t},error:b,onClose:f}),n.a.createElement("button",{style:{border:"none",cursor:"pointer",color:"teal"},onClick:function(){return m(!0)}},a.name)),n.a.createElement(H.a.Cell,null,a.identifier))},Ut=function(e){var t,a,r=e.login,l=e.program;return null===l.allPrograms||!0===l.loading?n.a.createElement(d.a,null,n.a.createElement(b.a,{active:!0,inverted:!0},n.a.createElement(E.a,{size:"medium"},"Loading programs..."))):2===(null===(t=r.currentUser)||void 0===t?void 0:t.level)||3===(null===(a=r.currentUser)||void 0===a?void 0:a.level)?n.a.createElement(d.a,null,n.a.createElement("div",{style:{marginTop:"1rem",marginBottom:"1rem"}},n.a.createElement("h3",{style:{display:"inline"}},"Programs")),n.a.createElement(H.a,null,n.a.createElement(H.a.Header,null,n.a.createElement(H.a.Row,null,n.a.createElement(H.a.Cell,null,"ID"),n.a.createElement(H.a.Cell,null,"Program name"),n.a.createElement(H.a.Cell,null,"Additional info"))),n.a.createElement(H.a.Body,null,l.allPrograms.map((function(e){return n.a.createElement(Pt,{program:e,key:e.id})}))))):null},Ft=[{value:1,label:"Visible"},{value:0,label:"Invisible"}],Bt=[{value:1,label:"Visible"},{value:0,label:"Invisible"}],Yt=function(e){var t,a=e.onSubmit,r=e.onCancel,l=e.login;return n.a.createElement(N.d,{initialValues:{name:"",identifier:"",display:1,site:1,user_id:null===(t=l.currentUser)||void 0===t?void 0:t.id},onSubmit:a,validate:function(e){var t={};return e.name||(t.name="Field is required"),console.log(e.display),console.log(e.site),t}},(function(e){var t=e.isValid,a=e.dirty;return n.a.createElement(N.c,{className:"form ui"},n.a.createElement(N.b,{label:"Name",placeholder:"Name",name:"name",component:P}),n.a.createElement(N.b,{label:"Identifier",placeholder:"Identifier",name:"identifier",type:"password",component:M}),n.a.createElement(G,{label:"Display",name:"display",options:Ft}),n.a.createElement(G,{label:"Display on site",name:"site",options:Bt}),n.a.createElement(x.a,null,n.a.createElement(x.a.Column,{floated:"left",width:5},n.a.createElement(L.a,{type:"button",onClick:r,color:"red"},"Cancel")),n.a.createElement(x.a.Column,{floated:"right",width:5},n.a.createElement(L.a,{type:"submit",floated:"right",color:"green",disabled:!a||!t},"Add"))))}))},Vt=function(e){var t=e.modalOpen,a=e.onClose,r=e.onSubmit,l=e.error,c=e.login;return n.a.createElement(ne.a,{open:t,onClose:a,centered:!1,closeIcon:!0},n.a.createElement(ne.a.Header,null,"Add a new program"),n.a.createElement(ne.a.Content,null,l&&n.a.createElement(xt.a,{inverted:!0,color:"red"},"Error: ".concat(l)),n.a.createElement(Yt,{onSubmit:r,onCancel:a,login:c})))},zt=function(){var e=Object(o.c)((function(e){return e.program})),t=Object(o.c)((function(e){return e.login})),a=Object(o.b)();Object(r.useEffect)((function(){a(jt())}),[]);var l=n.a.useState(!1),c=Object(J.a)(l,2),u=c[0],i=c[1],s=n.a.useState(),m=Object(J.a)(s,2),b=m[0],E=m[1],f=function(){i(!1),E(void 0)};return n.a.createElement(d.a,null,n.a.createElement(L.a,{floated:"right",color:"green",style:{marginBottom:"0.5rem"},onClick:function(){return i(!0)}},n.a.createElement(q.a,{name:"add"}),"Create a new program"),n.a.createElement(Vt,{modalOpen:u,onSubmit:function(e){try{var t=Object(p.a)({},e,{display:Number(e.display),site:Number(e.site)});console.log(t),a(function(e){return function(){var t=Object(g.a)(v.a.mark((function t(a){var r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"SET_LOADING"}),t.next=4,st.createProgram(e);case 4:r=t.sent,a({type:"CREATE_NEW_PROGRAM",data:r}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("error creating new program",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}(t)),console.log("adding program",t),f()}catch(r){console.error(r.response.data),E(r.response.data.error)}},error:b,onClose:f,login:t}),n.a.createElement(Ut,{program:e,login:t}))},Ht=a(707),Kt=function(e){var t=e.onSubmit;return n.a.createElement(N.d,{initialValues:{reportYear:"",reportMonth:""},onSubmit:t},(function(){return n.a.createElement(N.c,{className:"form ui"},n.a.createElement(x.a,null,n.a.createElement(x.a.Column,{width:4},n.a.createElement(G,{label:"Select month",name:"reportMonth",options:ge})),n.a.createElement(x.a.Column,{width:4},n.a.createElement(G,{label:"Select year",name:"reportYear",options:Ae})),n.a.createElement(x.a.Column,{width:4},n.a.createElement(L.a,{type:"submit",color:"green",style:{marginTop:"1.6rem"}},"Get reports"))))}))},qt=function(e){var t,a,l=e.loginLevel,c=e.report,i=Object(o.b)(),s=Object(r.useState)(!1),m=Object(J.a)(s,2),d=m[0],p=m[1];if(1===c.status)t="Ready";else if(0===c.status)t="In progress";else if(9===c.status)return t="Deleted",null;return 1===c.rerun&&(a="rerun"),1===l&&1===c.rerun?null:n.a.createElement(n.a.Fragment,null,n.a.createElement(H.a.Row,{className:a},n.a.createElement(Ht.a,{as:H.a.Cell,minWidth:768},c.program_no),n.a.createElement(H.a.Cell,null,n.a.createElement(u.b,{className:a,to:"reports/".concat(c.id)},c.name)),n.a.createElement(H.a.Cell,null,Ue()(c.program_date).format("DD.MM.YYYY")),n.a.createElement(H.a.Cell,null,c.program_start_time.slice(0,-3)," -"," ",c.program_end_time.slice(0,-3)),n.a.createElement(H.a.Cell,null,t),n.a.createElement(H.a.Cell,null,n.a.createElement(q.a,{style:{color:"red"},name:"delete",onClick:function(){return p(!0)}}),n.a.createElement(ze.a,{content:"Haluatko varmasti poistaa raportin ".concat(c.name," ").concat(c.program_date),open:d,onCancel:function(){p(!1)},onConfirm:function(){var e;p(!1),i((e=c.id,function(){var t=Object(g.a)(v.a.mark((function t(a){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"SET_LOADING"}),t.next=4,tt.deleteReport(e);case 4:a({type:"DELETE_REPORT",data:e}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}())),i(j("".concat(c.name," ").concat(c.program_date," poistettu!"),"success"))}}))))},Jt=a(35),Wt=function(e){var t=e.user,a=(e.login,Object(o.b)()),l=Object(r.useState)(null),c=Object(J.a)(l,2),u=c[0],i=(c[1],Object(r.useState)(null)),s=Object(J.a)(i,2),m=s[0],d=(s[1],Object(r.useState)("")),p=Object(J.a)(d,2),b=p[0],E=p[1];Object(r.useEffect)((function(){var e,t;a((e=u,function(t){t({type:"FILTER_BY_USER_ID",data:e})})),a(function(e){return function(t){t({type:"FILTER_BY_STATUS",data:e})}}(m)),a((t=b,function(){var e=Object(g.a)(v.a.mark((function e(a){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a({type:"FILTER_BY_TEXT",data:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}),[u,m,b]);var f=t.users.map((function(e){return{key:e.id,label:"".concat(e.first_name," ").concat(e.last_name),value:e.id}}));[{key:0,label:"All users",value:0}].concat(Object(Jt.a)(f));return n.a.createElement(x.a,null,n.a.createElement(x.a.Column,{width:4},n.a.createElement(N.d,{initialValues:{filterText:""},onSubmit:function(e){console.log(e.filterText),E(e.filterText)},validate:function(e){E(e.filterText)}},(function(){return n.a.createElement(N.c,{className:"form ui"},n.a.createElement(N.b,{label:"Filter text",placeholder:"Program name...",name:"filterText",component:M}))}))))},Zt=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.login})),a=Object(o.c)((function(e){return e.user})),l=Object(o.c)((function(e){return e.reportList}));Object(r.useEffect)((function(){var a;1===(null===(a=t.currentUser)||void 0===a?void 0:a.level)?null===l.reportListDate?e(rt(Ue()().format("YYYY-MM"),t.currentUser.id)):e(rt(l.reportListDate,t.currentUser.id)):null===l.reportListDate?e(at(Ue()().format("YYYY-MM"))):e(at(l.reportListDate))}),[]);var c,u=function(a){var r;console.log(a);var n="".concat(a.reportYear,"-").concat(a.reportMonth);1===(null===(r=t.currentUser)||void 0===r?void 0:r.level)?e(rt(n,t.currentUser.id)):e(at(n))};if(null===l.reportList||l.loading)return n.a.createElement(b.a,{active:!0},n.a.createElement(E.a,{content:"Loading..."}));if(0===l.reportList.length)return n.a.createElement(d.a,null,n.a.createElement(Kt,{onSubmit:u}),n.a.createElement(D.a,null,"No reports in the selected time period."));c=null===l.reportListDate?Ue()().format("MMMM YYYY"):Ue()(l.reportListDate).format("MMMM YYYY");var i=l.reportList;return i=0===Number(l.filterByText)?i:i=i.filter((function(e){return e.name.toLowerCase().includes(l.filterByText.toLowerCase())})),i=null===l.filterUserValue?i:i=i.filter((function(e){return e.user_id===l.filterUserValue})),i=null===l.filterStatusValue?i:i=i.filter((function(e){return e.status===l.filterStatusValue})),n.a.createElement(d.a,null,n.a.createElement(D.a,null,"Get reports by month"),n.a.createElement(Kt,{onSubmit:u}),n.a.createElement("h4",null,"Reports from ",c),n.a.createElement(Wt,{user:a,login:t}),n.a.createElement(H.a,{striped:!0},n.a.createElement(H.a.Header,null,n.a.createElement(H.a.Row,null,n.a.createElement(Ht.a,{as:H.a.Cell,minWidth:768},"Program number"),n.a.createElement(H.a.Cell,null,"Program name"),n.a.createElement(H.a.Cell,null,"Date"),n.a.createElement(H.a.Cell,null,"Time"),n.a.createElement(H.a.Cell,null,"Status"),n.a.createElement(H.a.Cell,null))),n.a.createElement(H.a.Body,null,i.map((function(e){var a;return n.a.createElement(qt,{key:e.id,report:e,loginLevel:null===(a=t.currentUser)||void 0===a?void 0:a.level})})))))},Qt=a(378),Xt=a(688),$t=function(e){var t,a=e.onSubmit,r=e.onCancel,l=e.track;e.error;console.log("track at form",l);var c="";return l.people&&(c=l.people.replace(/\| /,"").replace(/\| /g,"\n").replace(/ \|/,"")),n.a.createElement(N.d,{initialValues:{track_title:l.track_title,artist:l.artist_name,album:l.album_name,track_id:l.track_id,album_id:l.album_id,artist_id:l.artist_id,label:l.label,cat_id:l.cat_id,length:l.length,minutes:Math.floor(l.length/60),seconds:l.length%60,disc_no:l.disc_no||1,track_no:l.track_no||1,people:c||"",isrc:l.isrc||"",year:Number(null===(t=l.year)||void 0===t?void 0:t.substring(0,4))||"",record_country:l.record_country||"",country:l.country||0,sortable_rank:l.sortable_rank,report_track_id:l.report_track_id},onSubmit:a,validate:function(e){var t={};return e.track_title&&""!==e.track_title||(t.track_title="Field is required"),e.album&&""!==e.album||(t.album_name="Field is required"),e.artist&&""!==e.artist||(t.artist_name="Field is required"),t}},(function(e){var t=e.isValid,a=e.dirty;return n.a.createElement(N.c,{className:"form ui"},n.a.createElement(N.b,{label:"Artist",placeholder:"Artist",name:"artist",component:P}),n.a.createElement(N.b,{label:"Album",placeholder:"Album",name:"album",component:P}),n.a.createElement(N.b,{label:"Track title",placeholder:"Track title...",name:"track_title",component:P}),n.a.createElement(x.a,null,n.a.createElement(x.a.Column,{width:8},n.a.createElement(N.b,{label:"Length - minutes",name:"minutes",component:Y,min:0,max:999})),n.a.createElement(x.a.Column,{width:8},n.a.createElement(N.b,{label:"Length - seconds",name:"seconds",component:Y,min:0,max:59}))),n.a.createElement(x.a,null,n.a.createElement(x.a.Column,{width:8},n.a.createElement(N.b,{label:"Track #",name:"track_no",component:Y,min:0,max:999})),n.a.createElement(x.a.Column,{width:8},n.a.createElement(N.b,{label:"Disc #",name:"disc_no",component:Y,min:0,max:99})),n.a.createElement(x.a.Column,{width:8},n.a.createElement(G,{label:"Country",name:"country",options:Ee})),n.a.createElement(x.a.Column,{width:8},n.a.createElement(G,{label:"Recorded in",name:"record_country",options:be}))),n.a.createElement(N.b,{label:"Composers - one per line",placeholder:"LAST NAME FIRST NAME",name:"people",component:V}),n.a.createElement(N.b,{label:"Year",name:"year",component:Y,min:1900,max:2900}),n.a.createElement(L.a,{type:"submit",floated:"left",color:"green",disabled:!t||!a},"Update track info"),n.a.createElement(L.a,{floated:"right",style:{marginBottom:"1rem"},type:"button",onClick:r,color:"red"},"Cancel"))}))},ea=function(e){var t=e.track;console.log(t);var a=Object(o.b)(),l=Object(r.useState)(!1),c=Object(J.a)(l,2),u=c[0],i=c[1],s=Object(r.useState)(),m=Object(J.a)(s,2),d=m[0],p=m[1],b=function(){i(!1),p(void 0)};return n.a.createElement(n.a.Fragment,null,n.a.createElement(q.a,{style:{cursor:"pointer"},color:"blue",onClick:function(){return i(!0)},name:"edit"}),n.a.createElement(ne.a,{open:u,onClose:b,centered:!1,closeIcon:!0},n.a.createElement(ne.a.Header,null,"Edit track info"),n.a.createElement(ne.a.Content,null,d&&n.a.createElement(xt.a,{inverted:!0,color:"red"},"Error: ".concat(d)),n.a.createElement($t,{onSubmit:function(e){var t,r,n=60*Number(e.minutes)+Number(e.seconds);r=e.people?"| ".concat(e.people.replace(/\n/g," | ")," |"):null,console.log(e);var l={artist_name:e.artist,album_name:e.album,track_title:e.track_title,track_id:Number(e.track_id),length:n,country:Number(e.country),record_country:e.record_country,people:r,disc_no:Number(e.disc_no),track_no:Number(e.track_no),year:null===(t=e.year)||void 0===t?void 0:t.toString(),label:e.label,cat_id:e.cat_id,isrc:e.isrc,comment:null,user_id:null,artist_id:Number(e.artist_id),album_id:Number(e.album_id),sortable_rank:Number(e.sortable_rank),report_track_id:Number(e.report_track_id)};a(pe(l)),a(j("".concat(l.track_title," by ").concat(l.artist_name," has been updated!"),"success")),i(!1)},onCancel:b,track:t}))))},ta=function(e){var t,a,l=e.track,c=e.report,u=Object(r.useState)(!1),i=Object(J.a)(u,2),s=i[0],m=i[1],d=Object(o.b)();t=(t=Math.floor(l.length/60)).toString(),1===(a=l.length-60*t).toString().length&&(a="0".concat(a.toString())),a=a.toString();return n.a.createElement(H.a.Row,null,n.a.createElement(H.a.Cell,null,n.a.createElement(Xt.a,{onChange:function(){var e;m(!s),d(!0===s?(e=l.report_track_id,function(){var t=Object(g.a)(v.a.mark((function t(a){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{a({type:"UNCHECK_FOR_DELETE",data:e})}catch(r){console.log("reportActions unCheckForDelete error",r)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()):function(e){return function(){var t=Object(g.a)(v.a.mark((function t(a){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{a({type:"CHECK_FOR_DELETE",data:e})}catch(r){console.log("reportActions checkFordelete error",r)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(l.report_track_id))},checked:s}),n.a.createElement(q.a,{style:{marginLeft:"1.5rem",cursor:"pointer"},name:"arrows alternate"})),n.a.createElement(H.a.Cell,null,l.sortable_rank),n.a.createElement(H.a.Cell,null,l.artist_name),n.a.createElement(H.a.Cell,null,l.track_title),n.a.createElement(H.a.Cell,null,t,":",a),n.a.createElement(H.a.Cell,null,n.a.createElement(q.a,{style:{cursor:"pointer"},color:"red",onClick:function(){var e,t=c.report.filter((function(e){return e.report_track_id!==l.report_track_id})),a={report_track_id:l.report_track_id,report_id:(null===(e=c.reportDetails)||void 0===e?void 0:e.id)||0,remainingTracks:t};d(function(e){return function(){var t=Object(g.a)(v.a.mark((function t(a){var r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"SET_LOADING"}),t.next=4,Q.deleteTrackFromReport(e.report_track_id);case 4:return t.next=6,Q.getOne(e.report_id);case 6:r=t.sent,a({type:"GET_ONE_REPORT",data:r}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log("reportActions deleteTrackFromReport error: ",t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}(a))},name:"delete"})),n.a.createElement(H.a.Cell,null,n.a.createElement(ea,{track:l})))},aa=function(e){var t=e.report;return n.a.createElement(H.a,{striped:!0},n.a.createElement(H.a.Header,null,n.a.createElement(H.a.Row,null,n.a.createElement(H.a.Cell,null),n.a.createElement(H.a.Cell,null,"#"),n.a.createElement(H.a.Cell,null,"Artist"),n.a.createElement(H.a.Cell,null,"Track Title"),n.a.createElement(H.a.Cell,null,"Length"),n.a.createElement(H.a.Cell,null),n.a.createElement(H.a.Cell,null))),n.a.createElement(H.a.Body,null,t.report.map((function(e){return n.a.createElement(ta,{key:e.report_track_id,track:e,report:t})}))),n.a.createElement(H.a.Footer,null,n.a.createElement(H.a.Row,null)))},ra=a(700),na=function(e){var t=e.onSubmit,a=e.onCancel;e.error;return n.a.createElement(N.d,{initialValues:{track_title:"",artist_name:"",album_name:"",label:"",cat_id:"",year:"",disc_no:1,track_no:1,minutes:0,seconds:0,country:0,record_country:"",people:"",comment:"",isrc:""},onSubmit:t,validate:function(e){var t={};return e.track_title&&""!==e.track_title||(t.track_title="Field is required"),e.album_name&&""!==e.album_name||(t.album_name="Field is required"),e.artist_name&&""!==e.artist_name||(t.artist_name="Field is required"),t}},(function(e){var t=e.isValid,r=e.dirty;return n.a.createElement(N.c,{className:"form ui"},n.a.createElement(N.b,{label:"Artist",placeholder:"Artist",name:"artist_name",component:P}),n.a.createElement(N.b,{label:"Album",placeholder:"Album",name:"album_name",component:P}),n.a.createElement(N.b,{label:"Track title",placeholder:"Track title...",name:"track_title",component:P}),n.a.createElement(x.a,null,n.a.createElement(x.a.Column,{width:8},n.a.createElement(N.b,{label:"Length - minutes",name:"minutes",component:Y,min:0,max:999})),n.a.createElement(x.a.Column,{width:8},n.a.createElement(N.b,{label:"Length - seconds",name:"seconds",component:Y,min:0,max:59}))),n.a.createElement(x.a,null,n.a.createElement(x.a.Column,{width:8},n.a.createElement(N.b,{label:"Track #",name:"track_no",component:Y,min:0,max:999})),n.a.createElement(x.a.Column,{width:8},n.a.createElement(N.b,{label:"Disc #",name:"disc_no",component:Y,min:0,max:99})),n.a.createElement(x.a.Column,{width:8},n.a.createElement(G,{label:"Country",name:"country",options:Ee})),n.a.createElement(x.a.Column,{width:8},n.a.createElement(G,{label:"Recorded in",name:"record_country",options:be}))),n.a.createElement(N.b,{label:"Composers - one per line",placeholder:"LAST NAME FIRST NAME",name:"people",component:V}),n.a.createElement(N.b,{label:"Year",name:"year",component:Y,min:1900,max:2900}),n.a.createElement(N.b,{label:"Spotify id",placeholder:"Spotify id",name:"spotify_id",component:M}),n.a.createElement(N.b,{label:"Comment",placeholder:"Any additional information",name:"comment",component:M}),n.a.createElement(L.a,{type:"submit",floated:"left",color:"green",disabled:!t||!r},"Add"),n.a.createElement(L.a,{floated:"right",style:{marginBottom:"1rem"},type:"button",onClick:a,color:"red"},"Cancel"))}))},la=function(e){var t=e.report_id,a=e.sortable_rank,l=Object(o.b)(),c=Object(r.useState)(!1),u=Object(J.a)(c,2),i=u[0],s=u[1],m=Object(r.useState)(),d=Object(J.a)(m,2),b=d[0],E=d[1],f=function(){s(!1),E(void 0)};return n.a.createElement(n.a.Fragment,null,n.a.createElement(L.a,{color:"blue",style:{marginBottom:"0.5rem"},onClick:function(){return s(!0)}},"Add new track"),n.a.createElement(ne.a,{open:i,onClose:f,centered:!1,closeIcon:!0},n.a.createElement(ne.a.Header,null,"Add a new track"),n.a.createElement(ne.a.Content,null,b&&n.a.createElement(xt.a,{inverted:!0,color:"red"},"Error: ".concat(b)),n.a.createElement(na,{onSubmit:function(e){var r,n=60*Number(e.minutes)+Number(e.seconds),c=Object(p.a)({},e,{length:n,report_id:t,sortable_rank:a});l((r=c,function(){var e=Object(g.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"SET_LOADING"}),e.next=4,de.addNewTrack(r);case 4:a=e.sent,t({type:"ADD_NEW_TRACK",data:a}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("trackActions addNewTrack error:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}())),l(j("".concat(c.track_title," by ").concat(c.artist_name," has been added to database!"),"success")),s(!1)},onCancel:f}))))},ca=a(379),oa=a(373),ua=a(374),ia=function(){var e,t,a=Object(r.useState)(null),l=Object(J.a)(a,2),c=l[0],u=l[1],s=Object(r.useState)(!1),m=Object(J.a)(s,2),d=m[0],p=m[1],b=function(){var e=Object(r.useState)(""),t=Object(J.a)(e,2),a=t[0],n=t[1],l=Object(oa.a)((function(){return Object(ca.a)(R.getTracksForAutocompleteSearch,400)})),c=Object(ua.useAsync)(Object(g.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==a.length){e.next=4;break}return e.abrupt("return",[]);case 4:return e.abrupt("return",l(a));case 5:case"end":return e.stop()}}),e)}))),[a]);return{inputText:a,setInputText:n,search:c}}(),E=b.setInputText,f=b.search,_=Object(o.c)((function(e){return e.report})),h=Object(o.b)(),y=function(e,t){var a,r=t.result,n={track_id:r.value,report_id:null===(a=_.reportDetails)||void 0===a?void 0:a.id,length:r.length,sortable_rank:_.report.length+1};u(n)};t=void 0===f.result?[]:f.result.map((function(e){return{key:e.track_id,title:e.track_title,description:"".concat(e.artist,":\n                    ").concat(e.album),length:e.length,value:e.track_id}}));return d?n.a.createElement(i.a,{to:"/search"}):n.a.createElement("div",{style:{marginLeft:"1rem",marginBottom:"1rem"}},n.a.createElement(I.a,null,n.a.createElement(D.a,null,"Search"),n.a.createElement(I.a.Group,null,n.a.createElement(I.a.Field,{width:8},n.a.createElement(ra.a,{loading:f.loading,onResultSelect:y,onSearchChange:function(e){return E(e.target.value)},onSelectionChange:y,results:t,style:{cursor:"pointer"}})),n.a.createElement(I.a.Field,{width:8},n.a.createElement(L.a,{color:"green",onClick:function(){c?(h($(c)),u(null)):h(j("Please select a track to add!","fail"))}},"Add to report"))),n.a.createElement(I.a.Group,null,n.a.createElement(I.a.Field,{width:8}," ",n.a.createElement(L.a,{onClick:function(){p(!0)},color:"blue"},"Advanced search")),n.a.createElement(I.a.Field,{width:6}," ",n.a.createElement(la,{report_id:null===(e=_.reportDetails)||void 0===e?void 0:e.id,sortable_rank:_.report.length+1})))))},sa=function(e){var t=e.reportDetails,a=e.onSubmit,r=e.sortable_rank_start,l=[{key:"928",label:"Studio 1",value:"928"},{key:"1047",label:"Studio 2",value:"1047"}];return n.a.createElement(N.d,{initialValues:{studioId:"928",date:Ue()(null===t||void 0===t?void 0:t.program_date).format("YYYY-MM-DD"),startTime:(null===t||void 0===t?void 0:t.program_start_time.slice(0,2))||"",endTime:(null===t||void 0===t?void 0:t.program_end_time.slice(0,2))||"",report_id:(null===t||void 0===t?void 0:t.id)||0,sortable_rank_start:r},onSubmit:a},(function(){return n.a.createElement(N.c,{className:"form ui"},n.a.createElement(x.a,null,n.a.createElement(x.a.Column,{width:8},n.a.createElement("label",null,"Select date"),n.a.createElement(Fe.b,{name:"date",dateFormat:"dd.MM.yyyy",placeholder:"dd.mm.yyyy"})," "),n.a.createElement(x.a.Column,{width:8},n.a.createElement(G,{label:"Studio",name:"studioId",options:l})),n.a.createElement(x.a.Column,{width:8},n.a.createElement(G,{label:"Starting",name:"startTime",options:fe})),n.a.createElement(x.a.Column,{width:8},n.a.createElement(G,{label:"Ending",name:"endTime",options:ve}))),n.a.createElement(L.a,{style:{marginTop:"1rem"},type:"submit",color:"green"},"Get Tracks"))}))},ma=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.report}));return n.a.createElement(n.a.Fragment,null,n.a.createElement(D.a,null,"Get tracks from playlog"),n.a.createElement("div",{style:{color:"red",marginBottom:"2rem"}},"In the demo app playlog data is only available on dates between 2020-03-01 - 2020-03-31.",n.a.createElement("br",null),"The demo app database is free tier so please allow the tracks a few seconds to process :)"),n.a.createElement(sa,{onSubmit:function(a){var r,n={studioId:a.studioId,date:Ue()(a.date).format("YYYY-MM-DD"),startTime:a.startTime,endTime:a.endTime,report_id:(null===(r=t.reportDetails)||void 0===r?void 0:r.id)||0,sortable_rank_start:t.report.length};console.log("get playlog params",n),e(function(e){return function(){var t=Object(g.a)(v.a.mark((function t(a){var r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"SET_LOADING"}),t.next=4,Q.checkPlaylogTracks(e);case 4:r=t.sent,console.log("returnArray at report action",r),a({type:"GET_PLAYLOG_TRACKS",data:r}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}(n))},reportDetails:t.reportDetails,sortable_rank_start:t.report.length}))},da=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(D.a,null,"Add a track to the report:"),n.a.createElement(xt.a.Group,{horizontal:!0},n.a.createElement(xt.a,null,n.a.createElement(ia,null)),n.a.createElement(xt.a,null,n.a.createElement(ma,null))))},pa=function(e){var t,a=e.onSubmit,r=e.duplicateReportClick,l=e.onRerunChange,c=e.programOptions,o=e.userOptions,u=e.reportDetails,i=e.rerun,s=e.currentUser;return t=1===(null===s||void 0===s?void 0:s.level)?null:n.a.createElement(G,{label:"User",name:"user_id",options:o}),n.a.createElement(x.a,{divided:"vertically"},n.a.createElement(x.a.Row,{columns:2},n.a.createElement(x.a.Column,null,n.a.createElement(D.a,null,"Report details:"),n.a.createElement(N.d,{initialValues:{id:u.id,program_name:u.program_name,program_no:u.program_no,program_dj:u.program_dj,program_date:Ue()(u.program_date).format("YYYY-MM-DD"),program_start_time:u.program_start_time,program_end_time:u.program_end_time,program_id:u.program_id,rerun:u.rerun,status:u.status,user_id:u.user_id,username:u.username,first_name:u.first_name,last_name:u.last_name},onSubmit:a,validate:function(e){console.log(e);var t={};return e.program_dj||(t.name="Field is required"),void 0===e.program_start_time&&(t.name="Field is required"),void 0===e.program_end_time&&(t.name="Field is required"),parseInt(e.program_end_time)<=parseInt(e.program_start_time)&&"23:59"!==e.program_end_time&&(t.program_end_time="Check start and end times!"),t}},(function(e){var a=e.isValid,o=e.values;return n.a.createElement(n.a.Fragment,null,n.a.createElement(Fe.c,{className:"form ui"},n.a.createElement(G,{label:"Program",name:"program_id",options:c}),n.a.createElement(N.b,{label:"Program number",name:"program_no",component:Y,min:0,max:999}),n.a.createElement(N.b,{label:"DJ",placeholder:"DJ",name:"program_dj",component:M}),n.a.createElement(x.a,{style:{marginBottom:"0.5rem"}},n.a.createElement(x.a.Column,{width:5,style:{marginTop:"0.3rem"}},n.a.createElement("label",{style:{fontWeight:"bold"}},"Program date"),n.a.createElement(Fe.b,{name:"program_date",dateFormat:"dd.MM.yyyy",placeholder:"dd.mm.yyyy"})," "),n.a.createElement(x.a.Column,{width:5},n.a.createElement(G,{label:"Start time",name:"program_start_time",options:fe})),n.a.createElement(x.a.Column,{width:5},n.a.createElement(G,{label:"End time",name:"program_end_time",options:ve}))),n.a.createElement(G,{label:"Report status",name:"status",options:_e}),t,n.a.createElement("label",{style:{fontWeight:"bold"}},"Rerun"),n.a.createElement(Fe.a,{name:"rerun",label:"",onChange:l,checked:!!i,style:{marginTop:"0.2rem"}}),n.a.createElement(L.a,{style:{marginTop:"1rem"},type:"submit",floated:"left",color:"green",disabled:!a},"Save changes")),n.a.createElement(L.a,{style:{marginTop:"1rem"},onClick:function(){return r(o)}},"Duplicate report"))})))))},ba=function(){var e,t=Object(o.b)(),a=Object(o.c)((function(e){return e.report})),l=Object(o.c)((function(e){return e.user})),c=Object(o.c)((function(e){return e.program})),u=Object(o.c)((function(e){return e.login})),s=Object(r.useState)(null===(e=a.reportDetails)||void 0===e?void 0:e.rerun),m=Object(J.a)(s,2),d=m[0],b=m[1],E=Object(r.useState)(!1),f=Object(J.a)(E,2),_=f[0],h=f[1];if(null===a.reportDetails||null===l.users||null===c.allPrograms)return n.a.createElement(xt.a,null,n.a.createElement("div",null,"loading..."));var y=c.allPrograms.map((function(e){return{key:e.id,label:e.name,value:e.id}})),k=l.users.map((function(e){return{key:e.id,label:"".concat(e.first_name," ").concat(e.last_name),value:e.id}}));return _&&null!==a.newReport?n.a.createElement(i.a,{to:"../reports/".concat(a.newReport.id)}):n.a.createElement("div",null,n.a.createElement(pa,{reportDetails:a.reportDetails,onSubmit:function(e){var a,r=Object(p.a)({},e,{rerun:d});t((a=r,function(){var e=Object(g.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"SET_LOADING"}),e.next=4,Q.updateReport(a);case 4:t({type:"UPDATE_REPORT",data:a}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("reportActions updateReport error:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}())),t(j("Report details updated","success"))},programOptions:y,userOptions:k,onRerunChange:function(){b(d?null:1)},rerun:d,duplicateReportClick:function(e){var r,n,l={program_name:e.program_name,program_no:e.program_no,program_dj:e.program_dj,program_date:e.program_date,program_start_time:e.program_start_time,program_end_time:e.program_end_time,program_id:e.program_id,rerun:d,status:e.status,user_id:e.user_id,username:e.username,first_name:e.first_name,last_name:e.last_name};t((r=l,n=a.report,function(){var e=Object(g.a)(v.a.mark((function e(t){var a,l;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"SET_LOADING"}),e.next=3,Q.createReport(r);case 3:return a=e.sent,t({type:"CREATE_REPORT",data:a}),n.forEach(function(){var e=Object(g.a)(v.a.mark((function e(t){var r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(p.a)({},t,{report_id:a.id,report_track_id:null}),e.next=3,Q.addTrackToReport(r);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=8,Q.getOne(a.id);case 8:l=e.sent,t({type:"GET_ONE_REPORT",data:l});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),t(j("Report duplicated!","success")),h(!0),setTimeout((function(){h(!1)}),300)},currentUser:u.currentUser}))},Ea=function(e){var t,a,l=e.id,c=Object(o.b)(),u=Object(o.c)((function(e){return e.report})),i=Object(o.c)((function(e){return e.login})),s=Object(r.useState)(u.report),m=Object(J.a)(s,2),b=m[0],E=m[1];Object(r.useEffect)((function(){c(function(e){return function(){var t=Object(g.a)(v.a.mark((function t(a){var r,n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"SET_LOADING"}),t.next=4,Q.getReportDetails(e);case 4:r=t.sent,n=r[0],a({type:"GET_REPORT_DETAILS",data:n,id:e}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log("reportActions getReportDetails error",t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}(l)),c(X(l))}),[]),Object(r.useEffect)((function(){var e=setTimeout((function(){c(X(l))}),1e3);return function(){clearTimeout(e)}}),[u.playlog]),Object(r.useEffect)((function(){var e;c((e=b,function(){var t=Object(g.a)(v.a.mark((function t(a){var r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"SET_LOADING"}),t.next=4,Q.updateSortableRank(e);case 4:r=[],e.forEach((function(e,t){var a=Object(p.a)({},e,{sortable_rank:t+1});r.push(a)})),a({type:"GET_ONE_REPORT",data:r}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()))}),[b]);var f=n.a.createElement(L.a,{color:"red",onClick:function(){var e=u.report.filter((function(e){return!u.checkedForDelete.includes(e.report_track_id)}));c(function(e,t,a){return function(){var r=Object(g.a)(v.a.mark((function r(n){var l;return v.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,n({type:"SET_LOADING"}),console.log("function fired"),e.forEach(function(){var e=Object(g.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q.deleteTrackFromReport(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),r.next=6,Q.updateSortableRank(a);case 6:return r.next=8,Q.getOne(Number(t));case 8:l=r.sent,console.log(l),n({type:"GET_ONE_REPORT",data:a}),n({type:"CLEAR_CHECKED_FOR_DELETE"}),r.next=17;break;case 14:r.prev=14,r.t0=r.catch(0),console.log("reportActions deleteChecked error:",r.t0);case 17:case"end":return r.stop()}}),r,null,[[0,14]])})));return function(e){return r.apply(this,arguments)}}()}(u.checkedForDelete,l,e))},style:{marginLeft:"1rem",marginBottom:"1rem",marginTop:"1rem"}},"Delete Selected"),_=u.report,h={onDragEnd:function(e,t){var a=_.splice(e,1)[0];_.splice(t,0,a),E(_)},nodeSelector:"tr",handleSelector:"i.arrows"};return 1===(null===(t=i.currentUser)||void 0===t?void 0:t.level)&&i.currentUser.id!==(null===(a=u.reportDetails)||void 0===a?void 0:a.user_id)?null:0===u.report.length?n.a.createElement(d.a,null,n.a.createElement(D.a,null,"Report"),n.a.createElement("div",null,"No tracks added. Please add tracks from below"),n.a.createElement(da,null),n.a.createElement(ba,null)):n.a.createElement(d.a,null,n.a.createElement(D.a,null,"Report"),n.a.createElement(Qt.a,h,n.a.createElement(aa,{report:u})),f,n.a.createElement(da,null),n.a.createElement(ba,null))},fa=function(e){var t=e.item;console.log(t);return n.a.createElement(H.a.Row,null,n.a.createElement(H.a.Cell,null,t.created_at),n.a.createElement(H.a.Cell,null,t.first_name," ",t.last_name),n.a.createElement(H.a.Cell,null,Ue()(t.period).format("MM/YYYY")),n.a.createElement(H.a.Cell,null,n.a.createElement("button",{type:"button",className:"link-btn",onClick:function(){return e=t.filename,void et(e);var e}},t.filename)))},va=function(e){var t=e.reportTransferList,a=e.currentUser;return null===t?n.a.createElement(d.a,null,n.a.createElement(b.a,{active:!0,inverted:!0},n.a.createElement(E.a,{size:"medium"},"Loading..."))):3===a.level||2===a.level?n.a.createElement(H.a,null,n.a.createElement(H.a.Header,null,n.a.createElement(H.a.Row,null,n.a.createElement(H.a.Cell,null,"Date created"),n.a.createElement(H.a.Cell,null,"Created by"),n.a.createElement(H.a.Cell,null,"Transfer file period"),n.a.createElement(H.a.Cell,null,"Transfer file"))),n.a.createElement(H.a.Body,null,t.map((function(e){return n.a.createElement(fa,{key:e.id,item:e})})))):null},ga=function(e){var t=e.reportList,a=e.currentUser,l=Object(o.b)(),c=Object(r.useState)(Ue()(new Date).format("YYYY-MM")),u=Object(J.a)(c,2),i=u[0],s=u[1];Object(r.useEffect)((function(){l(at(Ue()(i).format("YYYY-MM")))}),[]);return null===t.reportList||!0===t.loading?n.a.createElement(d.a,null,n.a.createElement(b.a,{active:!0,inverted:!0},n.a.createElement(E.a,{size:"medium"},"Loading..."))):n.a.createElement(N.d,{initialValues:{pickerDate:""},onSubmit:function(){var e={user_id:a.id,status:1,period:Ue()(i).format("YYYY-MM"),filename:"".concat(Ue()(new Date).format("YYYYMMDDhhmmss"),".txt")};l(function(e){return function(){var t=Object(g.a)(v.a.mark((function t(a){var r,n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"SET_LOADING"}),t.next=4,tt.generateReportDownload(e);case 4:return r=t.sent,t.next=7,tt.getAllTransfers();case 7:n=t.sent,a({type:"GET_ALL_REPORT_TRANSFERS",data:n}),a({type:"GENERATE_REPORT_TRANSFER",data:r}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),console.log("reportListActions generateReportTransferError",t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}()}(e))},validate:function(e){s(Ue()(e.pickerDate).format("YYYY-MM"))}},(function(){return n.a.createElement(N.c,{className:"form ui"},n.a.createElement("label",{style:{fontWeight:"bold"}},"Select month to create transfer from"),n.a.createElement(Fe.b,{name:"pickerDate",dateFormat:"MMMM yyyy",placeholder:"Select month..."}),n.a.createElement(L.a,{style:{marginTop:"1rem"},type:"submit",color:"green"},"Submit"))}))},_a=function(){var e,t,a=Object(o.b)(),l=Object(o.c)((function(e){return e.reportList})),c=Object(o.c)((function(e){return e.login}));return Object(r.useEffect)((function(){a(function(){var e=Object(g.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"SET_LOADING"}),e.next=4,tt.getAllTransfers();case 4:a=e.sent,t({type:"GET_ALL_REPORT_TRANSFERS",data:a}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("reportListActions getAllTransfers error",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}())}),[l.lastTransfer]),3===(null===(e=c.currentUser)||void 0===e?void 0:e.level)||2===(null===(t=c.currentUser)||void 0===t?void 0:t.level)?n.a.createElement(d.a,null,n.a.createElement(D.a,null,"Transfer files"),n.a.createElement(ga,{reportList:l,currentUser:c.currentUser}),n.a.createElement(va,{reportTransferList:l.reportTransferList,currentUser:c.currentUser})):null},ha=function(){var e=Object(o.b)(),t=[{key:1,label:"Tracks",value:"tr"},{key:2,label:"Artists",value:"ar"},{key:3,label:"Albums",value:"al"}];return n.a.createElement(N.d,{initialValues:{query:"",kind:"ar"},onSubmit:function(t){var a;e((a=t,function(){var e=Object(g.a)(v.a.mark((function e(t){var r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"SET_SEARCH_LOADING"}),e.next=4,R.advancedSearch(a);case 4:r=e.sent,t({type:"ADVANCED_RESULTS",data:r}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("searchActions error getting advanced results",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()))}},(function(){return n.a.createElement(N.c,{className:"form ui"},n.a.createElement(x.a,null,n.a.createElement(x.a.Column,{width:6},n.a.createElement(N.b,{label:"Search query",placeholder:"Artist, album, track...",name:"query",component:M})),n.a.createElement(x.a.Column,{width:6},n.a.createElement(G,{label:"Search for",name:"kind",options:t})),n.a.createElement(x.a.Column,{width:6},n.a.createElement(L.a,{color:"green",type:"submit"},"Search"))))}))},ya=function(e){var t=e.result;return null===t?null:n.a.createElement(H.a.Row,null,n.a.createElement(H.a.Cell,null,n.a.createElement(u.b,{to:"../artist/".concat(t.artist_id)},t.artist_name)),n.a.createElement(H.a.Cell,null,n.a.createElement(u.b,{to:"../album/".concat(t.album_id)},t.album_name)),n.a.createElement(H.a.Cell,null,n.a.createElement(u.b,{to:"../track/".concat(t.track_id)},t.track_title)),n.a.createElement(H.a.Cell,null,n.a.createElement(u.b,{to:"../reports/".concat(t.report_id)},t.program_date)),n.a.createElement(H.a.Cell,null,n.a.createElement(te,{track_title:t.track_title,track_id:t.track_id,length:t.length})))},ka=function(){var e=Object(o.b)(),t=Object(r.useState)(1),a=Object(J.a)(t,2),l=a[0],c=a[1];Object(r.useEffect)((function(){e(function(e){return function(){var t=Object(g.a)(v.a.mark((function t(a){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{a({type:"SORT_ADVANCED_RESULTS",data:e})}catch(r){console.log("searchActions error sorting advanced results",r)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(l))}),[l]);var u=[{key:1,label:"Track title",value:1},{key:2,label:"Artist name",value:2}];return n.a.createElement(x.a,{columns:4},n.a.createElement(x.a.Column,null,n.a.createElement(N.d,{initialValues:{sortBy:1},onSubmit:function(e){c(e.sortBy)},validate:function(e){c(Number(e.sortBy))}},(function(){return n.a.createElement(N.c,{className:"form ui"},n.a.createElement(G,{label:"Sort by",name:"sortBy",options:u}))}))))},Oa=function(e){var t=e.search;if(0===t.advancedResults.length)return n.a.createElement("div",{style:{textAlign:"center",marginTop:"5rem"}},"No results. Please enter a query");if(!0===t.loading)return n.a.createElement(b.a,{active:!0},n.a.createElement(E.a,null,"Loading results..."));var a=t.advancedResults;return a=2===t.sortAdvancedResults?a:a.sort((function(e,t){return e.track_title>t.track_title?1:t.track_title>e.track_title?-1:0})),a=1===t.sortAdvancedResults?a:a.sort((function(e,t){return e.artist_name>t.artist_name?1:t.artist_name>e.artist_name?-1:0})),n.a.createElement("div",{style:{marginTop:"2rem"}},n.a.createElement(ka,null),n.a.createElement(H.a,{striped:!0},n.a.createElement(H.a.Header,null,n.a.createElement(H.a.Row,null,n.a.createElement(H.a.Cell,null,"Artist"),n.a.createElement(H.a.Cell,null,"Album"),n.a.createElement(H.a.Cell,null,"Track"),n.a.createElement(H.a.Cell,null,"Latest play on"),n.a.createElement(H.a.Cell,null))),n.a.createElement(H.a.Body,null,a.map((function(e){return n.a.createElement(ya,{key:e.track_id,result:e})})))))},Ta=function(e){var t=e.onSubmit,a=e.onCancel;e.error;return n.a.createElement(N.d,{initialValues:{track_title:"",artist_name:"",album_name:"",label:"",cat_id:"",year:"",disc_no:1,track_no:1,minutes:0,seconds:0,country:0,record_country:"",people:"",comment:"",isrc:""},onSubmit:t,validate:function(e){var t={};return e.track_title&&""!==e.track_title||(t.track_title="Field is required"),e.album_name&&""!==e.album_name||(t.album_name="Field is required"),e.artist_name&&""!==e.artist_name||(t.artist_name="Field is required"),t}},(function(e){var t=e.isValid,r=e.dirty;return n.a.createElement(N.c,{className:"form ui"},n.a.createElement(N.b,{label:"Artist",placeholder:"Artist",name:"artist_name",component:P}),n.a.createElement(N.b,{label:"Album",placeholder:"Album",name:"album_name",component:P}),n.a.createElement(N.b,{label:"Track title",placeholder:"Track title...",name:"track_title",component:P}),n.a.createElement(x.a,null,n.a.createElement(x.a.Column,{width:8},n.a.createElement(N.b,{label:"Length - minutes",name:"minutes",component:Y,min:0,max:999})),n.a.createElement(x.a.Column,{width:8},n.a.createElement(N.b,{label:"Length - seconds",name:"seconds",component:Y,min:0,max:59}))),n.a.createElement(x.a,null,n.a.createElement(x.a.Column,{width:8},n.a.createElement(N.b,{label:"Track #",name:"track_no",component:Y,min:0,max:999})),n.a.createElement(x.a.Column,{width:8},n.a.createElement(N.b,{label:"Disc #",name:"disc_no",component:Y,min:0,max:99})),n.a.createElement(x.a.Column,{width:8},n.a.createElement(G,{label:"Country",name:"country",options:Ee})),n.a.createElement(x.a.Column,{width:8},n.a.createElement(G,{label:"Recorded in",name:"record_country",options:be}))),n.a.createElement(N.b,{label:"Composers - one per line",placeholder:"LAST NAME FIRST NAME",name:"people",component:V}),n.a.createElement(N.b,{label:"Year",name:"year",component:Y,min:1900,max:2900}),n.a.createElement(N.b,{label:"Spotify id",placeholder:"Spotify id",name:"spotify_id",component:M}),n.a.createElement(N.b,{label:"Comment",placeholder:"Any additional information",name:"comment",component:M}),n.a.createElement(L.a,{type:"submit",floated:"left",color:"green",disabled:!t||!r},"Add"),n.a.createElement(L.a,{floated:"right",style:{marginBottom:"1rem"},type:"button",onClick:a,color:"red"},"Cancel"))}))},Aa=function(){var e=Object(o.b)(),t=Object(r.useState)(!1),a=Object(J.a)(t,2),l=a[0],c=a[1],u=Object(r.useState)(),i=Object(J.a)(u,2),s=i[0],m=i[1],d=function(){c(!1),m(void 0)};return n.a.createElement(n.a.Fragment,null,n.a.createElement(L.a,{floated:"right",color:"green",style:{marginBottom:"0.5rem"},onClick:function(){return c(!0)}},n.a.createElement(q.a,{name:"add"}),"Add a new track"),n.a.createElement(ne.a,{open:l,onClose:d,centered:!1,closeIcon:!0},n.a.createElement(ne.a.Header,null,"Add a new track"),n.a.createElement(ne.a.Content,null,s&&n.a.createElement(xt.a,{inverted:!0,color:"red"},"Error: ".concat(s)),n.a.createElement(Ta,{onSubmit:function(t){var a,r=60*Number(t.minutes)+Number(t.seconds),n=Object(p.a)({},t,{length:r});e((a=n,Object(g.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,de.addTrackToDb(a);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log("trackActions addTrackToDb error: ",e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))))),e(j("".concat(n.track_title," by ").concat(n.artist_name," has been added to database!"),"success")),c(!1)},onCancel:d}))))},Ca=function(){var e=Object(o.c)((function(e){return e.search}));return n.a.createElement(d.a,null,n.a.createElement(Aa,null),n.a.createElement(D.a,null,"Search for tracks / artists / albums"),n.a.createElement(ha,null),n.a.createElement(Oa,{search:e}))},wa=[{key:1,value:"artist_id",label:"Artists"},{key:2,value:"track_id",label:"Tracks"},{key:3,value:"album_id",label:"Albums"}],Sa=function(e){var t=e.onSubmit;return n.a.createElement(N.d,{initialValues:{list:"artist_id",start_date:Ue()(Date.now()-6048e5).format("YYYY-MM-DD"),end_date:Ue()(new Date).format("YYYY-MM-DD")},onSubmit:t},(function(){return n.a.createElement(N.c,{className:"form ui"},n.a.createElement(x.a,null,n.a.createElement(x.a.Column,{width:4},n.a.createElement(G,{label:"Get Top100",name:"list",options:wa})),n.a.createElement(x.a.Column,{width:4,style:{marginTop:"0.2rem"}},n.a.createElement("label",{style:{fontWeight:"bold"}},"Starting"),n.a.createElement(Fe.b,{name:"start_date",dateFormat:"dd.MM.yyyy",placeholder:"dd.mm.yyyy"})),n.a.createElement(x.a.Column,{width:4,style:{marginTop:"0.2rem"}},n.a.createElement("label",{style:{fontWeight:"bold"}},"Ending"),n.a.createElement(Fe.b,{name:"end_date",dateFormat:"dd.MM.yyyy",placeholder:"dd.mm.yyyy"})," ")),n.a.createElement(L.a,{style:{marginTop:"1rem"},type:"submit",color:"green"},"Submit"))}))},Ra=function(e){var t=e.top100;return n.a.createElement(H.a,{striped:!0},n.a.createElement(H.a.Header,null,n.a.createElement(H.a.Row,null,n.a.createElement(H.a.Cell,null,"Artist"),n.a.createElement(H.a.Cell,null,"Play count"))),n.a.createElement(H.a.Body,null,t.map((function(e){return n.a.createElement(H.a.Row,{key:e.track_id},n.a.createElement(H.a.Cell,null,n.a.createElement(u.b,{to:"/artist/".concat(e.artist_id)},e.artist)),n.a.createElement(H.a.Cell,null,e.count))}))))},ja=function(e){var t=e.top100;return n.a.createElement(H.a,{striped:!0},n.a.createElement(H.a.Header,null,n.a.createElement(H.a.Row,null,n.a.createElement(H.a.Cell,null,"Artist"),n.a.createElement(H.a.Cell,null,"Album"),n.a.createElement(H.a.Cell,null,"Play count"))),n.a.createElement(H.a.Body,null,t.map((function(e){return n.a.createElement(H.a.Row,{key:e.track_id},n.a.createElement(H.a.Cell,null,n.a.createElement(u.b,{to:"/artist/".concat(e.artist_id)},e.artist)),n.a.createElement(H.a.Cell,null,n.a.createElement(u.b,{to:"/album/".concat(e.album_id)},e.album)),n.a.createElement(H.a.Cell,null,e.count))}))))},xa=function(e){var t=e.top100;return n.a.createElement(H.a,{striped:!0},n.a.createElement(H.a.Header,null,n.a.createElement(H.a.Row,null,n.a.createElement(H.a.Cell,null,"Artist"),n.a.createElement(H.a.Cell,null,"Album"),n.a.createElement(H.a.Cell,null,"Track"),n.a.createElement(H.a.Cell,null,"Play count"),n.a.createElement(H.a.Cell,null))),n.a.createElement(H.a.Body,null,t.map((function(e){return n.a.createElement(H.a.Row,{key:e.track_id},n.a.createElement(H.a.Cell,null,n.a.createElement(u.b,{to:"/artist/".concat(e.artist_id)},e.artist)),n.a.createElement(H.a.Cell,null,n.a.createElement(u.b,{to:"/album/".concat(e.album_id)},e.album)),n.a.createElement(H.a.Cell,null,n.a.createElement(u.b,{to:"/track/".concat(e.track_id)},e.track_title)),n.a.createElement(H.a.Cell,null,e.count),n.a.createElement(H.a.Cell,null,n.a.createElement(te,{track_title:e.track_title,track_id:e.track_id,length:e.length})))}))))},Da=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.search})),a=function(t){var a,r=Object(p.a)({},t,{end_date:Ue()(new Date).format("YYYY-MM-DD")});e((a=r,function(){var e=Object(g.a)(v.a.mark((function e(t){var r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"SET_SEARCH_LOADING"}),e.next=4,R.getTop100(a);case 4:r=e.sent,t({type:"TOP_100",data:r,query:a}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("searchActions error getting top100 results",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()))};return null===t.top100Query?n.a.createElement(d.a,null,n.a.createElement(D.a,{style:{display:"inline"}},"Top 100"),n.a.createElement("p",null,"Get the top 100 most played tracks, albums or artists within a time period."),n.a.createElement(Sa,{onSubmit:a})):t.loading?n.a.createElement(d.a,null,n.a.createElement(D.a,null,"Top 100"),n.a.createElement(Sa,{onSubmit:a}),n.a.createElement("div",null,"Loading...")):"artist_id"===t.top100Query.list?n.a.createElement(d.a,null,n.a.createElement(D.a,{style:{display:"inline"}},"Top 100"),n.a.createElement("p",null,"Get the top 100 most played tracks, albums or artists within a time period."),n.a.createElement(Sa,{onSubmit:a}),n.a.createElement(Ra,{top100:t.top100})):"album_id"===t.top100Query.list?n.a.createElement(d.a,null,n.a.createElement("h3",{style:{display:"inline"}},"Top 100"),n.a.createElement("p",null,"Get the top 100 most played tracks, albums or artists within a time period."),n.a.createElement(Sa,{onSubmit:a}),n.a.createElement(ja,{top100:t.top100})):"track_id"===t.top100Query.list?n.a.createElement(d.a,null,n.a.createElement(D.a,{style:{display:"inline"}},"Top 100"),n.a.createElement("p",null,"Get the top 100 most played tracks, albums or artists within a time period."),n.a.createElement(Sa,{onSubmit:a}),n.a.createElement(xa,{top100:t.top100})):null},La=function(e){var t,a=e.currentTrack,r=e.onSubmit;if(null===a)return n.a.createElement(b.a,null,n.a.createElement(E.a,null,"Loading track details..."));var l="";return a.people&&(l=a.people.replace(/\| /,"").replace(/\| /g,"\n").replace(/ \|/,"")),console.log("current track at track details form",a),n.a.createElement(x.a,{columns:2},n.a.createElement(x.a.Column,null,n.a.createElement(D.a,null,"Track details"),n.a.createElement(N.d,{initialValues:{artist:a.artist,album:a.album,track_title:a.track_title,track_id:a.track_id,length:a.length,minutes:Math.floor(a.length/60),seconds:a.length%60,country:a.country||0,record_country:a.record_country,people:l||"",disc_no:a.disc_no||1,track_no:a.track_no,year:Number(null===(t=a.year)||void 0===t?void 0:t.substring(0,4))||"",label:a.label,cat_id:a.cat_id,isrc:a.isrc,comment:a.comment||"",user_id:null,artist_id:a.artist_id,album_id:a.album_id,sortable_rank:null,report_track_id:null},onSubmit:r,validate:function(e){console.log(e);var t={};return e.track_title||(t.name="Album name is required"),t}},(function(e){var t=e.isValid;return n.a.createElement(N.c,{className:"form ui"},n.a.createElement(N.b,{label:"Artist",placeholder:"Artist",name:"artist",component:U}),n.a.createElement(N.b,{label:"Album",placeholder:"Album",name:"album",component:U}),n.a.createElement(N.b,{label:"Track title",placeholder:"Track title...",name:"track_title",component:M}),n.a.createElement(x.a,null,n.a.createElement(x.a.Column,{width:8},n.a.createElement(N.b,{label:"Length - minutes",name:"minutes",component:Y,min:0,max:999})),n.a.createElement(x.a.Column,{width:8},n.a.createElement(N.b,{label:"Length - seconds",name:"seconds",component:Y,min:0,max:59}))),n.a.createElement(x.a,null,n.a.createElement(x.a.Column,{width:8},n.a.createElement(N.b,{label:"Track #",name:"track_no",component:Y,min:0,max:999})),n.a.createElement(x.a.Column,{width:8},n.a.createElement(N.b,{label:"Disc #",name:"disc_no",component:Y,min:0,max:99})),n.a.createElement(x.a.Column,{width:8},n.a.createElement(G,{label:"Country",name:"country",options:Ee})),n.a.createElement(x.a.Column,{width:8},n.a.createElement(G,{label:"Recorded in",name:"record_country",options:be}))),n.a.createElement(N.b,{label:"Composers - one per line",placeholder:"LAST NAME FIRST NAME",name:"people",component:V}),n.a.createElement(N.b,{label:"Year",name:"year",component:Y,min:1900,max:2900}),n.a.createElement(N.b,{label:"Spotify id",placeholder:"Spotify id",name:"spotify_id",component:M}),n.a.createElement(N.b,{label:"Comment",placeholder:"Any additional information",name:"comment",component:M}),n.a.createElement(L.a,{type:"submit",floated:"left",color:"green",disabled:!t},"Update track"))}))))},Na=function(e){var t=e.pgm;return n.a.createElement(H.a.Row,null,n.a.createElement(H.a.Cell,null,t.program_date),n.a.createElement(H.a.Cell,null,n.a.createElement(u.b,{to:"/reports/".concat(t.report_id)},t.program_name)))},Ia=function(e){var t=e.playHistory;return 0===t.length?n.a.createElement(b.a,null,n.a.createElement(E.a,null,"Ladataan...")):"No plays yet"===t[0].result?n.a.createElement(n.a.Fragment,null,n.a.createElement("h4",null,"Soittohistoria"),n.a.createElement("p",null,"Ei soittoja")):n.a.createElement(n.a.Fragment,null,n.a.createElement("h4",null,"Play history"),n.a.createElement(H.a,{striped:!0},n.a.createElement(H.a.Header,null,n.a.createElement(H.a.Row,null,n.a.createElement(H.a.Cell,null,"Date"),n.a.createElement(H.a.Cell,null,"Program"))),n.a.createElement(H.a.Body,null,t.map((function(e){return n.a.createElement(Na,{key:e.report_id,pgm:e})})))))},Ga=function(e){var t=e.id,a=Object(o.b)(),l=Object(o.c)((function(e){return e.track})),c=Object(o.c)((function(e){return e.login}));if(Object(r.useEffect)((function(){a(function(e){return function(){var t=Object(g.a)(v.a.mark((function t(a){var r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"SET_LOADING"}),t.next=4,de.getOneTrack(e);case 4:r=t.sent,a({type:"GET_ONE_TRACK",data:r}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("trackActions getoneTrack error: ",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}(t)),a(function(e){return function(){var t=Object(g.a)(v.a.mark((function t(a){var r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"CLEAR_CURRENT_TRACK"}),a({type:"SET_LOADING"}),t.next=5,de.getOneTrackHistory(e);case 5:r=t.sent,a({type:"GET_ONE_TRACK_HISTORY",data:r}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log("trackActions getOneTrackHistory error: ",t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}(t))}),[]),null===l.currentTrack||0===l.playHistory.length)return n.a.createElement(d.a,null,n.a.createElement(b.a,null,n.a.createElement(E.a,null,"Ladataan...")));return n.a.createElement(d.a,null,n.a.createElement(La,{onSubmit:function(e){var t,r,n;n=e.people?"| ".concat(e.people.replace(/\n/g," | ")," |"):null;var l={artist_name:e.artist,album_name:e.album,track_title:e.track_title,track_id:e.track_id,length:60*e.minutes+e.seconds,country:e.country,record_country:e.record_country,people:n,disc_no:e.disc_no,track_no:e.track_no,year:null===(t=e.year)||void 0===t?void 0:t.toString(),label:e.label,cat_id:e.cat_id,isrc:e.isrc,comment:e.comment,user_id:null===(r=c.currentUser)||void 0===r?void 0:r.id,artist_id:e.artist_id,album_id:e.album_id,sortable_rank:null,report_track_id:null};console.log("track to update",l),a(pe(l)),a(j("Track ".concat(e.track_title," updated!"),"success"))},currentTrack:l.currentTrack}),n.a.createElement(Ia,{playHistory:l.playHistory}))},Ma=[{value:Oe.DJ,label:"DJ"},{value:Oe.Staff,label:"Staff"},{value:Oe.Admin,label:"Admin"}],Pa=[{value:1,label:"Active"},{value:0,label:"Inactive"}],Ua=function(e){var t=e.onSubmit,a=e.onCancel,r=e.user;return n.a.createElement(N.d,{initialValues:{password:"",confirm_password:"",first_name:r.first_name,last_name:r.last_name,email:r.email,level:r.level,status:r.status},onSubmit:t,validate:function(e){var t={};return e.password!==e.confirm_password&&(t.password="Passwords do not match",t.confirm_password="Passwords do not match"),e.email||(t.email="Field is required"),e.first_name||(t.first_name="Field is required"),e.last_name||(t.last_name="Field is required"),t}},(function(e){var t=e.isValid;return n.a.createElement(N.c,{className:"form ui"},n.a.createElement(N.b,{label:"Password - fill out field only if you wish to change the password",placeholder:"Password",name:"password",type:"password",component:F}),n.a.createElement(N.b,{label:"Confirm password",placeholder:"Confirm password",name:"confirm_password",type:"password",component:F}),n.a.createElement(N.b,{label:"First name",placeholder:"First name",name:"first_name",component:M,required:!0}),n.a.createElement(N.b,{label:"Last name",placeholder:"Last name",name:"last_name",component:M}),n.a.createElement(N.b,{label:"Email",placeholder:"Email",name:"email",component:M}),n.a.createElement(G,{label:"Level",name:"level",options:Ma}),n.a.createElement(G,{label:"Status",name:"status",options:Pa}),n.a.createElement(x.a,null,n.a.createElement(x.a.Column,{floated:"left",width:5},n.a.createElement(L.a,{type:"button",onClick:a,color:"red"},"Cancel")),n.a.createElement(x.a.Column,{floated:"right",width:5},n.a.createElement(L.a,{type:"submit",floated:"right",color:"green",disabled:!t},"Update"))))}))},Fa=function(e){var t=e.modalOpen,a=e.onClose,r=e.onSubmit,l=e.error,c=e.user;return n.a.createElement(ne.a,{open:t,onClose:a,centered:!1,closeIcon:!0},n.a.createElement(ne.a.Header,null,"Edit info of user ",c.username),n.a.createElement(ne.a.Content,null,l&&n.a.createElement(xt.a,{inverted:!0,color:"red"},"Error: ".concat(l)),n.a.createElement(Ua,{user:c,onSubmit:r,onCancel:a})))},Ba=function(e){var t,a,l,c=e.user,u=Object(o.b)(),i=Object(r.useState)(!1),s=Object(J.a)(i,2),m=s[0],d=s[1],b=Object(r.useState)(!1),E=Object(J.a)(b,2),f=E[0],_=E[1],h=Object(r.useState)(),y=Object(J.a)(h,2),k=y[0],O=y[1],T=function(){_(!1),O(void 0)};return t=1===c.level?"DJ":2===c.level?"Staff":"Admin",null===c.status||0===c.status?(l="Inactive",a="inactive-user"):1===c.status&&(l="Active",a="active-user"),n.a.createElement(H.a.Row,null,n.a.createElement(H.a.Cell,null,n.a.createElement(Fa,{user:c,modalOpen:f,onSubmit:function(e){try{var t=Object(p.a)({},e,{id:c.id});u(yt(t)),u(j("".concat(t.first_name," ").concat(t.last_name," updated!"),"success")),console.log("updating user",t),T()}catch(a){console.error(a.response.data),O(a.response.data.error)}},error:k,onClose:T}),n.a.createElement("button",{style:{border:"none",cursor:"pointer",color:"teal"},onClick:function(){return _(!0)}},c.username)),n.a.createElement(H.a.Cell,null,c.first_name," ",c.last_name),n.a.createElement(H.a.Cell,null,c.last_seen),n.a.createElement(H.a.Cell,{className:a},l),n.a.createElement(H.a.Cell,null,t),n.a.createElement(H.a.Cell,null,n.a.createElement(q.a,{color:"red",onClick:function(){return d(!0)},name:"delete"}),n.a.createElement(ze.a,{content:"Are you sure you wish to delete user ".concat(c.username,"?"),open:m,onCancel:function(){d(!1)},onConfirm:function(){var e;d(!1),u((e=c.id,function(){var t=Object(g.a)(v.a.mark((function t(a){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"SET_LOADING"}),a({type:"DELETE_USER",data:e}),t.next=5,dt.deleteUser(e);case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()))},cancelButton:"Cancel delete",confirmButton:"Confirm delete"})))},Ya=function(e){var t=e.users;return n.a.createElement(d.a,null,n.a.createElement("div",{style:{marginTop:"1rem",marginBottom:"1rem"}},n.a.createElement("h3",{style:{display:"inline"}},"Users")),n.a.createElement(H.a,{striped:!0},n.a.createElement(H.a.Header,null,n.a.createElement(H.a.Row,null,n.a.createElement(H.a.Cell,null,"Username"),n.a.createElement(H.a.Cell,null,"Name"),n.a.createElement(H.a.Cell,null,"Latest login"),n.a.createElement(H.a.Cell,null,"Status"),n.a.createElement(H.a.Cell,null,"Level"))),n.a.createElement(H.a.Body,null,t.map((function(e){return n.a.createElement(Ba,{user:e,key:e.id})})))))},Va=[{value:Oe.DJ,label:"DJ"},{value:Oe.Staff,label:"Staff"},{value:Oe.Admin,label:"Admin"}],za=function(e){var t=e.onSubmit,a=e.onCancel;return n.a.createElement(N.d,{initialValues:{username:"",password:"",confirm_password:"",first_name:"",last_name:"",email:"",level:Oe.DJ},onSubmit:t,validate:function(e){var t="Field is required",a={};return e.username||(a.username=t),e.password||(a.password=t),e.confirm_password||(a.confirm_password=t),e.password!==e.confirm_password&&(a.password="Passwords do not match",a.confirm_password="Passwords do not match"),e.email||(a.email=t),e.first_name||(a.first_name=t),e.last_name||(a.last_name=t),a}},(function(e){var t=e.isValid,r=e.dirty;return n.a.createElement(N.c,{className:"form ui"},n.a.createElement(N.b,{label:"Username",placeholder:"Username",name:"username",component:P}),n.a.createElement(N.b,{label:"Password",placeholder:"Password",name:"password",type:"password",component:B}),n.a.createElement(N.b,{label:"Confirm password",placeholder:"Confirm password",name:"confirm_password",type:"password",component:B}),n.a.createElement(N.b,{label:"First name",placeholder:"First name",name:"first_name",component:P}),n.a.createElement(N.b,{label:"Last name",placeholder:"Last name",name:"last_name",component:P}),n.a.createElement(N.b,{label:"Email",placeholder:"Email",name:"email",component:P}),n.a.createElement(G,{label:"Level",name:"level",options:Va}),n.a.createElement(x.a,null,n.a.createElement(x.a.Column,{floated:"left",width:5},n.a.createElement(L.a,{type:"button",onClick:a,color:"red"},"Cancel")),n.a.createElement(x.a.Column,{floated:"right",width:5},n.a.createElement(L.a,{type:"submit",floated:"right",color:"green",disabled:!r||!t},"Add"))))}))},Ha=function(e){var t=e.modalOpen,a=e.onClose,r=e.onSubmit,l=e.error;return n.a.createElement(ne.a,{open:t,onClose:a,centered:!1,closeIcon:!0},n.a.createElement(ne.a.Header,null,"Add a new user"),n.a.createElement(ne.a.Content,null,l&&n.a.createElement(xt.a,{inverted:!0,color:"red"},"Error: ".concat(l)),n.a.createElement(za,{onSubmit:r,onCancel:a})))},Ka=function(){var e,t=Object(o.c)((function(e){return e.user})),a=Object(o.c)((function(e){return e.login})),r=Object(o.b)(),l=n.a.useState(!1),c=Object(J.a)(l,2),u=c[0],i=c[1],s=n.a.useState(),m=Object(J.a)(s,2),p=m[0],b=m[1],E=function(){i(!1),b(void 0)};return 3===(null===(e=a.currentUser)||void 0===e?void 0:e.level)?n.a.createElement(d.a,null,n.a.createElement(L.a,{floated:"right",color:"green",style:{marginBottom:"0.5rem"},onClick:function(){return i(!0)}},n.a.createElement(q.a,{name:"add"}),"Add a new user"),n.a.createElement(Ha,{modalOpen:u,onSubmit:function(e){try{r((t=e,function(){var e=Object(g.a)(v.a.mark((function e(a){var r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:"SET_LOADING"}),e.next=4,dt.createUser(t);case 4:r=e.sent,a({type:"CREATE_USER",data:r}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}())),r(j("User ".concat(e.username," created!"),"success")),E()}catch(a){r(j("Failed to create user!","fail")),console.error(a.response.data),b(a.response.data.error)}var t},error:p,onClose:E}),n.a.createElement(Ya,{users:t.users})):null},qa=function(){var e,t,a,l=Object(o.b)(),c=Object(o.c)((function(e){return e.login})),s=Object(o.c)((function(e){return e.notification}));return Object(r.useEffect)((function(){l(function(){var e=Object(g.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t({type:"SET_LOADING"}),(a=window.localStorage.getItem("loggedUser"))&&(r=JSON.parse(a),dt.setToken(r.token),Q.setToken(r.token),tt.setToken(r.token),st.setToken(r.token),R.setToken(r.token),de.setToken(r.token),De.setToken(r.token),k.setToken(r.token),t({type:"INIT_USER",data:r}))}catch(n){console.log("error initializing user",n)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),l(function(){var e=Object(g.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"SET_LOADING"}),e.next=4,dt.getAll();case 4:a=e.sent,t({type:"INIT_USER_LIST",data:a}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()),l(function(){var e=Object(g.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"SET_LOADING"}),e.next=4,st.getAllActive();case 4:a=e.sent,t({type:"GET_ALL_ACTIVE_PROGRAMS",data:a}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("error getting all active programs programActions.initializePrograms",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()),l(jt()),m.a.get("/ping")}),[null===(e=c.currentUser)||void 0===e?void 0:e.token]),null===c.currentUser?n.a.createElement(d.a,null,n.a.createElement(Rt,{notification:s}),n.a.createElement(bt,null),n.a.createElement(Me,null)):null===(null===(t=c.currentUser)||void 0===t?void 0:t.status)||0===(null===(a=c.currentUser)||void 0===a?void 0:a.status)?n.a.createElement(d.a,null,n.a.createElement(Rt,{notification:s}),n.a.createElement(bt,null),n.a.createElement("div",null,"Credentials deactivated. Please contact the administrator."),n.a.createElement(Me,null)):n.a.createElement(u.a,null,n.a.createElement("div",{className:"App"},n.a.createElement(wt,null),n.a.createElement(Rt,{notification:s})),n.a.createElement(i.d,null,n.a.createElement(i.b,{exact:!0,path:"/",component:ct}),n.a.createElement(i.b,{exact:!0,path:"/reports",component:Zt}),n.a.createElement(i.b,{exact:!0,path:"/transfer",component:_a}),n.a.createElement(i.b,{exact:!0,path:"/top100",component:Da}),n.a.createElement(i.b,{exact:!0,path:"/search",component:Ca}),n.a.createElement(i.b,{exact:!0,path:"/programs",component:zt}),n.a.createElement(i.b,{exact:!0,path:"/users",component:Ka}),n.a.createElement(i.b,{path:"/album/:id",render:function(e){var t=e.match;return n.a.createElement(Se,{id:t.params.id})}}),n.a.createElement(i.b,{path:"/artist/:id",render:function(e){var t=e.match;return n.a.createElement(Ge,{id:t.params.id})}}),n.a.createElement(i.b,{path:"/track/:id",render:function(e){var t=e.match;return n.a.createElement(Ga,{id:t.params.id})}}),n.a.createElement(i.b,{path:"/reports/:id",render:function(e){var t=e.match;return n.a.createElement(Ea,{id:t.params.id})}})),n.a.createElement(Me,null))},Ja=a(93),Wa=a(376),Za=a(377),Qa={currentAlbum:null,tracklist:[],loading:!1},Xa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ONE_ALBUM":return Object(p.a)({},e,{currentAlbum:t.data,loading:!1});case"GET_TRACKLIST_OF_ALBUM":return Object(p.a)({},e,{tracklist:t.data,loading:!1});case"CLEAR_CURRENT_ALBUM":return Object(p.a)({},e,{currentAlbum:null,tracklist:[],loading:!1});case"ADD_TRACK_TO_ALBUM":return Object(p.a)({},e,{tracklist:[].concat(Object(Jt.a)(e.tracklist),[t.data])});case"SET_LOADING":return Object(p.a)({},e,{loading:!0});default:return e}},$a={currentArtist:null,albumList:[],loading:!1},er=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$a,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ONE_ARTIST":return Object(p.a)({},e,{currentArtist:t.data,loading:!1});case"GET_ALBUM_LIST_BY_ARTIST":return Object(p.a)({},e,{albumList:t.data,loading:!1});case"CLEAR_CURRENT_ARTIST":return Object(p.a)({},e,{currentArtist:null});case"SET_LOADING":return Object(p.a)({},e,{loading:!0});default:return e}},tr={loading:!1,currentUser:null},ar=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_USER":case"LOGIN":case"UPDATE_CURRENT_USER":return Object(p.a)({},e,{currentUser:t.data,loading:!1});case"LOGOUT":return tr;case"SET_LOADING":return Object(p.a)({},e,{loading:!0});default:return e}},rr={message:null,type:null},nr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_NOTIFICATION":return t.data;case"CLEAR_NOTIFICATION":return rr;default:return e}},lr={allPrograms:[],activePrograms:[],program:null,loading:!1},cr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ALL_PROGRAMS":return Object(p.a)({},e,{allPrograms:t.data,loading:!1});case"GET_ALL_ACTIVE_PROGRAMS":return Object(p.a)({},e,{activePrograms:t.data,loading:!1});case"GET_ONE_PROGRAM":return Object(p.a)({},e,{program:t.data,loading:!1});case"CREATE_NEW_PROGRAM":return Object(p.a)({},e,{allPrograms:[].concat(Object(Jt.a)(e.allPrograms),[t.data]),loading:!1});case"CREATE_NEW_PROGRAM_ON_NEW_REPORT":return Object(p.a)({},e,{activePrograms:[].concat(Object(Jt.a)(e.activePrograms),[t.data]),loading:!1});case"UPDATE_PROGRAM":return Object(p.a)({},e,{allPrograms:e.allPrograms.map((function(e){return e.id===t.data.id?t.data:e})),loading:!1});default:return e}},or={report:[],playlog:[],editTrackId:null,reportDetails:null,newReport:null,loading:!1,checkedForDelete:[],currentTrack:null},ur=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:or,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ONE_REPORT":return Object(p.a)({},e,{report:t.data,loading:!1});case"GET_PLAYLOG_TRACKS":return Object(p.a)({},e,{report:[].concat(Object(Jt.a)(e.report),Object(Jt.a)(t.data)),playlog:t.data,loading:!1});case"GET_REPORT_DETAILS":return Object(p.a)({},e,{reportDetails:t.data,newReport:null,loading:!1});case"ADD_NEW_TRACK":return Object(p.a)({},e,{report:[].concat(Object(Jt.a)(e.report),[t.data]),loading:!1});case"ADD_TRACK_TO_REPORT":return Object(p.a)({},e,{report:[].concat(Object(Jt.a)(e.report),[t.data])});case"UPDATE_TRACK":return Object(p.a)({},e,{report:e.report.map((function(e){return e.track_id===t.data.track_id?t.data:e})),loading:!1});case"SET_EDIT_TRACK_ID":return Object(p.a)({},e,{editTrackId:t.data});case"GET_ONE_TRACK":return Object(p.a)({},e,{currentTrack:t.data,loading:!1});case"REMOVE_CURRENT_TRACK":return Object(p.a)({},e,{currentTrack:null});case"CLEAR_CURRENT_REPORT":return Object(p.a)({},e,{report:[]});case"CREATE_REPORT":return Object(p.a)({},e,{newReport:t.data,reportDetails:t.data,loading:!1});case"UPDATE_REPORT":return Object(p.a)({},e,{reportDetails:t.data,newReport:null,loading:!1});case"DELETE_TRACK_FROM_REPORT":return Object(p.a)({},e,{report:e.report.filter((function(e){return e.report_track_id!==t.data}))});case"CHECK_FOR_DELETE":return Object(p.a)({},e,{checkedForDelete:[t.data].concat(Object(Jt.a)(e.checkedForDelete))});case"UNCHECK_FOR_DELETE":return Object(p.a)({},e,{checkedForDelete:e.checkedForDelete.filter((function(e){return e!==t.data}))});case"CLEAR_CHECKED_FOR_DELETE":return Object(p.a)({},e,{checkedForDelete:[]});case"SET_LOADING":return Object(p.a)({},e,{loading:!0});default:return e}},ir={reportList:[],inProgress:[],reportListDate:null,reportTransferList:[],lastTransfer:null,loading:!1,filterStatusValue:null,filterUserValue:null,filterByText:"",error:null},sr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ir,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ALL_REPORTS_BY_DATE":return Object(p.a)({},e,{reportList:t.data,reportListDate:t.date,loading:!1});case"GET_ALL_IN_PROGRESS":return Object(p.a)({},e,{inProgress:t.data,loading:!1});case"GET_ALL_REPORT_TRANSFERS":return Object(p.a)({},e,{reportTransferList:t.data,loading:!1});case"GENERATE_REPORT_TRANSFER":return Object(p.a)({},e,{lastTransfer:t.data,loading:!1});case"DELETE_REPORT":return Object(p.a)({},e,{reportList:e.reportList.filter((function(e){return e.id!==t.data})),loading:!1});case"FILTER_BY_USER_ID":return Object(p.a)({},e,{filterUserValue:t.data});case"FILTER_BY_STATUS":return Object(p.a)({},e,{filterStatusValue:t.data});case"FILTER_BY_TEXT":return Object(p.a)({},e,{filterByText:t.data});case"SET_LOADING":return Object(p.a)({},e,{loading:!0});default:return e}},mr={top100:[],top100Query:null,advancedResults:[],sortAdvancedResults:null,loading:!1,discogsData:null},dr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADVANCED_RESULTS":return Object(p.a)({},e,{advancedResults:t.data,loading:!1});case"SORT_ADVANCED_RESULTS":return Object(p.a)({},e,{sortAdvancedResults:t.data});case"TOP_100":return Object(p.a)({},e,{top100:t.data,top100Query:t.query,loading:!1});case"GET_DISCOGS_DATA":return Object(p.a)({},e,{discogsData:t.data});case"CLEAR_DISCOGS_DATA":return Object(p.a)({},e,{discogsData:null});case"SET_SEARCH_LOADING":return Object(p.a)({},e,{loading:!0});case"MERGE_TRACKS":return Object(p.a)({},e,{advancedResults:e.advancedResults.filter((function(e){return e.track_id!==t.data.merge}))});case"MERGE_ARTISTS":var a=t.data.merge,r=t.data.mergeTo,n=t.data.newName,l=e.advancedResults.filter((function(e){return e.artist_id===a})),c=l.map((function(e){return Object(p.a)({},e,{artist_id:r,artist_name:n})})),o=e.advancedResults.filter((function(e){return e.artist_id!==a})),u=[].concat(Object(Jt.a)(c),Object(Jt.a)(o));return Object(p.a)({},e,{advancedResults:u});default:return e}},pr={currentTrack:null,playHistory:[],loading:!1},br=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ONE_TRACK":case"UPDATE_TRACK":return Object(p.a)({},e,{currentTrack:t.data,loading:!1});case"GET_ONE_TRACK_HISTORY":return Object(p.a)({},e,{playHistory:t.data,loading:!1});case"CLEAR_CURRENT_TRACK":return Object(p.a)({},e,{playhistory:null,currentTrack:null});case"SET_LOADING":return Object(p.a)({},e,{loading:!0});default:return e}},Er={users:[],loading:!1},fr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Er,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_USER_LIST":return Object(p.a)({},e,{users:t.data,loading:!1});case"CREATE_USER":return Object(p.a)({},e,{users:[].concat(Object(Jt.a)(e.users),[t.data]),loading:!1});case"UPDATE_USER":return Object(p.a)({},e,{users:t.data,loading:!1});case"DELETE_USER":return Object(p.a)({},e,{users:e.users.filter((function(e){return e.id!==t.data})),loading:!1});case"SET_LOADING":return Object(p.a)({},e,{loading:!0});default:return e}},vr=Object(Ja.combineReducers)({album:Xa,artist:er,login:ar,notification:nr,program:cr,report:ur,reportList:sr,search:dr,track:br,user:fr}),gr=Object(Ja.createStore)((function(e,t){return"LOGOUT"===t.type&&(e=void 0),vr(e,t)}),Object(Wa.composeWithDevTools)(Object(Ja.applyMiddleware)(Za.a)));c.a.render(n.a.createElement(o.a,{store:gr},n.a.createElement(qa,null)),document.getElementById("root"))}},[[392,1,2]]]);
//# sourceMappingURL=main.735897db.chunk.js.map